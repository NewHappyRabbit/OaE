/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={28:e=>{e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},928:function(e){e.exports=function(){"use strict";var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t=m,n=o,s=function(e){return l(o(e))},i=l,a=p,r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e){for(var t,n=[],s=0,i=0,a="";null!=(t=r.exec(e));){var o=t[0],l=t[1],c=t.index;if(a+=e.slice(i,c),i=c+o.length,l)a+=l[1];else{a&&(n.push(a),a="");var d=t[2],u=t[3],p=t[4],m=t[5],g=t[6],f=t[7],v="+"===g||"*"===g,w="?"===g||"*"===g,y=d||"/",b=p||m||(f?".*":"[^"+y+"]+?");n.push({name:u||s++,prefix:d||"",delimiter:y,optional:w,repeat:v,pattern:h(b)})}}return i<e.length&&(a+=e.substr(i)),a&&n.push(a),n}function l(t){for(var n=new Array(t.length),s=0;s<t.length;s++)"object"==typeof t[s]&&(n[s]=new RegExp("^"+t[s].pattern+"$"));return function(s){for(var i="",a=s||{},r=0;r<t.length;r++){var o=t[r];if("string"!=typeof o){var l,c=a[o.name];if(null==c){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to be defined')}if(e(c)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var h=0;h<c.length;h++){if(l=encodeURIComponent(c[h]),!n[r].test(l))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but received "'+l+'"');i+=(0===h?o.prefix:o.delimiter)+l}}else{if(l=encodeURIComponent(c),!n[r].test(l))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but received "'+l+'"');i+=o.prefix+l}}else i+=o}return i}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function h(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function d(e,t){return e.keys=t,e}function u(e){return e.sensitive?"":"i"}function p(e,t){for(var n=(t=t||{}).strict,s=!1!==t.end,i="",a=e[e.length-1],r="string"==typeof a&&/\/$/.test(a),o=0;o<e.length;o++){var l=e[o];if("string"==typeof l)i+=c(l);else{var h=c(l.prefix),d=l.pattern;l.repeat&&(d+="(?:"+h+d+")*"),i+=d=l.optional?h?"(?:"+h+"("+d+"))?":"("+d+")?":h+"("+d+")"}}return n||(i=(r?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=s?"$":n&&r?"":"(?=\\/|$)",new RegExp("^"+i,u(t))}function m(t,n,s){return e(n=n||[])?s||(s={}):(s=n,n=[]),t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var s=0;s<n.length;s++)t.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return d(e,t)}(t,n):e(t)?function(e,t,n){for(var s=[],i=0;i<e.length;i++)s.push(m(e[i],t,n).source);return d(new RegExp("(?:"+s.join("|")+")",u(n)),t)}(t,n,s):function(e,t,n){for(var s=o(e),i=p(s,n),a=0;a<s.length;a++)"string"!=typeof s[a]&&t.push(s[a]);return d(i,t)}(t,n,s)}t.parse=n,t.compile=s,t.tokensToFunction=i,t.tokensToRegExp=a;var g,f="undefined"!=typeof document,v="undefined"!=typeof window,w="undefined"!=typeof history,y="undefined"!=typeof process,b=f&&document.ontouchstart?"touchstart":"click",_=v&&!(!window.history.location&&!window.location);function k(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function T(e,t){if("function"==typeof e)return T.call(this,"*",e);if("function"==typeof t)for(var n=new E(e,null,this),s=1;s<arguments.length;++s)this.callbacks.push(n.middleware(arguments[s]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function R(e){if(!e.handled){var t=this,n=t._window;(t._hashbang?_&&this._getBase()+n.location.hash.replace("#!",""):_&&n.location.pathname+n.location.search)!==e.canonicalPath&&(t.stop(),e.handled=!1,_&&(n.location.href=e.canonicalPath))}}function C(e,t,n){var s=this.page=n||T,i=s._window,a=s._hashbang,r=s._getBase();"/"===e[0]&&0!==e.indexOf(r)&&(e=r+(a?"#!":"")+e);var o=e.indexOf("?");this.canonicalPath=e;var l=new RegExp("^"+r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=e.replace(l,"")||"/",a&&(this.path=this.path.replace("#!","")||"/"),this.title=f&&i.document.title,this.state=t||{},this.state.path=e,this.querystring=~o?s._decodeURLEncodedURIComponent(e.slice(o+1)):"",this.pathname=s._decodeURLEncodedURIComponent(~o?e.slice(0,o):e),this.params={},this.hash="",!a){if(!~this.path.indexOf("#"))return;var c=this.path.split("#");this.path=this.pathname=c[0],this.hash=s._decodeURLEncodedURIComponent(c[1])||"",this.querystring=this.querystring.split("#")[0]}}function E(e,n,s){var i=this.page=s||S,a=n||{};a.strict=a.strict||i._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=t(this.path,this.keys=[],a)}k.prototype.configure=function(e){var t=e||{};this._window=t.window||v&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&v,this._click=!1!==t.click&&f,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):v&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(b,this.clickHandler,!1):f&&n.document.removeEventListener(b,this.clickHandler,!1),this._hashbang&&v&&!w?n.addEventListener("hashchange",this._onpopstate,!1):v&&n.removeEventListener("hashchange",this._onpopstate,!1)},k.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},k.prototype._getBase=function(){var e=this._base;if(e)return e;var t=v&&this._window&&this._window.location;return v&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},k.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},k.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,_){var s=this._window.location;n=this._hashbang&&~s.hash.indexOf("#!")?s.hash.substr(2)+s.search:this._hashbang?s.search+s.hash:s.pathname+s.search+s.hash}this.replace(n,null,!0,t.dispatch)}},k.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(b,this.clickHandler,!1),v&&e.removeEventListener("popstate",this._onpopstate,!1),v&&e.removeEventListener("hashchange",this._onpopstate,!1)}},k.prototype.show=function(e,t,n,s){var i=new C(e,t,this),a=this.prevContext;return this.prevContext=i,this.current=i.path,!1!==n&&this.dispatch(i,a),!1!==i.handled&&!1!==s&&i.pushState(),i},k.prototype.back=function(e,t){var n=this;if(this.len>0){var s=this._window;w&&s.history.back(),this.len--}else e?setTimeout((function(){n.show(e,t)})):setTimeout((function(){n.show(n._getBase(),t)}))},k.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&T.call(this,e,(function(e){setTimeout((function(){n.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){n.replace(e)}),0)},k.prototype.replace=function(e,t,n,s){var i=new C(e,t,this),a=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),!1!==s&&this.dispatch(i,a),i},k.prototype.dispatch=function(e,t){var n=0,s=0,i=this;function a(){var t=i.callbacks[n++];if(e.path===i.current)return t?void t(e,a):R.call(i,e);e.handled=!1}t?function e(){var n=i.exits[s++];if(!n)return a();n(t,e)}():a()},k.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new E(e,null,this),s=1;s<arguments.length;++s)this.exits.push(n.middleware(arguments[s]))},k.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var s=0;s<n.length;s++)if(n[s].nodeName&&"A"===n[s].nodeName.toUpperCase()&&n[s].href){t=n[s];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var i="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var a=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==a)&&!(a&&a.indexOf("mailto:")>-1)&&!(i?t.target.baseVal:t.target)&&(i||this.sameOrigin(t.href))){var r=i?t.href.baseVal:t.pathname+t.search+(t.hash||"");r="/"!==r[0]?"/"+r:r,y&&r.match(/^\/[a-zA-Z]:\//)&&(r=r.replace(/^\/[a-zA-Z]:\//,"/"));var o=r,l=this._getBase();0===r.indexOf(l)&&(r=r.substr(l.length)),this._hashbang&&(r=r.replace("#!","")),(!l||o!==r||_&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(o))}}}}},k.prototype._onpopstate=(g=!1,v?(f&&"complete"===document.readyState?g=!0:window.addEventListener("load",(function(){setTimeout((function(){g=!0}),0)})),function(e){if(g){var t=this;if(e.state){var n=e.state.path;t.replace(n,e.state)}else if(_){var s=t._window.location;t.show(s.pathname+s.search+s.hash,void 0,void 0,!1)}}}):function(){}),k.prototype._which=function(e){return null==(e=e||v&&this._window.event).which?e.button:e.which},k.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&_)return new URL(e,t.location.toString());if(f){var n=t.document.createElement("a");return n.href=e,n}},k.prototype.sameOrigin=function(e){if(!e||!_)return!1;var t=this._toURL(e),n=this._window.location;return n.protocol===t.protocol&&n.hostname===t.hostname&&(n.port===t.port||""===n.port&&(80==t.port||443==t.port))},k.prototype._samePath=function(e){if(!_)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},k.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},C.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,w&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},C.prototype.save=function(){var e=this.page;w&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},E.prototype.middleware=function(e){var t=this;return function(n,s){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,s);s()}},E.prototype.match=function(e,t){var n=this.keys,s=e.indexOf("?"),i=~s?e.slice(0,s):e,a=this.regexp.exec(decodeURIComponent(i));if(!a)return!1;delete t[0];for(var r=1,o=a.length;r<o;++r){var l=n[r-1],c=this.page._decodeURLEncodedURIComponent(a[r]);void 0===c&&hasOwnProperty.call(t,l.name)||(t[l.name]=c)}return!0};var S=function e(){var t=new k;function n(){return T.apply(t,arguments)}return n.callbacks=t.callbacks,n.exits=t.exits,n.base=t.base.bind(t),n.strict=t.strict.bind(t),n.start=t.start.bind(t),n.stop=t.stop.bind(t),n.show=t.show.bind(t),n.back=t.back.bind(t),n.redirect=t.redirect.bind(t),n.replace=t.replace.bind(t),n.dispatch=t.dispatch.bind(t),n.exit=t.exit.bind(t),n.configure=t.configure.bind(t),n.sameOrigin=t.sameOrigin.bind(t),n.clickHandler=t.clickHandler.bind(t),n.create=e,Object.defineProperty(n,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(n,"current",{get:function(){return t.current},set:function(e){t.current=e}}),n.Context=C,n.Route=E,n}(),A=S,x=S;return A.default=x,A}()},148:e=>{var t=function(e){"use strict";var t,n=Object.prototype,s=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function h(e,t,n,s){var a=t&&t.prototype instanceof v?t:v,r=Object.create(a.prototype),o=new I(s||[]);return i(r,"_invoke",{value:E(e,n,o)}),r}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var u="suspendedStart",p="suspendedYield",m="executing",g="completed",f={};function v(){}function w(){}function y(){}var b={};c(b,r,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(D([])));k&&k!==n&&s.call(k,r)&&(b=k);var T=y.prototype=v.prototype=Object.create(b);function R(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,r,o){var l=d(e[i],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&s.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,r,o)}),(function(e){n("throw",e,r,o)})):t.resolve(h).then((function(e){c.value=e,r(c)}),(function(e){return n("throw",e,r,o)}))}o(l.arg)}var a;i(this,"_invoke",{value:function(e,s){function i(){return new t((function(t,i){n(e,s,t,i)}))}return a=a?a.then(i,i):i()}})}function E(e,t,n){var s=u;return function(i,a){if(s===m)throw new Error("Generator is already running");if(s===g){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var r=n.delegate;if(r){var o=S(r,n);if(o){if(o===f)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===u)throw s=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=m;var l=d(e,t,n);if("normal"===l.type){if(s=n.done?g:p,l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(s=g,n.method="throw",n.arg=l.arg)}}}function S(e,n){var s=n.method,i=e.iterator[s];if(i===t)return n.delegate=null,"throw"===s&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+s+"' method")),f;var a=d(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var r=a.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function D(e){if(e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(s.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return w.prototype=y,i(T,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:w,configurable:!0}),w.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},R(C.prototype),c(C.prototype,o,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,s,i,a){void 0===a&&(a=Promise);var r=new C(h(t,n,s,i),a);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},R(T),c(T,l,"Generator"),c(T,r,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var s in t)n.push(s);return n.reverse(),function e(){for(;n.length;){var s=n.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},e.values=D,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(s,i){return o.type="throw",o.arg=e,n.next=s,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=s.call(r,"catchLoc"),c=s.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var s=n.completion;if("throw"===s.type){var i=s.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,s){return this.delegate={iterator:D(e),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},568:(e,t,n)=>{const s=n(715);e.exports={recognize:async(e,t,n)=>{const i=await s(t,1,n);return i.recognize(e).finally((async()=>{await i.terminate()}))},detect:async(e,t)=>{const n=await s("osd",0,t);return n.detect(e).finally((async()=>{await n.terminate()}))}}},113:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},46:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},449:e=>{e.exports={workerBlobURL:!0,logger:()=>{}}},895:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},702:(e,t,n)=>{const s=n(700);let i=0;e.exports=({id:e,action:t,payload:n={}})=>{let a=e;return void 0===a&&(a=s("Job",i),i+=1),{id:a,action:t,payload:n}}},218:function(e,t,n){const s=n(702),{log:i}=n(326),a=n(700);let r=0;e.exports=()=>{const e=a("Scheduler",r),t={},n={};let o=[];r+=1;const l=()=>Object.keys(t).length,c=()=>{if(0!==o.length){const e=Object.keys(t);for(let s=0;s<e.length;s+=1)if(void 0===n[e[s]]){o[0](t[e[s]]);break}}},h=(t,a)=>new Promise(((r,l)=>{const h=s({action:t,payload:a});o.push((async e=>{o.shift(),n[e.id]=h;try{r(await e[t].apply(this,[...a,h.id]))}catch(e){l(e)}finally{delete n[e.id],c()}})),i(`[${e}]: Add ${h.id} to JobQueue`),i(`[${e}]: JobQueue length=${o.length}`),c()}));return{addWorker:n=>(t[n.id]=n,i(`[${e}]: Add ${n.id}`),i(`[${e}]: Number of workers=${l()}`),c(),n.id),addJob:async(t,...n)=>{if(0===l())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return h(t,n)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),o=[]},getQueueLen:()=>o.length,getNumWorkers:l}}},715:(e,t,n)=>{const s=n(99),i=n(879),a=n(702),{log:r}=n(326),o=n(700),l=n(113),{defaultOptions:c,spawnWorker:h,terminateWorker:d,onMessage:u,loadImage:p,send:m}=n(437);let g=0;e.exports=async(e="eng",t=l.LSTM_ONLY,n={},f={})=>{const v=o("Worker",g),{logger:w,errorHandler:y,...b}=s({...c,...n}),_={},k={},T="string"==typeof e?e.split("+"):e;let R=t,C=f;const E=[l.DEFAULT,l.LSTM_ONLY].includes(t)&&!b.legacyCore;let S,A;const x=new Promise(((e,t)=>{A=e,S=t}));let I=h(b);I.onerror=e=>{S(e.message)},g+=1;const D=(e,t)=>{_[e]=t},O=(e,t)=>{k[e]=t},L=({id:e,action:t,payload:n})=>new Promise(((s,i)=>{r(`[${v}]: Start ${e}, action=${t}`),D(t,s),O(t,i),m(I,{workerId:v,jobId:e,action:t,payload:n})})),M=(e,t)=>L(a({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:b.langPath,dataPath:b.dataPath,cachePath:b.cachePath,cacheMethod:b.cacheMethod,gzip:b.gzip,lstmOnly:[l.LSTM_ONLY,l.TESSERACT_LSTM_COMBINED].includes(R)&&!b.legacyLang}}})),N=(e,t,n,s)=>L(a({id:s,action:"initialize",payload:{langs:e,oem:t,config:n}}));u(I,(({workerId:e,jobId:t,status:n,action:s,data:a})=>{if("resolve"===n){r(`[${e}]: Complete ${t}`);let n=a;"recognize"===s?n=i(a):"getPDF"===s&&(n=Array.from({...a,length:Object.keys(a).length})),_[s]({jobId:t,data:n})}else if("reject"===n){if(k[s](a),"load"===s&&S(a),!y)throw Error(a);y(a)}else"progress"===n&&w({...a,userJobId:t})}));const P={id:v,worker:I,setResolve:D,setReject:O,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>L(a({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>L(a({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>L(a({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>L(a({id:n,action:"FS",payload:{method:e,args:t}})),loadLanguage:()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),initialize:()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),reinitialize:(e="eng",t,n,s)=>{if(E&&[l.TESSERACT_ONLY,l.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const i=t||R;R=i;const a=n||C;C=a;const r=("string"==typeof e?e.split("+"):e).filter((e=>!T.includes(e)));return T.push(...r),r.length>0?M(r,s).then((()=>N(e,i,a,s))):N(e,i,a,s)},setParameters:(e={},t)=>L(a({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},n={blocks:!0,text:!0,hocr:!0,tsv:!0},s)=>L(a({id:s,action:"recognize",payload:{image:await p(e),options:t,output:n}})),getPDF:(e="Tesseract OCR Result",t=!1,n)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),L(a({id:n,action:"getPDF",payload:{title:e,textonly:t}}))),detect:async(e,t)=>{if(E)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return L(a({id:t,action:"detect",payload:{image:await p(e)}}))},terminate:async()=>(null!==I&&(d(I),I=null),Promise.resolve())};return L(a({id:undefined,action:"load",payload:{options:{lstmOnly:E,corePath:b.corePath,logging:b.logging}}})).then((()=>M(e))).then((()=>N(e,t,f))).then((()=>A(P))).catch((()=>{})),x}},875:(e,t,n)=>{n(148);const s=n(218),i=n(715),a=n(568),r=n(895),o=n(113),l=n(46),{setLogging:c}=n(326);e.exports={languages:r,OEM:o,PSM:l,createScheduler:s,createWorker:i,setLogging:c,...a}},879:e=>{e.exports=e=>{const t=[],n=[],s=[],i=[],a=[];return e.blocks&&e.blocks.forEach((r=>{r.paragraphs.forEach((t=>{t.lines.forEach((n=>{n.words.forEach((s=>{s.symbols.forEach((i=>{a.push({...i,page:e,block:r,paragraph:t,line:n,word:s})})),i.push({...s,page:e,block:r,paragraph:t,line:n})})),s.push({...n,page:e,block:r,paragraph:t})})),n.push({...t,page:e,block:r})})),t.push({...r,page:e})})),{...e,blocks:t,paragraphs:n,lines:s,words:i,symbols:a}}},614:(e,t,n)=>{const s=n(28);e.exports=e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":s()?t.type="electron":"object"==typeof document?t.type="browser":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]}},700:e=>{e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},326:function(e,t){let n=!1;t.logging=n,t.setLogging=e=>{n=e},t.log=(...e)=>n?console.log.apply(this,e):null},99:(e,t,n)=>{const s="browser"===n(614)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((n=>{e[n]&&(t[n]=s(t[n]))})),t}},50:(e,t,n)=>{const{version:s}=n(547),i=n(449);e.exports={...i,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${s}/dist/worker.min.js`}},437:(e,t,n)=>{const s=n(50),i=n(478),a=n(7),r=n(337),o=n(981),l=n(748);e.exports={defaultOptions:s,spawnWorker:i,terminateWorker:a,onMessage:r,send:o,loadImage:l}},748:e=>{const t=e=>new Promise(((t,n)=>{const s=new FileReader;s.onload=()=>{t(s.result)},s.onerror=({target:{error:{code:e}}})=>{n(Error(`File could not be read! Code=${e}`))},s.readAsArrayBuffer(e)})),n=async e=>{let s=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))s=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(e);s=await t.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(s=await n(e.src)),"VIDEO"===e.tagName&&(s=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise((n=>{e.toBlob((async e=>{s=await t(e),n()}))}));else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();s=await t(n)}else(e instanceof File||e instanceof Blob)&&(s=await t(e));return new Uint8Array(s)};e.exports=n},337:e=>{e.exports=(e,t)=>{e.onmessage=({data:e})=>{t(e)}}},981:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},478:e=>{e.exports=({workerPath:e,workerBlobURL:t})=>{let n;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(t))}else n=new Worker(e);return n}},7:e=>{e.exports=e=>{e.terminate()}},547:e=>{"use strict";e.exports=JSON.parse('{"name":"tesseract.js","version":"5.0.2","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0","acorn":"^8.8.2","babel-loader":"^9.1.2","buffer":"^6.0.3","cors":"^2.8.5","eslint":"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1","express":"^4.18.2","mocha":"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^5.0.0","rollup":"^3.20.7","wait-on":"^7.0.1","webpack":"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},"dependencies":{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.0.0","wasm-feature-detect":"^1.2.11","zlibjs":"^0.3.1"},"overrides":{"@rollup/pluginutils":"^5.0.2"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s={};(()=>{"use strict";n.d(s,{n:()=>Xa,p:()=>er});var e,t=n(928),i=n.n(t);const a=window,r=a.trustedTypes,o=r?r.createPolicy("lit-html",{createHTML:e=>e}):void 0,l="$lit$",c=`lit$${(Math.random()+"").slice(9)}$`,h="?"+c,d=`<${h}>`,u=document,p=()=>u.createComment(""),m=e=>null===e||"object"!=typeof e&&"function"!=typeof e,g=Array.isArray,f="[ \t\n\f\r]",v=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,w=/-->/g,y=/>/g,b=RegExp(`>|${f}(?:([^\\s"'>=/]+)(${f}*=${f}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),_=/'/g,k=/"/g,T=/^(?:script|style|textarea|title)$/i,R=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),C=R(1),E=(R(2),Symbol.for("lit-noChange")),S=Symbol.for("lit-nothing"),A=new WeakMap,x=u.createTreeWalker(u,129,null,!1);function I(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(t):t}const D=(e,t)=>{const n=e.length-1,s=[];let i,a=2===t?"<svg>":"",r=v;for(let t=0;t<n;t++){const n=e[t];let o,h,u=-1,p=0;for(;p<n.length&&(r.lastIndex=p,h=r.exec(n),null!==h);)p=r.lastIndex,r===v?"!--"===h[1]?r=w:void 0!==h[1]?r=y:void 0!==h[2]?(T.test(h[2])&&(i=RegExp("</"+h[2],"g")),r=b):void 0!==h[3]&&(r=b):r===b?">"===h[0]?(r=null!=i?i:v,u=-1):void 0===h[1]?u=-2:(u=r.lastIndex-h[2].length,o=h[1],r=void 0===h[3]?b:'"'===h[3]?k:_):r===k||r===_?r=b:r===w||r===y?r=v:(r=b,i=void 0);const m=r===b&&e[t+1].startsWith("/>")?" ":"";a+=r===v?n+d:u>=0?(s.push(o),n.slice(0,u)+l+n.slice(u)+c+m):n+c+(-2===u?(s.push(void 0),t):m)}return[I(e,a+(e[n]||"<?>")+(2===t?"</svg>":"")),s]};class O{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let i=0,a=0;const o=e.length-1,d=this.parts,[u,m]=D(e,t);if(this.el=O.createElement(u,n),x.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(s=x.nextNode())&&d.length<o;){if(1===s.nodeType){if(s.hasAttributes()){const e=[];for(const t of s.getAttributeNames())if(t.endsWith(l)||t.startsWith(c)){const n=m[a++];if(e.push(t),void 0!==n){const e=s.getAttribute(n.toLowerCase()+l).split(c),t=/([.?@])?(.*)/.exec(n);d.push({type:1,index:i,name:t[2],strings:e,ctor:"."===t[1]?V:"?"===t[1]?H:"@"===t[1]?F:P})}else d.push({type:6,index:i})}for(const t of e)s.removeAttribute(t)}if(T.test(s.tagName)){const e=s.textContent.split(c),t=e.length-1;if(t>0){s.textContent=r?r.emptyScript:"";for(let n=0;n<t;n++)s.append(e[n],p()),x.nextNode(),d.push({type:2,index:++i});s.append(e[t],p())}}}else if(8===s.nodeType)if(s.data===h)d.push({type:2,index:i});else{let e=-1;for(;-1!==(e=s.data.indexOf(c,e+1));)d.push({type:7,index:i}),e+=c.length-1}i++}}static createElement(e,t){const n=u.createElement("template");return n.innerHTML=e,n}}function L(e,t,n=e,s){var i,a,r,o;if(t===E)return t;let l=void 0!==s?null===(i=n._$Co)||void 0===i?void 0:i[s]:n._$Cl;const c=m(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(a=null==l?void 0:l._$AO)||void 0===a||a.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,n,s)),void 0!==s?(null!==(r=(o=n)._$Co)&&void 0!==r?r:o._$Co=[])[s]=l:n._$Cl=l),void 0!==l&&(t=L(e,l._$AS(e,t.values),l,s)),t}class M{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:n},parts:s}=this._$AD,i=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:u).importNode(n,!0);x.currentNode=i;let a=x.nextNode(),r=0,o=0,l=s[0];for(;void 0!==l;){if(r===l.index){let t;2===l.type?t=new N(a,a.nextSibling,this,e):1===l.type?t=new l.ctor(a,l.name,l.strings,this,e):6===l.type&&(t=new B(a,this,e)),this._$AV.push(t),l=s[++o]}r!==(null==l?void 0:l.index)&&(a=x.nextNode(),r++)}return x.currentNode=u,i}v(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class N{constructor(e,t,n,s){var i;this.type=2,this._$AH=S,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cp=null===(i=null==s?void 0:s.isConnected)||void 0===i||i}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=L(this,e,t),m(e)?e===S||null==e||""===e?(this._$AH!==S&&this._$AR(),this._$AH=S):e!==this._$AH&&e!==E&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>g(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==S&&m(this._$AH)?this._$AA.nextSibling.data=e:this.$(u.createTextNode(e)),this._$AH=e}g(e){var t;const{values:n,_$litType$:s}=e,i="number"==typeof s?this._$AC(e):(void 0===s.el&&(s.el=O.createElement(I(s.h,s.h[0]),this.options)),s);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.v(n);else{const e=new M(i,this),t=e.u(this.options);e.v(n),this.$(t),this._$AH=e}}_$AC(e){let t=A.get(e.strings);return void 0===t&&A.set(e.strings,t=new O(e)),t}T(e){g(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const i of e)s===t.length?t.push(n=new N(this.k(p()),this.k(p()),this,this.options)):n=t[s],n._$AI(i),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class P{constructor(e,t,n,s,i){this.type=1,this._$AH=S,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=S}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const i=this.strings;let a=!1;if(void 0===i)e=L(this,e,t,0),a=!m(e)||e!==this._$AH&&e!==E,a&&(this._$AH=e);else{const s=e;let r,o;for(e=i[0],r=0;r<i.length-1;r++)o=L(this,s[n+r],t,r),o===E&&(o=this._$AH[r]),a||(a=!m(o)||o!==this._$AH[r]),o===S?e=S:e!==S&&(e+=(null!=o?o:"")+i[r+1]),this._$AH[r]=o}a&&!s&&this.j(e)}j(e){e===S?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class V extends P{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===S?void 0:e}}const $=r?r.emptyScript:"";class H extends P{constructor(){super(...arguments),this.type=4}j(e){e&&e!==S?this.element.setAttribute(this.name,$):this.element.removeAttribute(this.name)}}class F extends P{constructor(e,t,n,s,i){super(e,t,n,s,i),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=L(this,e,t,0))&&void 0!==n?n:S)===E)return;const s=this._$AH,i=e===S&&s!==S||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,a=e!==S&&(s===S||i);i&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class B{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){L(this,e)}}const W=a.litHtmlPolyfillSupport;null==W||W(O,N),(null!==(e=a.litHtmlVersions)&&void 0!==e?e:a.litHtmlVersions=[]).push("2.8.0");const j=(e,t,n)=>{var s,i;const a=null!==(s=null==n?void 0:n.renderBefore)&&void 0!==s?s:t;let r=a._$litPart$;if(void 0===r){const e=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:null;a._$litPart$=r=new N(t.insertBefore(p(),e),e,void 0,null!=n?n:{})}return r._$AI(e),r};class q{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}class U extends q{constructor(e){if(super(e),this.et=S,2!==e.type)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===S||null==e)return this.ft=void 0,this.et=e;if(e===E)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.et)return this.ft;this.et=e;const t=[e];return t.raw=t,this.ft={_$litType$:this.constructor.resultType,strings:t,values:[]}}}U.directiveName="unsafeHTML",U.resultType=1;const z=(e=>(...t)=>({_$litDirective$:e,values:t}))(U);function G(e){return e.replace(/\^([^^]+)\^/g,'<span class="text-yellow">$1</span>').replace(/@([^@]+)@/g,'<span class="text-red">$1</span>').replace(/\$([^\$]+)\$/g,'<span class="text-green">$1</span>').replace(/\*([^*]+)\*/g,'<span class="text-blue">$1</span>').replace(/%%([^%]+)%%/g,'<span class="text-purple">$1</span>').replace(/&([^&]+)&/g,(function(e,t){const n=Y(t);let s=t.split("/").pop();return s.includes("#")&&(s=s.split("#").pop()),`<a href="${n}">${s}</a>`}))}function Y(e){return e.replaceAll(" ","")}window.onscroll=function(){!function(){const e=document.getElementById("scrollToTop");document.body.scrollTop>300||document.documentElement.scrollTop>300?e.style.display="block":e.style.display="none"}()};const K={"Owl Scout":[{img:"/images/elves/upgrades/treeOfWar/owlSpecialist.webp",imgR:"/images/elves/upgrades/treeOfWar/owlSpecialistR.webp",name:"Owl Specialist 1",hotkey:"A",description:"&/elves/units/Owl Scout& <ul><li>Vision range: 600 -> ^750^ (^+150^)</li><li>Health: 40 -> ^60^ (^+20^)</li><li>Unlocks &/elves/units/OwlScout#Night Vision& (passive) - reveal invisible units within 600 range.</li></ul>",gold:50},{img:"/images/elves/upgrades/treeOfWar/owlSpecialist.webp",imgR:"/images/elves/upgrades/treeOfWar/owlSpecialistR.webp",name:"Owl Specialist 2",hotkey:"A",description:"&/elves/units/Owl Scout& <ul><li>Vision range: 750 -> ^900^ (^+150^)</li><li>Move speed: 325 -> ^406.25^ (^+25%^)</li></ul>&/elves/units/Owl Scout#Scout& ability<ul><li>Duration: 10 -> ^15^ seconds (^+5 seconds^)</li><li>Cooldown: 75 -> ^45^ seconds (^-30 seconds^)</li></ul>",gold:125},{img:"/images/elves/units/hippogryph/hippogryph.webp",imgR:"/images/elves/units/hippogryph/hippogryphR.webp",name:"Bird Training 1",hotkey:"Z",description:"Allow the &/elves/units/Owl Scout& to morph into a &/elves/units/Hippogryph&.",gold:300},{img:"/images/elves/units/hippogryphRider/hippogryphRider.webp",imgR:"/images/elves/units/hippogryphRider/hippogryphRiderR.webp",name:"Bird Training 2",hotkey:"Z",description:"Allow the &/elves/units/Archer& to mount a &/elves/units/Hippogryph&, creating a &/elves/units/Hippogryph Rider&.",gold:200}],Archer:[{img:"/images/elves/upgrades/treeOfWar/marksmanshipR.png",imgR:"/images/elves/upgrades/treeOfWar/marksmanshipR.png",name:"Marksmanship",hotkey:"S",description:"&/elves/units/Archer&<ul><li>Attack range: 600 -> ^750^ (^+150^)</li></ul>&/elves/units/Hippogryph Rider&<ul><li>Attack range: 600 -> ^750^ (^+150^)</li></ul>",gold:100}],Ent:[{img:"/images/elves/upgrades/treeOfWar/sprouts.webp",imgR:"/images/elves/upgrades/treeOfWar/sproutsR.webp",name:"Sprout",hotkey:"D",description:"Unlocks the &/elves/units/Ent& unit.",gold:100},{img:"/images/elves/upgrades/treeOfWar/burrowR.png",imgR:"/images/elves/upgrades/treeOfWar/burrowR.png",name:"Burrow",hotkey:"D",description:"&/elves/units/Ent&<ul><li>Unlocks &/elves/units/Ent#Burrow& ability</li></ul>",gold:100}],Druid:[{img:"/images/elves/upgrades/treeOfWar/druidTraining1.webp",imgR:"/images/elves/upgrades/treeOfWar/druidTraining1R.webp",name:"Druid Training 1",hotkey:"F",description:"Unlocks the &/elves/units/Druid&.",gold:100},{img:"/images/elves/upgrades/treeOfWar/druidTraining2.webp",imgR:"/images/elves/upgrades/treeOfWar/druidTraining2R.webp",name:"Druid Training 2",hotkey:"F",description:"&/elves/units/Druid&<ul><li>Mana regeneration ^+0.15^/second</li><li>Unlocks the &/elves/units/Druid#Faerie Fire& ability</li></ul></ul>",gold:150},{img:"/images/elves/upgrades/treeOfWar/druidTraining3.webp",imgR:"/images/elves/upgrades/treeOfWar/druidTraining3R.webp",name:"Druid Training 3",hotkey:"F",description:"&/elves/units/Druid&<ul><li>Mana regeneration ^+0.15^/second</li><li>Unlocks the &/elves/units/Druid#Cleanse& ability</li><li>Unlocks the &/elves/units/Druid#Drain Mana& ability</li></ul></ul>",gold:150},{img:"/images/elves/upgrades/treeOfWar/druidTraining4.webp",imgR:"/images/elves/upgrades/treeOfWar/druidTraining4R.webp",name:"Druid Training 4",hotkey:"F",description:"&/elves/units/Druid&<ul><li>Mana regeneration ^+0.15^/second</li><li>Unlocks the &/elves/units/Druid#Slumber& ability</li><li>Unlocks the &/elves/units/Druid#Healing Rain& ability</li></ul></ul>",gold:250}]},Q=[];Object.values(K).forEach((e=>{Q.push(...e)}));const J=[{img:"/images/elves/upgrades/treeOfLife/regeneration.webp",imgR:"/images/elves/upgrades/treeOfLife/regenerationR.webp",name:"Regeneration",hotkey:"Q",description:"The &/elves/units/Elven Worker& health regenerates ^+3%^ life per second."},{img:"/images/elves/upgrades/treeOfLife/wildGrowth.webp",imgR:"/images/elves/upgrades/treeOfLife/wildGrowthR.webp",name:"Wild Growth",hotkey:"W",description:"Allows you to build structures without a &/elves/buildings/Gold Mine&."},{img:"/images/elves/buildings/techCenter.webp",imgR:"/images/elves/buildings/techCenterR.webp",name:"Tech Center",hotkey:"E",description:"<p>Replace the &/elves/buildings/Tree Of Technology& with the &/elves/buildings/Tech Center&.</p><p>The &/elves/buildings/Tech Center& has ^2x2^ size and is built ^+33%^ faster.</p><p class='text-danger'>All player owned &/elves/buildings/Tree Of Technology& are destroyed and refunded when you choose this talent.</p>"},{img:"/images/elves/buildings/barracks.webp",imgR:"/images/elves/buildings/barracksR.webp",name:"Barracks",hotkey:"R",description:"<p>Replace the &/elves/buildings/Tree Of War& with the &/elves/buildings/Barracks&.</p><p>The &/elves/buildings/Barracks& has ^2x2^ size and is built ^+33%^ faster.</p><p class='text-danger'>All player owned &/elves/buildings/Tree Of War& are destroyed and refunded when you choose this talent.</p>"},{img:"/images/elves/upgrades/treeOfLife/persistence.webp",imgR:"/images/elves/upgrades/treeOfLife/persistenceR.webp",name:"Persistence",hotkey:"A",description:"<p>Your next revive is free (0g) and without death penalty (%gold).</p><p class='text-danger'>If you are dead when you select this talent, then it takes effect immediately but the charge is consumed.</p>"},{img:"/images/elves/upgrades/treeOfLife/savior.webp",imgR:"/images/elves/upgrades/treeOfLife/saviorR.webp",name:"Savior",hotkey:"S",description:"When resurrecting other players ^30%^ of the gold you send is also added to their bonus pool and reduced from the cost of their next revive."},{img:"/images/elves/upgrades/treeOfLife/trickery.webp",imgR:"/images/elves/upgrades/treeOfLife/trickeryR.webp",name:"Trickery",hotkey:"D",description:"<p>Reduce the &/elves/units/Elven Worker& abilities cooldown by ^-15%^.</p><p>You also respawn with ^50%^ of your maximum mana when returning to the map after a resurrection.</p>"},{img:"/images/elves/upgrades/treeOfLife/naturalBond.webp",imgR:"/images/elves/upgrades/treeOfLife/naturalBondR.webp",name:"Natural Bond",hotkey:"F",description:"<p>Reduce resurrection time by ^-50%^.</p><p>Spawn a free &/elves/units/Owl Scout& when you return to the map after resurrecting.</p>"},{img:"/images/elves/upgrades/treeOfLife/shatter.webp",imgR:"/images/elves/upgrades/treeOfLife/shatterR.webp",name:"Shatter",hotkey:"Z",description:"The &/elves/units/Elven Worker& deals ^+1^ additional damage per hit to destructible objects."},{img:"/images/elves/upgrades/treeOfLife/resurrection.png",imgR:"/images/elves/upgrades/treeOfLife/resurrection.png",name:"Resurrection",hotkey:"V",description:"Resurrect your &/elves/units/Elven Worker&."}],Z={orcs:{name:"orcs",nameCapitalized:"Orcs",units:[{img:"/images/orcs/units/grunt/grunt.webp",imgR:"/images/orcs/units/grunt/gruntR.webp",name:"Grunt",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, voluptatum.",stats:{Damage:14,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:3e3},abilities:[{img:"/images/orcs/spellbook/scryer.png",imgR:"/images/orcs/spellbook/scryerR.png",name:"Scryer",hotkey:"W",mana:"25/20/15",cooldown:"60/30/0",description:"<p>^Level 1^: Gain vision over ^600^ radius for ^6^ seconds and reveal invisible units. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Gain vision over ^600^ radius for ^8^ seconds and reveal invisible units. The effect persists on workers for up to ^3^ seconds after leaving the area. %%(Requires &/orcs/buildings/altar#Conjurer& *3*)%%</p><p>^Level 3^: Gain vision over ^600^ radius for ^10^ seconds and reveal invisible units. The effect persists on workers for up to ^5^ seconds after leaving the area. All &/elves/units/ElvenWorker#Watching Owl&*s* in the region are dispelled. %%(Requires &/orcs/buildings/altar#Conjurer& *5*)%%</p>"},{img:"/images/orcs/spellbook/corruption.webp",imgR:"/images/orcs/spellbook/corruptionR.webp",name:"Corruption",hotkey:"E",mana:"20/15/10",cooldown:"40/20/0",description:"<p>^Level 1^: Spawn a seed of corruption that activates after ^12^ seconds delay, making the area unbuildable for up to ^60^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Spawn a seed of corruption that activates after ^10^ seconds delay, making the area unbuildable for up to ^90^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *3*)%%</p><p>^Level 3^: Spawn a seed of corruption that activates after ^8^ seconds delay, making the area unbuildable for up to ^120^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *5*)%%</p>"},{img:"/images/orcs/spellbook/haunt.webp",imgR:"/images/orcs/spellbook/hauntR.webp",name:"Haunt",hotkey:"R",mana:"40/40/40",cooldown:"60/45/40",description:"<p>^Level 1^: Summon a spirit with ^500^ vision and ^100^ health and order it to haunt a neutral &/elves/buildings/Gold Mine&. Haunted gold mines cannot be mined from while the spirit is present. This effect lasts for ^60^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Summon a spirit with ^500^ vision and ^500^ health and order it to haunt a neutral &/elves/buildings/Gold Mine&. Haunted gold mines cannot be mined from while the spirit is present. This effect lasts for ^90^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *2*)%%</p><p>^Level 3^: Summon a spirit with ^500^ vision and ^1000^ health and order it to haunt a neutral &/elves/buildings/Gold Mine&. Haunted gold mines cannot be mined from, the area becomes unbuildable and up to ^50^ gold is removed from the mine while the spirit is present. This effect lasts for ^120^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *4*)%%</p>"},{img:"/images/orcs/spellbook/turret.webp",imgR:"/images/orcs/spellbook/turretR.webp",name:"Turret",hotkey:"S",mana:"50/50/50",cooldown:"30/15/0",description:"<p>^Level 1^: Place a turret with ^2^ health at the selected point that activates after ^5^ seconds. Active turrets can attack blockers within ^500^ radius, dealing ^10^ damage per hit. The turret lats up to ^60^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Place a turret with ^3^ health at the selected point that activates after ^5^ seconds. Active turrets can attack blockers within ^500^ radius, dealing ^15^ damage per hit. If no targets are found, the turret will become invisible. The turret lats up to ^90^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *3*)%%</p><p>^Level 3^: Place a turret with ^4^ health at the selected point that activates after ^5^ seconds. Active turrets can attack blockers within ^500^ radius, dealing ^20^ damage per hit. The turrets attack rate is increased by ^50%^ over ^90^ seconds. If no targets are found, the turret will become invisible. The turret lats up to ^120^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *5*)%%</p>"},{img:"/images/orcs/spellbook/ghost.png",imgR:"/images/orcs/spellbook/ghost.png",name:"Ghost",hotkey:"D",mana:"20/20/20",cooldown:"60/45/30",description:"<p>^Level 1^: While active the caster has no unit collision, but is unable to attack or cast spells. This effect lasts for a minimum of ^2^ seconds or until the caster can be placed. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: While active the caster has no unit collision, and moves ^20%^ faster, but is unable to attack or cast spells. This effect lasts for a minimum of ^3^ seconds or until the caster can be placed. %%(Requires &/orcs/buildings/altar#Conjurer& *3*)%%</p><p>^Level 3^: While active the caster has no unit collision, and moves ^40%^ faster, but is unable to attack or cast spells. This effect lasts for a minimum of ^4^ seconds or until the caster can be placed. %%(Requires &/orcs/buildings/altar#Conjurer& *3*)%%</p>"},{img:"/images/orcs/spellbook/dart.webp",imgR:"/images/orcs/spellbook/dartR.webp",name:"Dart",hotkey:"F",mana:"35/35/35",cooldown:"60/45/30",description:"<p>^Level 1^: Fire a poisoned in the selected direction. If the projectile collides with a hostile ground unit it deals ^10^ damage over ^10^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *2*)%%</p><p>^Level 2^: Fire a poisoned in the selected direction. If the projectile collides with a hostile ground unit it deals ^25^ damage over ^10^ seconds. If the projectile travels further than ^200^ range the targets move speed is reduced up to ^40%^ based on the total distance traveled, for a maximum of ^3^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *3*)%%</p><p>^Level 3^: Fire a poisoned in the selected direction. If the projectile collides with a hostile ground unit it deals ^40^ damage over ^10^ seconds. If the projectile travels further than ^200^ range the targets move speed is reduced up to ^80%^ based on the total distance traveled, for a maximum of ^4^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *4*)%%</p>"}]},{img:"/images/orcs/units/shaman/shaman.webp",imgR:"/images/orcs/units/shaman/shamanR.webp",name:"Shaman",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>^Replace the &/orcs/units/Grunt& with &/orcs/units/Shaman&.^</p><p>A spell-caster and short-ranged attacker. The shaman can snipe exposed targets, roam and protect allies from traps. But he is vulnerable to physical damage and require solid positioning to stay alive and to score kills.</p>",stats:{Damage:15,"Attack speed":1.8,"Attack range":130,"Move speed":270,Health:4500},abilities:[{img:"/images/orcs/units/farseer.webp",imgR:"/images/orcs/units/farseerR.webp",name:"Far Seer (Morph 2)",description:"Replace the &/orcs/units/Shaman& with the &/orcs/units/Far Seer&.",gold:200},{img:"/images/orcs/units/shaman/abilities/stormshield.webp",imgR:"/images/orcs/units/shaman/abilities/stormshieldR.webp",name:"Storm Shield",hotkey:"Q",mana:"35",cooldown:"90/60",gold:50,description:"Activate to make the caster immune to spell and magic damage for ^3/5^ seconds. While active, harmful single target spells used on the caster are blocked.</p><p>^Counter^ - for ^0.5^ seconds after activation, harmful single target spells used against the caster are countered. Successful counters within this time window give the caster ^20/40%^ attack rate and ^10/20%^ move speed for ^8/8^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/shaman/abilities/lightning.png",imgR:"/images/orcs/units/shaman/abilities/lightning.png",name:"Lightning",hotkey:"E",mana:"25",cooldown:"20/15",gold:75,description:"Channel for ^1.5/1^ seconds to fire a lightning bolt in the selected direction. If the lightning hits a hostile ground unit it deals ^100%^ damage of the casters attack value as physical damage, workers take ^50%^ damage instead. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%<p>@The bolt cannot pierce through structures or cliffs.@</p>"},{img:"/images/orcs/units/shaman/abilities/firestorm.webp",imgR:"/images/orcs/units/shaman/abilities/firestormR.webp",name:"Firestorm",hotkey:"R",mana:"50",cooldown:"150/120",gold:75,description:"<p>Channel for ^3^ seconds to summon a firestorm. While channeling, the storm gradually expands outwards from the center, covering an area of up to ^300/500^ radius and increase the total storm duration up to ^30^ seconds.</p><p>Enemies in the region take ^2/5^ damage per seconds while the storm is active. Blockers take ^4x^ damage. Workers cannot be harmed by this effect. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>@If you stop channeling after a successful summon, then the storm will remain at it's current size.@</p>"},{img:"/images/orcs/units/shaman/abilities/destruction.webp",imgR:"/images/orcs/units/shaman/abilities/destructionR.webp",name:"Destruction",gold:"20/40/60/80",passive:!0,description:"<p>^Level 1^: Increase unit damage by ^+20%^.</p><p>^Level 2^: Increase unit damage by ^+20%^.</p><p>^Level 3^: Increase unit damage by ^+20%^.</p><p>^Level 4^: Increase unit damage by ^+20%^. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>^Level 4^: Increase unit damage by ^+20%^.</p><p>@This bonus does not apply to *Structures* or &/elves/units/Elven Worker&.@</p>"},{img:"/images/orcs/units/shaman/abilities/electrocute.webp",imgR:"/images/orcs/units/shaman/abilities/electrocuteR.webp",name:"Electrocute",gold:"40/60",passive:!0,description:"<p>^Level 1^: Worker kills within ^1500^ range of the shaman increase attack damage by ^1^, stacking up to ^5^ times.</p><p>@All stacks are lost if your character is killed.@</p><p>^Level 2^: Worker kills within ^1500^ range of the shaman increase attack damage by ^2^, stacking up to ^5^ times. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>@All stacks are lost if your character is killed.@</p>"},{img:"/images/orcs/units/shaman/abilities/revelation.webp",imgR:"/images/orcs/units/shaman/abilities/revelationR.webp",name:"Revelation",passive:!0,gold:"60",description:"<p>Allow the user to see over cliffs within ^500^ radius. The vision range is increased to ^1000^ when stationary for ^6^ seconds or more, but decreases again if you move.</p><p>@This effect is disabled for ^5^ seconds if the character takes damage.@</p>"}]},{img:"/images/orcs/units/tracker/tracker.webp",imgR:"/images/orcs/units/tracker/trackerR.webp",name:"Tracker",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>^Replace the &/orcs/units/Grunt& with &/orcs/units/Tracker&.^</p><p>The tracker is a mobile melee attacker that excels at roaming, where he can cover a lot of ground and use various tools to catch his prey. But he is vulnerable to magic damage and may struggle against tower bases.</p>",stats:{Damage:15,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:4500},abilities:[{img:"/images/orcs/units/hunter.webp",imgR:"/images/orcs/units/hunterR.webp",name:"Hunter (Morph 2)",description:"Replace the &/orcs/units/Tracker& with the &/orcs/units/Hunter&.",gold:200},{img:"/images/orcs/units/tracker/abilities/doubleganger.webp",imgR:"/images/orcs/units/tracker/abilities/doublegangerR.webp",name:"Doubleganger",hotkey:"Q",mana:"50",cooldown:"120/90",gold:75,description:"Summon a clone that lasts for ^120/180^ seconds and deals ^50/100%^ of the casters damage. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/tracker/abilities/ensnare.webp",imgR:"/images/orcs/units/tracker/abilities/ensnareR.webp",name:"Ensnare",hotkey:"E",mana:"25",cooldown:"30/20",gold:50,description:"Throw a net in the selected direction. Enemies hit by the net are immobilized for ^2/3^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/tracker/abilities/trail.png",imgR:"/images/orcs/units/tracker/abilities/trail.png",name:"Trail",hotkey:"R",mana:35,cooldown:"60/45",gold:75,description:"When in motion you create a trail for the next ^10^ seconds. You have vision over the trail and allied units that stick to it have their move speed increased by ^15/30%^ and are dispelled from most slow effects. The trail lasts for ^60/90^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/tracker/abilities/huntingParty.png",imgR:"/images/orcs/units/tracker/abilities/huntingParty.png",name:"Hunting Party",passive:!0,gold:75,description:"When the hunter is within ^1500^ range of a dying worker, allied players within this area gain ^5%^ additional move speed for ^7^ seconds and restore ^10^ mana to the healing ward for each allied player in range. This effect stacks up to ^4^ times."},{img:"/images/orcs/units/tracker/abilities/strider.webp",imgR:"/images/orcs/units/tracker/abilities/striderR.webp",name:"Strider",passive:!0,gold:"40/100",description:"<p>^Level 1^: Increase move speed by ^25^ over ^60^ seconds.</p><p>^Level 2^: Increase move speed by ^55^ over ^60^ seconds. If you are at maximum stacks when you lose this bonus, then you gain ^10^ armor for ^6^ seconds. %%Requires &/orcs/buildings/Morph& *2*%%</p><p>@This bonus resets if you take damage.@</p>"},{img:"/images/orcs/units/tracker/abilities/precision.webp",imgR:"/images/orcs/units/tracker/abilities/precisionR.webp",name:"Precision",passive:!0,gold:"20/40/60/80/100",description:"<p>^Level 1^: Increase unit damage by ^+20%^.</p><p>^Level 2^: Increase unit damage by ^+20%^.</p><p>^Level 3^: Increase unit damage by ^+20%^.</p><p>^Level 4^: Increase unit damage by ^+20%^. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>^Level 5^: Increase unit damage by ^+20%^.</p><p>@This bonus does not apply to *Structures* or &/elves/units/Elven Worker&@</p>"}]},{img:"/images/orcs/units/tauren/tauren.webp",imgR:"/images/orcs/units/tauren/taurenR.webp",name:"Tauren",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>^Replace the &/orcs/units/Grunt& with &/orcs/units/Tauren&.^</p><p>A slow and durable melee attacker. The tauren has exceptional survival capacity and can apply consistent pressure over long periods of time. He is vulnerable to physical attacks and can easily be outmaneuvered by agile foes.</p>",stats:{Damage:16,"Attack speed":1.5,"Attack range":92,"Move speed":240,Health:6e3},abilities:[{img:"/images/orcs/units/taurenchieftain.webp",imgR:"/images/orcs/units/taurenchieftainR.webp",name:"Tauren Chieftain (Morph 2)",description:"Replace the &/orcs/units/Tauren& with the &/orcs/units/Tauren Chieftain&.",gold:200},{img:"/images/orcs/units/tauren/abilities/rampage.webp",imgR:"/images/orcs/units/tauren/abilities/rampageR.webp",name:"Rampage",hotkey:"Q",mana:50,cooldown:"90/60",gold:75,description:"Activate to enter a rampage that increases your attack speed by up to ^30/50%^ over ^8^ seconds and regenerate up to ^30/40%^ of your max health over ^40/60^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%<p>@Every time the caster moves, the attack speed bonus resets and the total effect duration is reduced.@</p>"},{img:"/images/orcs/units/tauren/abilities/barrier.png",imgR:"/images/orcs/units/tauren/abilities/barrier.png",name:"Barrier",hotkey:"E",mana:35,gold:75,cooldown:"150/120",description:"Create a protective field that lasts for ^60/90^ seconds. Allies within the field have their armor increased from ^1^ to ^8/15^ over ^30/60^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%<p>@Units that leave the area lose all stacks.@</p>"},{img:"/images/orcs/units/tauren/abilities/pulverize.webp",imgR:"/images/orcs/units/tauren/abilities/pulverizeR.webp",name:"Pulverize",hotkey:"R",mana:25,gold:50,cooldown:"300/300",description:"Destroy a *Natural Blocker* to gain access to a new passage. This ability has ^1/2^ charges. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/tauren/abilities/demolish.webp",imgR:"/images/orcs/units/tauren/abilities/demolishR.webp",name:"Demolish",passive:!0,gold:"30/45/60/75/90",description:"<p>^Level 1^: Increase damage to structures by ^10%^.</p><p>^Level 2^: Increase damage to structures by ^15%^.</p><p>^Level 3^: Increase damage to structures by ^20%^.</p><p>^Level 4^: Increase damage to structures by ^25%^. %%Requires &/orcs/buildings/Morph& *2*%%</p><p>^Level 5^: Increase damage to structures by ^30%^.</p>"},{img:"/images/orcs/units/tauren/abilities/timber.webp",imgR:"/images/orcs/units/tauren/abilities/timberR.webp",name:"Timber",passive:!0,gold:75,description:"&/elves/buildings/Blocker& kills restore ^2%^ of your total health per blocker level. If the blocker is upgraded, your max health is permanently increased by ^200^, stacking up to ^50^ times."}]},{img:"/images/orcs/units/medic/medic.webp",imgR:"/images/orcs/units/medic/medicR.webp",name:"Medic",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>^Replace the &/orcs/units/Grunt& with &/orcs/units/Medic&.^</p><p>The medic is a flexible support character with abilities that influence both allies and enemies. Positional awareness benefit him greatly and make it easier to stay alive and to assist the team. He is vulnerable to physical damage and may be at risk when played alone.</p>",stats:{Damage:15,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:5e3},abilities:[{img:"/images/orcs/units/witchdoctor.webp",imgR:"/images/orcs/units/witchdoctorR.webp",name:"Witch Doctor (Morph 2)",description:"Replace the &/orcs/units/Medic& with the &/orcs/units/Witch Doctor&.",gold:200},{img:"/images/orcs/units/medic/abilities/proxyward.webp",imgR:"/images/orcs/units/medic/abilities/proxywardR.webp",name:"Proxy Ward",hotkey:"Q",mana:35,cooldown:"60/40",gold:75,description:"Place a proxy ward with ^3/5^ hit points that activates after ^8/6^ seconds delay. When active, transfer up to ^10/20%^ mana from the healing ward to the proxy ward and use it to heal allies within ^300^ range. This effect lasts for ^90/120^ seconds, or until the ward runs out of mana. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%<p>@When the proxy ward expires or is killed, all remaining mana is returned to the healing ward.@</p>"},{img:"/images/orcs/units/medic/abilities/dispel.webp",imgR:"/images/orcs/units/medic/abilities/dispelR.webp",name:"Dispel",hotkey:"R",mana:50,cooldown:"120/90",gold:75,description:"Dispel most magical effects within ^200^ range that are harmful to allies or beneficial to enemies. This effect triggers ^3^ times over ^2^ seconds and persists on the target for ^1^ second. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/medic/abilities/soullink.webp",imgR:"/images/orcs/units/medic/abilities/soullinkR.webp",name:"Soul Link",hotkey:"E",mana:25,cooldown:"90/60",gold:50,description:"Swap the health percentage of the caster and the target. After ^3/5^ seconds a secondary swap occurs, reversing the effect. The caster must stay within ^1500/2000^ range of the target to maintain the effect. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/medic/abilities/witchcraft.webp",imgR:"/images/orcs/units/medic/abilities/witchcraftR.webp",name:"Witchcraft",passive:!0,gold:"15/30/45/60",description:"<p>^Level 1^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second.</p><p>^Level 3^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>^Level 4^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second.</p>"},{img:"/images/orcs/units/medic/abilities/decay.webp",imgR:"/images/orcs/units/medic/abilities/decayR.webp",name:"Decay",passive:!0,gold:"50/75",description:"<p>^Level 1^: Attacks prevent hostile units and structures from being healed over ^4^ seconds.</p><p>^Level 2^: Attacks prevent hostile units and structures from being healed over ^8^ seconds. %%(Requires &/orcs/buildings/Morph& *2*)%%</p>"}]},{img:"/images/orcs/units/inventor/inventor.webp",imgR:"/images/orcs/units/inventor/inventorR.webp",name:"Inventor",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>^Replace the &/orcs/units/Grunt& with &/orcs/units/Inventor&.^</p><p>A support character that relies on zone control and strategic placement. The inventor has access to many tools that contribute to map control, but his creations are deniable and require maintenance. He is most effective when left undisturbed, but struggles with foes that actively seek out and destroy his inventions. He is vulnerable to magic damage.</p>",stats:{Damage:15,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:5e3},abilities:[{img:"/images/orcs/units/engineer.webp",imgR:"/images/orcs/units/engineerR.webp",name:"Engineer (Morph 2)",description:"Replace the &/orcs/units/Inventor& with the &/orcs/units/Engineer&.",gold:200},{img:"/images/orcs/units/inventor/abilities/warpgate.webp",imgR:"/images/orcs/units/inventor/abilities/warpgateR.webp",name:"Warp Gate",hotkey:"Q",mana:35,cooldown:"45/30",gold:75,description:"Create a portal with ^3/5^ health at your current location that activates after a ^5^ second delay. When active, it will link up to any other active portal that you own. The portal lasts for ^90/120^ seconds, or until it is killed.<p>Allied players can use the portal to teleport between the two portal locations, or to return back to the *Healing Ward* if no other portal is found. A unit cannot teleport more than once every ^5^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p>"},{img:"/images/orcs/units/inventor/abilities/vortex.png",imgR:"/images/orcs/units/inventor/abilities/vortex.png",name:"Vortex",hotkey:"R",mana:50,cooldown:"120/90",gold:75,description:"Channel for ^4^ seconds to summon a vortex at the selected location. Enemies that enter the vortex have their move speed reduced by ^80%^ and if they remain in the area for ^3/2^ seconds, they disappear and are trapped in another dimension for up to ^15/20^ seconds.<p>When the vortex expires, all trapped units will reappear and enemies within ^200^ range are stunned for ^3^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p>"},{img:"/images/orcs/units/inventor/abilities/visionward.webp",imgR:"/images/orcs/units/inventor/abilities/visionwardR.webp",name:"Vision Ward",hotkey:"E",mana:25,cooldown:"90/60",gold:50,description:"Place a vision ward with ^2/4^ health at the selected location. The ward vision expands from ^600^ to ^1000/1400^ range over ^120/60^ seconds. Lasts up to ^180^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/inventor/abilities/energyshield.webp",imgR:"/images/orcs/units/inventor/abilities/energyshieldR.webp",name:"Energy Shield",passive:!0,gold:75,description:"Increase armor by ^1^ for every ^25^ points of current mana. Up to a maximum of ^6^ bonus armor. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%"},{img:"/images/orcs/units/inventor/abilities/energy.webp",imgR:"/images/orcs/units/inventor/abilities/energyR.webp",name:"Energy",passive:!0,gold:"15/30/45/60",description:"<p>^Level 1^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second.</p><p>^Level 3^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>^Level 4^: Increase max mana by ^+25^ and mana regeneration by ^+0.125^/second.</p>"},{img:"/images/orcs/units/inventor/abilities/battery.png",imgR:"/images/orcs/units/inventor/abilities/battery.png",name:"Battery",passive:!0,gold:"50/75",description:"<p>^Level 1^: Whenever an enemy within ^600^ radius uses a spell, ^10%^ of the mana cost is stored and added to your current mana pool. After collecting a total of ^50^ mana, the stored energy is consumed to create an energy field around the user. When active, allies within ^500^ range regenerate ^2^ mana per second. This effect lasts for ^15^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p><p>^Level 2^: Whenever an enemy within ^600^ radius uses a spell, ^20%^ of the mana cost is stored and added to your current mana pool. After collecting a total of ^50^ mana, the stored energy is consumed to create an energy field around the user. When active, allies within ^500^ range regenerate ^3^ mana per second. This effect lasts for ^15^ seconds.</p>"}]},{img:"/images/orcs/units/berserker/berserker.webp",imgR:"/images/orcs/units/berserker/berserkerR.webp",name:"Berserker",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>^Replace the &/orcs/units/Grunt& with &/orcs/units/Berserker&.^</p><p>The berserker is an offensive pusher with moderate survivability. He is vulnerable to magic damage and may struggle with tower bases.</p>",stats:{Damage:16,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:6e3},abilities:[{img:"/images/orcs/units/warlord.webp",imgR:"/images/orcs/units/warlordR.webp",name:"Warlord (Morph 2)",description:"Replace the &/orcs/units/Berserker& with the &/orcs/units/Warlord&.",gold:200},{img:"/images/orcs/units/berserker/abilities/guard.webp",imgR:"/images/orcs/units/berserker/abilities/guardR.webp",name:"Guard",hotkey:"Q",mana:50,cooldown:"90/60",gold:75,description:"Activate to record all incoming damage and heal the caster for ^125/150%^ of the damage taken after ^8/6^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p>"},{img:"/images/orcs/units/berserker/abilities/conquer.webp",imgR:"/images/orcs/units/berserker/abilities/conquerR.webp",name:"Conquer",hotkey:"R",mana:25,cooldown:"40/30",gold:50,description:"Place a banner with ^3/5^ health at your current location that disables the selected tower from performing any actions for the next ^40/60^ seconds. The effect is interrupted if the banner is destroyed. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p>"},{img:"/images/orcs/units/berserker/abilities/menace.webp",imgR:"/images/orcs/units/berserker/abilities/menaceR.webp",name:"Menace",hotkey:"E",mana:35,cooldown:"120/90",gold:75,description:"Mark the selected worker for ^40/60^ seconds. Allies within ^300^ range of the target have their attack rate increased by ^30/45%^ over ^30/40^ seconds. %%(Requires &/orcs/buildings/altar#Conjurer& *1*)%%</p>"},{img:"/images/orcs/units/berserker/abilities/cleave.webp",imgR:"/images/orcs/units/berserker/abilities/cleaveR.webp",name:"Cleave",passive:!0,gold:"75/",cooldown:8,description:"Upgraded blockers kills increase attack speed by ^20%^ and cause your attacks to deal ^50%^ damage to structures within ^60^ range for the next ^5^ seconds."},{img:"/images/orcs/units/berserker/abilities/ruin.webp",imgR:"/images/orcs/units/berserker/abilities/ruinR.webp",name:"Ruin",passive:!0,gold:"30/45/60/75/90",description:"<p>^Level 1^: Increase damage to structures by ^10%^.</p><p>^Level 2^: Increase damage to structures by ^15%^.</p><p>^Level 3^: Increase damage to structures by ^20%^.</p><p>^Level 4^: Increase damage to structures by ^25%^. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>^Level 5^: Increase damage to structures by ^30%^.</p>"},{img:"/images/orcs/units/berserker/abilities/lifesteal.webp",imgR:"/images/orcs/units/berserker/abilities/lifestealR.webp",name:"Lifesteal",passive:!0,gold:"25/35/45/55/65/75",description:"<p>^Level 1^: Normal attacks heal you for ^50%^ of the damage dealt.</p><p>^Level 2^: Normal attacks heal you for ^100%^ of the damage dealt.</p><p>^Level 3^: Normal attacks heal you for ^150%^ of the damage dealt.</p><p>^Level 4^: Normal attacks heal you for ^200%^ of the damage dealt.</p><p>^Level 5^: Normal attacks heal you for ^250%^ of the damage dealt. %%(Requires &/orcs/buildings/Morph& *2*)%%</p><p>^Level 6^: Normal attacks heal you for ^300%^ of the damage dealt.</p>"}]},{img:"/images/orcs/units/hunter.webp",imgR:"/images/orcs/units/hunterR.webp",name:"Hunter",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>A level 2 Morph unit, replaces the &/orcs/units/Tracker&.</p>",stats:{Damage:20,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:7e3}},{img:"/images/orcs/units/farseer.webp",imgR:"/images/orcs/units/farseerR.webp",name:"Far Seer",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>A level 2 Morph unit, replaces the &/orcs/units/Shaman&.</p>",stats:{Damage:20,"Attack speed":1.8,"Attack range":160,"Move speed":270,Health:7e3}},{img:"/images/orcs/units/taurenchieftain.webp",imgR:"/images/orcs/units/taurenchieftainR.webp",name:"Tauren Chieftain",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>A level 2 Morph unit, replaces the &/orcs/units/Tauren&.</p>",stats:{Damage:20,"Attack speed":1.5,"Attack range":92,"Move speed":240,Health:11e3}},{img:"/images/orcs/units/witchdoctor.webp",imgR:"/images/orcs/units/witchdoctorR.webp",name:"Witch Doctor",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>A level 2 Morph unit, replaces the &/orcs/units/Medic&.</p>",stats:{Damage:20,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:9e3}},{img:"/images/orcs/units/engineer.webp",imgR:"/images/orcs/units/engineerR.webp",name:"Engineer",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>A level 2 Morph unit, replaces the &/orcs/units/Inventor&.</p>",stats:{Damage:20,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:9e3}},{img:"/images/orcs/units/warlord.webp",imgR:"/images/orcs/units/warlordR.webp",name:"Warlord",team:"orcs",type:"units",externalUpgrades:[{name:"Altar",url:"/orcs/buildings/altar"}],description:"<p>A level 2 Morph unit, replaces the &/orcs/units/Berserker&.</p>",stats:{Damage:20,"Attack speed":1.5,"Attack range":92,"Move speed":270,Health:11e3}}],buildings:[{img:"/images/orcs/buildings/altar.webp",imgR:"/images/orcs/buildings/altarR.webp",name:"Altar",team:"orcs",type:"buildings",description:"*The Altar* is used to research upgrades for your unit. Located in the top-left corner of the map.",upgradesSeparated:[{name:"Rage",hotkey:"Q",description:"Increase the movement speed and attack rate of your unit.",upgrades:[{lvl:1,img:"/images/orcs/upgrades/altar/rage.png",gold:20,changes:[{name:"Unit",stats:[{name:"Move speed",new:"+10"},{name:"Attack speed",new:"+4%"}]}]},{lvl:2,img:"/images/orcs/upgrades/altar/rage.png",gold:40,changes:[{name:"Unit",stats:[{name:"Move speed",new:"+15"},{name:"Attack speed",new:"+8%"}]}]},{lvl:3,img:"/images/orcs/upgrades/altar/rage.png",gold:60,changes:[{name:"Unit",stats:[{name:"Move speed",new:"+15"},{name:"Attack speed",new:"+8%"}]}]}]},{name:"Weapon",hotkey:"W",description:"Upgrade the damage of your unit.",hasRequires:!0,upgrades:[{lvl:1,img:"/images/orcs/upgrades/altar/weapon/weapon1.png",gold:35,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:2,img:"/images/orcs/upgrades/altar/weapon/weapon2.png",gold:50,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:3,img:"/images/orcs/upgrades/altar/weapon/weapon3.png",gold:65,requires:"&/orcs/buildings/morph/#Morph&",changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:4,img:"/images/orcs/upgrades/altar/weapon/weapon4.png",gold:80,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:5,img:"/images/orcs/upgrades/altar/weapon/weapon5.png",gold:95,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:6,img:"/images/orcs/upgrades/altar/weapon/weapon6.png",gold:110,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:7,img:"/images/orcs/upgrades/altar/weapon/weapon7.webp",imgR:"/images/orcs/upgrades/altar/weapon/weapon7R.webp",gold:125,requires:"&/orcs/buildings/morph/#Morph& *2*",changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:8,img:"/images/orcs/upgrades/altar/weapon/weapon8.webp",imgR:"/images/orcs/upgrades/altar/weapon/weapon8R.webp",gold:140,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:9,img:"/images/orcs/upgrades/altar/weapon/weapon9.webp",imgR:"/images/orcs/upgrades/altar/weapon/weapon9R.webp",gold:155,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]},{lvl:10,img:"/images/orcs/upgrades/altar/weapon/weapon10.webp",imgR:"/images/orcs/upgrades/altar/weapon/weapon10R.webp",gold:170,changes:[{name:"Grunt/Berserker/Tauren",stats:[{name:"Damage",new:"+3"}]},{name:"Inventor/Medic",stats:[{name:"Damage",new:"+4"}]},{name:"Shaman/Tracker",stats:[{name:"Damage",new:"+5"}]}]}]},{name:"Armor",hotkey:"E",description:"Increase the health and armor of your unit, making you tanky and harder to kill when invading bases.",hasRequires:!0,upgrades:[{lvl:1,img:"/images/orcs/upgrades/altar/armor/armor1.webp",imgR:"/images/orcs/upgrades/altar/armor/armor1R.webp",gold:30,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+550"},{name:"Armor",old:0,new:1,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+650"},{name:"Armor",old:0,new:2,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+750"},{name:"Armor",old:0,new:"2/3",parenthesesVal:"+2/+3"}]}]},{lvl:2,img:"/images/orcs/upgrades/altar/armor/armor2.webp",imgR:"/images/orcs/upgrades/altar/armor/armor2R.webp",gold:45,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+825"},{name:"Armor",old:1,new:2,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+975"},{name:"Armor",old:2,new:4,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+1125"},{name:"Armor",old:"2/3",new:"4/6",parenthesesVal:"+2/+3"}]}]},{lvl:3,img:"/images/orcs/upgrades/altar/armor/armor3.webp",imgR:"/images/orcs/upgrades/altar/armor/armor3R.webp",gold:60,requires:"&/orcs/buildings/morph/#Morph&",changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+1100"},{name:"Armor",old:2,new:3,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+1300"},{name:"Armor",old:4,new:6,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+1500"},{name:"Armor",old:"4/6",new:"6/9",parenthesesVal:"+2/+3"}]}]},{lvl:4,img:"/images/orcs/upgrades/altar/armor/armor4.webp",imgR:"/images/orcs/upgrades/altar/armor/armor4R.webp",gold:75,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+1375"},{name:"Armor",old:3,new:4,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+1625"},{name:"Armor",old:6,new:8,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+1875"},{name:"Armor",old:"6/9",new:"8/11",parenthesesVal:"+2/+3"}]}]},{lvl:5,img:"/images/orcs/upgrades/altar/armor/armor5.webp",imgR:"/images/orcs/upgrades/altar/armor/armor5R.webp",gold:90,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+1650"},{name:"Armor",old:4,new:5,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+1950"},{name:"Armor",old:8,new:10,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+2250"},{name:"Armor",old:"8/11",new:"10/14",parenthesesVal:"+2/+3"}]}]},{lvl:6,img:"/images/orcs/upgrades/altar/armor/armor6.webp",imgR:"/images/orcs/upgrades/altar/armor/armor6R.webp",gold:105,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+1925"},{name:"Armor",old:5,new:6,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+2275"},{name:"Armor",old:10,new:12,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+2625"},{name:"Armor",old:"10/14",new:"12/17",parenthesesVal:"+2/+3"}]}]},{lvl:7,img:"/images/orcs/upgrades/altar/armor/armor7.webp",imgR:"/images/orcs/upgrades/altar/armor/armor7R.webp",gold:120,requires:"&/orcs/buildings/morph/#Morph& *2*",changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+2200"},{name:"Armor",old:6,new:7,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+2600"},{name:"Armor",old:12,new:14,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+3000"},{name:"Armor",old:"12/17",new:"14/20",parenthesesVal:"+2/+3"}]}]},{lvl:8,img:"/images/orcs/upgrades/altar/armor/armor8.webp",imgR:"/images/orcs/upgrades/altar/armor/armor8R.webp",gold:135,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+2475"},{name:"Armor",old:7,new:8,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+2925"},{name:"Armor",old:14,new:16,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+3375"},{name:"Armor",old:"14/20",new:"16/23",parenthesesVal:"+2/+3"}]}]},{lvl:9,img:"/images/orcs/upgrades/altar/armor/armor9.webp",imgR:"/images/orcs/upgrades/altar/armor/armor9R.webp",gold:150,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+2750"},{name:"Armor",old:8,new:9,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+3250"},{name:"Armor",old:16,new:18,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+3750"},{name:"Armor",old:"16/23",new:"18/26",parenthesesVal:"+2/+3"}]}]},{lvl:10,img:"/images/orcs/upgrades/altar/armor/armor10.webp",imgR:"/images/orcs/upgrades/altar/armor/armor10R.webp",gold:165,changes:[{name:"Grunt/Shaman/Tracker",stats:[{name:"Health",new:"+3025"},{name:"Armor",old:9,new:10,parenthesesVal:"+1"}]},{name:"Inventor/Medic",stats:[{name:"Health",new:"+3575"},{name:"Armor",old:18,new:20,parenthesesVal:"+2"}]},{name:"Berserker/Tauren",stats:[{name:"Health",new:"+4125"},{name:"Armor",old:"18/26",new:"20/29",parenthesesVal:"+2/+3"}]}]}]},{name:"Conjurer",hotkey:"R",description:"Unlock skill points that can be spent on abilities. You can learn new abilities if you have available skill points by pressing (%%F2%%) or typing %%-sb%% in the chat.",upgrades:[{lvl:1,img:"/images/orcs/upgrades/altar/conjurer.png",gold:25,changes:[{name:"Unit",stats:[{name:"Skill points",old:0,new:2,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.4"},{name:"Max mana",old:0,new:100,parenthesesVal:"+100"}]}]},{lvl:2,img:"/images/orcs/upgrades/altar/conjurer.png",gold:50,changes:[{name:"Unit",stats:[{name:"Skill points",old:2,new:4,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1"}]}]},{lvl:3,img:"/images/orcs/upgrades/altar/conjurer.png",gold:75,changes:[{name:"Unit",stats:[{name:"Skill points",old:4,new:6,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1"}]}]},{lvl:4,img:"/images/orcs/upgrades/altar/conjurer.png",gold:100,changes:[{name:"Unit",stats:[{name:"Skill points",old:6,new:8,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1"}]}]},{lvl:5,img:"/images/orcs/upgrades/altar/conjurer.png",gold:150,changes:[{name:"Unit",stats:[{name:"Skill points",old:8,new:10,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1"}]}]}]},{name:"Recover",hotkey:"A",description:"Increase health regeneration for your unit.",upgrades:[{lvl:1,img:"/images/orcs/upgrades/altar/recover.webp",imgR:"/images/orcs/upgrades/altar/recoverR.webp",gold:20,changes:[{name:"Unit",stats:[{name:"Health regeneration",new:"1%/second"},{name:"Max health regenerated",new:"15%"},{name:"Time to regenerate",new:"90 seconds",description:"<p>@This effect is disabled for ^5^ seconds if the user takes damage.@</p>"}]}]},{lvl:2,img:"/images/orcs/upgrades/altar/recover.webp",imgR:"/images/orcs/upgrades/altar/recoverR.webp",gold:40,changes:[{name:"Unit",stats:[{name:"Health regeneration",new:"2%/second"},{name:"Max health regenerated",new:"30%"},{name:"Time to regenerate",new:"80 seconds",description:"<p>@This effect is disabled for ^5^ seconds if the user takes damage.@</p>"}]}]},{lvl:3,img:"/images/orcs/upgrades/altar/recover.webp",imgR:"/images/orcs/upgrades/altar/recoverR.webp",gold:60,changes:[{name:"Unit",stats:[{name:"Health regeneration",new:"3%/second"},{name:"Max health regenerated",new:"45%"},{name:"Time to regenerate",new:"70 seconds",description:"<p>@This effect is disabled for ^5^ seconds if the user takes damage.@</p>"}]}]},{lvl:4,img:"/images/orcs/upgrades/altar/recover.webp",imgR:"/images/orcs/upgrades/altar/recoverR.webp",gold:80,changes:[{name:"Unit",stats:[{name:"Health regeneration",new:"4%/second"},{name:"Max health regenerated",new:"60%"},{name:"Time to regenerate",new:"60 seconds",description:"<p>@This effect is disabled for ^5^ seconds if the user takes damage.@</p>"}]}]}]}]},{img:"/images/orcs/buildings/morph.webp",imgR:"/images/orcs/buildings/morphR.webp",name:"Morph",team:"orcs",type:"buildings",description:"This building is used to morph your unit into a stronger unit with more abilities. Located in the top-left corner of the map."}],banner:"/images/orcs/banner.png",header:"/images/header-decoration.png"},elves:{name:"elves",nameCapitalized:"Elves",units:[{img:"/images/elves/units/elvenWorker/elvenWorker.webp",imgR:"/images/elves/units/elvenWorker/elvenWorkerR.webp",name:"Elven Worker",team:"elves",type:"units",description:"lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, voluptatum.",feed:"Hit: 30 / Kill: 20",externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],upgradesFromBuilding:[{name:"Tree of Life",url:"/elves/buildings/treeOfLife",upgrades:J}],stats:{"Attack Damage":80,"Move speed":250,Health:20,"Attack Range":300,"Attack Speed":2.5},abilities:[{img:"/images/elves/spellbook/regrowth.webp",imgR:"/images/elves/spellbook/regrowthR.webp",name:"Regrowth",hotkey:"Q",mana:"40/40/40",cooldown:"20/15/10",description:"<p>^Level 1^: Restore up to ^150^ life over ^20^ seconds to an allied structure. The healing cannot exceed ^100%^ of the targets max health. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Restore up to ^225^ life over ^20^ seconds to an allied structure. The building also gains ^5^ armor over ^15^ seconds. The healing cannot exceed ^150%^ of the targets max health. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *2*)%%</p><p>^Level 3^: Restore up to ^300^ life over ^20^ seconds to an allied structure. The building also gains ^5^ armor over ^10^ seconds. The healing cannot exceed ^200%^ of the targets max health. If the target is killed by a hostile unit while the armor bonus is maxed, then the area will be covered in vines for ^3^ seconds. Enemies that step on the vines are snared until they expire. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *4*)%%</p>"},{img:"/images/elves/spellbook/watchingOwl.webp",imgR:"/images/elves/spellbook/watchingOwlR.webp",name:"Watching Owl",hotkey:"W",mana:"40/35/30",cooldown:"60/45/30",description:"<p>^Level 1^: Place a watching owl at the selected point that gives vision over ^500^ range for ^60^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Place a watching owl at the selected point that gives vision over ^700^ range for ^90^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p><p>^Level 3^: Place a watching owl at the selected point that gives vision over ^900^ range for ^120^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *5*)%%</p>"},{img:"/images/elves/spellbook/reverse.webp",imgR:"/images/elves/spellbook/reverseR.webp",name:"Reverse",hotkey:"E",mana:"20/20/20",cooldown:"60/50/40",description:"<p>^Level 1^: Activate to memorize your current position for ^5^ seconds. While active, you can reactivate this ability for ^10^ mana to return to this location. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Activate to memorize your movement patterns for the next ^10^ seconds. You can reactivate this ability for ^7^ mana to teleport back ^3^ seconds in time. You can teleport up to ^4^ times. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *2*)%%</p><p>^Level 3^: Activate to memorize your movement patterns for the next ^15^ seconds. You can reactivate this ability for ^5^ mana to teleport back ^3^ seconds in time. You can teleport up to ^8^ times. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p>"},{img:"/images/elves/spellbook/restore.webp",imgR:"/images/elves/spellbook/restoreR.webp",name:"Restore",hotkey:"R",range:"200/300/400",cooldown:"10/8/6",description:"<p>^Level 1^: Heal a friendly unit for ^1^ life per point of mana until the target is fully healed or you run out of mana. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Heal a friendly unit for ^1.5^ life per point of mana until the target is fully healed or you run out of mana. The cooldown is reduced to ^4^ seconds when used on a non-worker target. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *2*)%%</p><p>^Level 3^: Heal a friendly unit for ^21.5^ life per point of mana until the target is fully healed or you run out of mana. The cooldown is reduced to ^2^ seconds when used on a non-worker target. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p>"},{img:"/images/elves/spellbook/freeze.webp",imgR:"/images/elves/spellbook/freezeR.webp",name:"Freeze",hotkey:"A",mana:"20/20/20",cooldown:"60/45/30",description:"<p>^Level 1^: Silence the target and reduce move speed by ^90%^ for ^1^ second. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Deal ^100^ damage and silence the target for ^1^ second. Movement speed is reduced by ^90%^, which fades away over ^2^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *2*)%%</p><p>^Level 3^: Deal ^200^ damage and silence the target for ^1^ second. Movement speed is reduced by ^90%^, which fades away over ^3^ seconds. If the target has less than ^30%^ health, your remaining mana is consumed to deal ^10^ damage per point of mana over over ^3^ seconds. This effect stacks. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *5*)%%</p>"},{img:"/images/elves/spellbook/recycle.webp",imgR:"/images/elves/spellbook/recycleR.webp",name:"Recycle",hotkey:"S",mana:"25/15/10",description:"<p>^Level 1^: Select a player owned unit or structure to sell. The target takes damage over time until it's killed and up to ^50%^ of the total building cost is returned over ^5^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Select a player owned unit or structure to sell. The target takes damage over time until it's killed and up to ^75%^ of the total building cost is returned over ^4^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p><p>^Level 13^: Select a player owned unit or structure to sell. The target takes damage over time until it's killed and up to ^100%^ of the total building cost is returned over ^3^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *5*)%%</p>"},{img:"/images/elves/spellbook/divineShield.png",imgR:"/images/elves/spellbook/divineShieldR.png",name:"Divine Shield",hotkey:"D",mana:"50/50/50",cooldown:"120/90/60",description:"<p>^Level 1^: Activate to make the user invulnerable for ^2^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Activate to make the user invulnerable for ^2.5^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p><p>^Level 3^: Activate to make the user invulnerable for ^3^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *4*)%%</p>"},{img:"/images/elves/spellbook/possess.webp",imgR:"/images/elves/spellbook/possessR.webp",name:"Possess",hotkey:"F",mana:"40/40/40",cooldown:"75/60/45",description:"<p>^Level 1^: Possess a friendly unit and gradually increase it's move speed by ^12%^ and restore ^10^ mana to the caster and target over ^6^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Possess a friendly unit and gradually increase it's move speed by ^21%^ and restore ^15^ mana to the caster and target over ^8^ seconds. You can also possess a hostile unit to gradually reduce it's move speed by ^15%^ and remove ^15^ mana from the target over ^8^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p><p>^Level 3^: Possess a friendly unit and gradually increase it's move speed by ^30%^ and restore ^20^ mana to the caster and target over ^10^ seconds. You can also possess a hostile unit to gradually reduce it's move speed by ^30%^ and remove ^20^ mana from the target over ^10^ seconds. If the effect remains for the full duration the target is silenced and unable to hit for ^5^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *5*)%%</p>"},{img:"/images/elves/spellbook/refill.webp",imgR:"/images/elves/spellbook/refillR.webp",name:"Refill",hotkey:"Z",mana:"10/8/3 per 1% gold",cooldown:"25/10/4 per 1% gold",description:"<p>^Level 1^: Select a neutral &/elves/buildings/Gold Mine& and restore up to ^5%^ of the targets original gold value. You cannot restore more than ^20%^ gold per mine. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *2*)%%</p><p>^Level 2^: Select a neutral &/elves/buildings/Gold Mine& and restore up to ^10%^ of the targets original gold value. You cannot restore more than ^20%^ gold per mine. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p><p>^Level 3^: Select a neutral &/elves/buildings/Gold Mine& and restore up to ^20%^ of the targets original gold value. You cannot restore more than ^20%^ gold per mine. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *5*)%%</p>"},{img:"/images/elves/spellbook/fade.webp",imgR:"/images/elves/spellbook/fadeR.webp",name:"Fade",hotkey:"V",mana:"50/50/50",cooldown:"90/75/60",description:"<p>^Level 1^: Activate to disable unit collision and reduce movement speed by ^40%^ for ^3^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *1*)%%</p><p>^Level 2^: Activate to disable unit collision and reduce movement speed by ^35%^ for ^5^ seconds. After ^2^ seconds delay, the user becomes invisible. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *3*)%%</p><p>^Level 3^: Activate to ^instantly^ become invisible, disable unit collision and reduce movement speed by ^30%^ for ^7^ seconds. %%(Requires &/elves/buildings/treeOfTechnology#Magic& *4*)%%</p>"}]},{img:"/images/elves/units/owlScout/owlScout.webp",imgR:"/images/elves/units/owlScout/owlScoutR.webp",name:"Owl Scout",team:"elves",type:"units",hotkey:"Q",gold:40,supply:2,feed:"16-32",description:"<p>A flying scout with a large field of vision that can see over cliffs. The &/elves/units/Owl Scout& can be used to spy on the enemy or to help you find safe passages through unexplored terrain.</p>",stats:{"Vision Range":600,"Move speed":325,Health:40},transformsTo:["Hippogryph"],abilities:[{img:"/images/elves/units/owlScout/abilities/scout.webp",imgR:"/images/elves/units/owlScout/abilities/scoutR.webp",name:"Scout",hotkey:"C",description:"Increases the vision range by ^400^ for ^10^ seconds.",cooldown:75},{img:"/images/elves/units/hippogryph/hippogryph.webp",imgR:"/images/elves/units/hippogryph/hippogryphR.webp",name:"Transform to &/elves/units/Hippogryph&",hotkey:"M",description:"Transforms the &/elves/units/Owl Scout& into a &/elves/units/Hippogryph&.",cooldown:40},{img:"/images/elves/units/owlScout/abilities/nightVision.webp",imgR:"/images/elves/units/owlScout/abilities/nightVisionR.webp",name:"Night Vision",passive:!0,description:"Reveal invisible units within ^600^ range."}],upgradesFromBuilding:[{name:"Tree of War",url:"/elves/buildings/treeOfWar",upgrades:K["Owl Scout"]}]},{img:"/images/elves/units/archer/archer.webp",imgR:"/images/elves/units/archer/archerR.webp",name:"Archer",team:"elves",type:"units",hotkey:"W",gold:20,supply:2,feed:"8-16",externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],upgradesFromBuilding:[{name:"Tree of War",url:"/elves/buildings/treeOfWar",upgrades:K.Archer}],description:"<p>^Requires &/buildings/treeOfTechnology#Architecture& *1* upgrade to train.^</p><p>A ranged attacker with low health and damage. Archers are best used as a support unit to increase the damage output of a base. Put your archers behind upgraded blockers and enable hold position to prevent them from chasing the enemy.</p>",transformsTo:["Hippogryph Rider"],stats:{"Attack Damage":8,"Attack Speed":1,"Attack Range":600,"Move speed":250,Health:20},abilities:[{img:"/images/elves/units/hippogryphRider/hippogryphRider.webp",imgR:"/images/elves/units/hippogryphRider/hippogryphRiderR.webp",name:"Mount &/elves/units/Hippogryph&",hotkey:"Q",description:"The &/elves/units/Archer& mounts the &/elves/units/Hippogryph& - forming a &/elves/units/Hippogryph Rider&."}]},{img:"/images/elves/units/ent/ent.webp",imgR:"/images/elves/units/ent/entR.webp",name:"Ent",team:"elves",type:"units",hotkey:"E",gold:30,supply:3,feed:"12-24",externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],upgradesFromBuilding:[{name:"Tree of War",url:"/elves/buildings/treeOfWar",upgrades:K.Ent}],description:"<p>^Requires &#Sprout& upgrade to train.^</p><p>The Ent is a slow and durable melee attacker that can be used to setup kills, but it is not strong enough to fight the enemy head-on. It is most effective when paired with a reliable damage source, but can be dangerous in large numbers.</p>",transformsTo:["Ancient"],stats:{"Attack Damage":18,"Attack Speed":2,"Attack Range":128,"Move speed":190,Health:50},abilities:[{img:"/images/elves/units/ancient/ancient.webp",imgR:"/images/elves/units/ancient/ancientR.webp",name:"Transform to &/elves/units/Ancient&",hotkey:"Q",description:"Transform the &/elves/units/Ent& into an &/elves/units/Ancient&. The &/elves/units/Ancient& is larger, slower and cannot &#Burrow&.",cooldown:20},{img:"/images/elves/units/ent/abilities/burrow.png",imgR:"/images/elves/units/ent/abilities/burrow.png",name:"Burrow",hotkey:"W",description:"The &/elves/units/Ent& burrow and becomes invisible.",cooldown:8},{img:"/images/elves/units/ent/abilities/wrath.png",imgR:"/images/elves/units/ent/abilities/wrath.png",name:"Wrath",hotkey:"E",description:"Sacrifice the caster to release a projectile that travels in a straight line towards the selected direction. If the projectile collides with a hostile ground unit it will explode, dealing ^50^ to ^200^ damage to the target over ^6^ seconds. The projectile deals more damage the further it travels.<p>@The projectile is destroyed without any effect if it collides with a cliff or neutral object.@</p>"}]},{img:"/images/elves/units/druid/druid.webp",imgR:"/images/elves/units/druid/druidR.webp",name:"Druid",team:"elves",type:"units",hotkey:"R",gold:60,supply:3,feed:"24-48",externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],upgradesFromBuilding:[{name:"Tree of War",url:"/elves/buildings/treeOfWar",upgrades:K.Druid}],description:"^Requires &#Druid Training 1& upgrade.<p>You can only build one of this unit.</p>^<p>A spell-caster with powerful offensive and supportive abilities. The druid can be used to setup kills, to weaken the enemy or to shut-down power plays.</p>",stats:{"Attack Damage":42,"Attack Speed":2,"Attack Range":600,"Move speed":140,Health:40,Mana:50},abilities:[{img:"/images/elves/units/druid/abilities/faerieFire.webp",imgR:"/images/elves/units/druid/abilities/faerieFireR.webp",name:"Faerie Fire",hotkey:"F",mana:50,description:"Remove all armor from the target and reveal it for ^5^ seconds. The effect duration is increased for each point of armor removed and can last up to ^15^ seconds in total.",cooldown:15},{img:"/images/elves/units/druid/abilities/blizzard.png",imgR:"/images/elves/units/druid/abilities/blizzard.png",name:"Blizzard",hotkey:"E",mana:35,description:"Call down shards of ice that deal up to ^400^ damage and reduce move speed by up to ^60%^ over ^8^ seconds. The damage and slow ramp up over time.<br><br><p>@The damage stack if layered, but not the slow.@</p>",cooldown:4},{img:"/images/elves/units/druid/abilities/cleanse.webp",imgR:"/images/elves/units/druid/abilities/cleanseR.webp",name:"Cleanse",hotkey:"D",mana:75,description:"Dispel most magical effects within ^200^ range that are harmful to allies or beneficial to enemies. This effect remains on the target for ^1^ second.",cooldown:120},{img:"/images/elves/units/druid/abilities/drainMana.webp",imgR:"/images/elves/units/druid/abilities/drainManaR.webp",name:"Drain Mana",hotkey:"W",mana:6,description:"Drain up to ^20^ mana over ^8^ seconds from the target and give it to the caster. The user must be within ^700^ range of the target to maintain the effect.",cooldown:12},{img:"/images/elves/units/druid/abilities/healingRain.webp",imgR:"/images/elves/units/druid/abilities/healingRainR.webp",name:"Healing Rain",hotkey:"T",mana:100,description:"Create a healing rain that restores ^100%^ life to allied units and structures within ^400^ range over ^20^ seconds.",cooldown:180},{img:"/images/elves/units/druid/abilities/slumber.webp",imgR:"/images/elves/units/druid/abilities/slumberR.webp",name:"Slumber",hotkey:"R",mana:75,description:"Sleep the target for ^4^ seconds. Sleeping units wake up if they take damage.",cooldown:10}]},{img:"/images/elves/units/hippogryph/hippogryph.webp",imgR:"/images/elves/units/hippogryph/hippogryphR.webp",name:"Hippogryph",team:"elves",type:"units",description:"<p>@This unit is not trainable!@</p><p>$Morphs from &/elves/units/Owl Scout&.$</p>The hippogryph is a ferocious flying predator that weakens the target by reducing its move speed. They are most effective when used in large packs to chase down injured foes or to kill isolated enemies.",feed:"16-32",externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],stats:{"Attack Damage":4,"Attack Speed":1,"Attack Range":750,"Move speed":300,Health:50},transformsTo:["Owl Scout","Hippogryph Rider"],abilities:[{img:"/images/elves/units/hippogryph/abilities/deepWounds.webp",imgR:"/images/elves/units/hippogryph/abilities/deepWoundsR.webp",name:"Deep Wounds",description:"Attacks deal ^100%^ extra damage as true damage to orcs and reduce the targets move speed by ^2%^ for ^4^ seconds. The slow is stackable, but are limited to one stack per unit.",passive:!0},{img:"/images/elves/units/owlScout/owlScout.webp",imgR:"/images/elves/units/owlScout/owlScoutR.webp",name:"Transform to &/elves/units/Owl Scout&",hotkey:"M",description:"Transforms the &/elves/units/Hippogryph& into an &/elves/units/Owl Scout&.",cooldown:40},{img:"/images/elves/units/hippogryphRider/hippogryphRider.webp",imgR:"/images/elves/units/hippogryphRider/hippogryphRiderR.webp",name:"Take &/elves/units/Archer&",hotkey:"Q",description:"The hippogryph rider is a flying ranged attacker with high mobility. It can be used to defend large bases, to harass the enemy from a distance and to chase down isolated or injured foes."}]},{img:"/images/elves/units/hippogryphRider/hippogryphRider.webp",imgR:"/images/elves/units/hippogryphRider/hippogryphRiderR.webp",name:"Hippogryph Rider",type:"units",description:"<p>@This unit is not trainable!@</p><p>$Morphs from combining &/elves/units/Hippogryph& and &/elves/units/Archer&.$</p>The hippogryph rider is a flying ranged attacker with high mobility. It can be used to defend large bases, to harass the enemy from a distance and to chase down isolated or injured foes.",feed:"24-48",team:"elves",stats:{"Attack Damage":20,"Attack Speed":1,"Attack Range":750,"Move speed":300,Health:40}},{img:"/images/elves/units/ancient/ancient.webp",imgR:"/images/elves/units/ancient/ancientR.webp",name:"Ancient",team:"elves",type:"units",feed:"12-24",description:"<p>@This unit is not trainable!@</p><p>$Morphs from &/elves/units/Ent&.$</p><p>The &/elves/units/Ancient& is larger than the &/elves/units/Ent&, making it the perfect unit to trap your enemies. He is also slower and cannot &/elves/units/Ent#Burrow&.</p>",transformsTo:["Ent"],stats:{"Attack Damage":18,"Attack Speed":2,"Attack Range":128,"Move speed":140,Health:50},abilities:[{img:"/images/elves/units/ent/ent.webp",imgR:"/images/elves/units/ent/entR.webp",name:"Transform to &/elves/units/Ent&",hotkey:"Q",description:"Transform the &/elves/units/Ancient& into an &/elves/units/Ent&.",cooldown:20},{img:"/images/elves/units/ent/abilities/wrath.png",imgR:"/images/elves/units/ent/abilities/wrath.png",name:"Wrath",hotkey:"E",description:"Sacrifice the caster to release a projectile that travels in a straight line towards the selected direction. If the projectile collides with a hostile ground unit it will explode, dealing ^50^ to ^200^ damage to the target over ^6^ seconds. The projectile deals more damage the further it travels.<p>@The projectile is destroyed without any effect if it collides with a cliff or neutral object.@</p>"}]}],buildings:[{img:"/images/elves/buildings/goldMine.webp",imgR:"/images/elves/buildings/goldMineR.webp",name:"Gold Mine",team:"elves",type:"buildings",hotkey:"G",feed:"0-3",stats:{Health:40},description:"Entangle a &/elves/buildings/Gold Mine& so that the &/elves/units/Elven Worker& can harvest gold.<p>@This structure feeds gold only when killed after the ^10^ minute mark.@</p>"},{img:"/images/elves/buildings/blocker/blocker.webp",imgR:"/images/elves/buildings/blocker/blockerR.webp",name:"Blocker",team:"elves",type:"buildings",hotkey:"B",gold:8,externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],hasRequires:!0,feed:"3-6",description:"The &/elves/buildings/Blocker& has ^80^ health and can be used to wall off sections of the map to restrict the mobility of the opposing team.<p>You can use the blocker as a ruler to measure the distance between objects. If there is ^1^ blocker space between any obstacle either horizontally, vertically or diagonally the enemy cannot walk in.</p>",stats:{Health:80},upgrades:[{img:"/images/elves/buildings/blocker/blocker.webp",imgR:"/images/elves/buildings/blocker/blockerR.webp",hotkey:"U",gold:6,feed:"6-12",name:"Big Blocker",requires:"&/elves/buildings/treeOfTechnology#Architecture& *1*",description:"Upgrade &/elves/buildings/Blocker& to &/elves/buildings/Blocker#Big Blocker&<ul><li>Health: 80 -> ^154^ (^+74^)</li><li>Feed: 3-6 -> @6-12@</li></ul>"},{img:"/images/elves/buildings/blocker/stoneBlocker.webp",imgR:"/images/elves/buildings/blocker/stoneBlockerR.webp",hotkey:"U",gold:8,feed:"9-18",name:"Stone Blocker",description:"Upgrade &/elves/buildings/Blocker#Big Blocker& to &/elves/buildings/Blocker#Stone Blocker&<ul><li>Health: 154 -> ^264^ (^+110^)</li><li>Feed: 6-12 -> @9-18@</li></ul>"},{img:"/images/elves/buildings/blocker/redStoneBlocker.webp",imgR:"/images/elves/buildings/blocker/redStoneBlockerR.webp",hotkey:"U",gold:13,feed:"14-28",name:"Red Stone Blocker",description:"Upgrade &/elves/buildings/Blocker#Stone Blocker& to &/elves/buildings/Blocker#Red Stone Blocker&<ul><li>Health: 264 -> ^455^ (^+191^)</li><li>Feed: 9-18 -> @14-28@</li></ul>"},{img:"/images/elves/buildings/blocker/crystalBlocker.webp",imgR:"/images/elves/buildings/blocker/crystalBlockerR.webp",hotkey:"U",gold:19,feed:"22-44",name:"Crystal Blocker",description:"Upgrade &/elves/buildings/Blocker#Red Stone Blocker& to &/elves/buildings/Blocker#Crystal Blocker&<ul><li>Health: 455 -> ^756^ (^+301^)</li><li>Feed: 14-28 -> @22-44@</li></ul>"},{img:"/images/elves/buildings/blocker/magicBlocker.webp",imgR:"/images/elves/buildings/blocker/magicBlockerR.webp",hotkey:"U",gold:26,feed:"32-64",name:"Magic Blocker",description:"Upgrade &/elves/buildings/Blocker#Crystal Blocker& to &/elves/buildings/Blocker#Magic Blocker&<ul><li>Health: 756 -> ^1200^ (^+444^)</li><li>Feed: 22-44 -> @32-64@</li></ul>"}]},{img:"/images/elves/buildings/treeOfWar.webp",imgR:"/images/elves/buildings/treeOfWarR.webp",name:"Tree Of War",team:"elves",type:"buildings",hotkey:"R",gold:30,feed:"12-24",stats:{Health:40},description:"A structure that can train and upgrade units. Build this structure behind upgraded blockers or inside a strong base to get more time to produce an army.",upgrades:Q},{img:"/images/elves/buildings/treeOfTechnology.webp",imgR:"/images/elves/buildings/treeOfTechnologyR.webp",name:"Tree Of Technology",team:"elves",type:"buildings",hotkey:"C",description:"A research facility that offer upgrades for units and structures. Build this when the enemies are far away to get enough time to research time-consuming upgrades, or place it inside a strong base.",gold:40,feed:"16-32",stats:{Health:40},upgradesSeparated:[{name:"Speed",hotkey:"Q",description:"This upgrade lets you increase the movement speed of your &/elves/units/Elven Worker&. Useful for scouting, trapping and running away from enemies.",hasRequires:!1,upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/speed/speed1.webp",imgR:"/images/elves/upgrades/treeOfTechnology/speed/speed1R.webp",gold:20,changes:[{name:"Elven Worker",type:"units",team:"elves",team:"elves",stats:[{name:"Move speed",old:250,new:262,parenthesesVal:"+12"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/speed/speed2.webp",imgR:"/images/elves/upgrades/treeOfTechnology/speed/speed2R.webp",gold:50,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Move speed",old:262,new:274,parenthesesVal:"+12"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/speed/speed3.png",gold:80,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Move speed",old:274,new:286,parenthesesVal:"+12"}]}]},{lvl:4,img:"/images/elves/upgrades/treeOfTechnology/speed/speed4.png",gold:110,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Move speed",old:286,new:298,parenthesesVal:"+12"}]}]},{lvl:5,img:"/images/elves/upgrades/treeOfTechnology/speed/speed5.png",gold:140,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Move speed",old:298,new:310,parenthesesVal:"+12"}]}]}]},{name:"Life",hotkey:"W",description:"This upgrade lets you increase the health points of your &/elves/units/Elven Worker&.",upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/life/life1.png",gold:80,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Health",old:20,new:26,parenthesesVal:"+6"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/life/life2.png",gold:100,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Health",old:26,new:32,parenthesesVal:"+6"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/life/life3.png",gold:120,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Health",old:32,new:38,parenthesesVal:"+6"}]}]},{lvl:4,img:"/images/elves/upgrades/treeOfTechnology/life/life4.png",gold:140,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Health",old:38,new:44,parenthesesVal:"+6"}]}]},{lvl:5,img:"/images/elves/upgrades/treeOfTechnology/life/life5.png",gold:160,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Health",old:44,new:50,parenthesesVal:"+6"}]}]}]},{name:"Magic",hotkey:"E",description:"Skill points can be spent in the &/elves/buildings/Spell Book& (%%F2%%) to unlock powerful abilities for your &/elves/units/Elven Worker&.",upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/magic.png",gold:50,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Skill points",old:0,new:2,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.4/second"},{name:"Max mana",old:0,new:100,parenthesesVal:"+100"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/magic.png",gold:125,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Skill points",old:2,new:4,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1/second"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/magic.png",gold:200,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Skill points",old:4,new:6,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1/second"}]}]},{lvl:4,img:"/images/elves/upgrades/treeOfTechnology/magic.png",gold:275,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Skill points",old:6,new:8,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1/second"}]}]},{lvl:5,img:"/images/elves/upgrades/treeOfTechnology/magic.png",gold:350,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Skill points",old:8,new:10,parenthesesVal:"+2"},{name:"Mana regeneration",new:"+0.1/second"}]}]}]},{name:"Nourishment",hotkey:"R",description:"Used to make your buildings stronger.",upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/nourishment.png",gold:50,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *2*",changes:[{name:"Buildings",stats:[{name:"Health regeneration",new:"+0.6/second"},{name:"Construction starting health",new:"+10%"},{name:"Armor",new:"+2",description:"@(disappears ^2^ seconds after construction is finished)@"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/nourishment.png",gold:100,changes:[{name:"Buildings",stats:[{name:"Health regeneration",new:"+0.7/second"},{name:"Construction starting health",new:"+30%"},{name:"Armor",new:"+5",description:"@(disappears ^2^ seconds after construction is finished)@"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/nourishment.png",gold:150,changes:[{name:"Buildings",stats:[{name:"Health regeneration",new:"+0.7/second"},{name:"Construction starting health",new:"+50%"},{name:"Armor",new:"+10",description:"@(disappears ^2^ seconds after construction is finished)@"}]}]}]},{name:"Architecture",hotkey:"A",description:"Lets you build more units and blockers.",upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/architecture/architecture1.webp",imgR:"/images/elves/upgrades/treeOfTechnology/architecture/architecture1R.webp",gold:50,changes:[{name:"Supply Cap",stats:[{name:"Limit",old:3,new:8,parenthesesVal:"+5"}]},{name:"Blocker",type:"buildings",stats:[{name:"Limit",old:4,new:6,parenthesesVal:"+2"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/architecture/architecture2.webp",imgR:"/images/elves/upgrades/treeOfTechnology/architecture/architecture2R.webp",gold:150,changes:[{name:"Supply Cap",stats:[{name:"Limit",old:8,new:12,parenthesesVal:"+4"}]},{name:"Blocker",type:"buildings",stats:[{name:"Limit",old:6,new:8,parenthesesVal:"+2"}]},{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Damage",new:"+55"},{name:"Range",new:"+50"},{name:"Attack speed",new:"+15%"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/architecture/architecture3.webp",imgR:"/images/elves/upgrades/treeOfTechnology/architecture/architecture3R.webp",gold:250,changes:[{name:"Supply Cap",stats:[{name:"Limit",old:12,new:18,parenthesesVal:"+6"}]},{name:"Blocker",type:"buildings",stats:[{name:"Limit",old:8,new:10,parenthesesVal:"+2"}]},{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Damage",new:"+55"},{name:"Range",new:"+50"},{name:"Attack speed",new:"+15%"}]}]},{lvl:4,img:"/images/elves/upgrades/treeOfTechnology/architecture/architecture4.webp",imgR:"/images/elves/upgrades/treeOfTechnology/architecture/architecture4R.webp",gold:350,changes:[{name:"Supply Cap",stats:[{name:"Limit",old:18,new:24,parenthesesVal:"+6"}]},{name:"Blocker",type:"buildings",stats:[{name:"Limit",old:10,new:12,parenthesesVal:"+2"}]},{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Damage",new:"+55"},{name:"Range",new:"+50"},{name:"Attack speed",new:"+15%"}]}]},{lvl:5,img:"/images/elves/upgrades/treeOfTechnology/architecture/architecture5.webp",imgR:"/images/elves/upgrades/treeOfTechnology/architecture/architecture5R.webp",gold:450,changes:[{name:"Supply Cap",stats:[{name:"Limit",old:24,new:28,parenthesesVal:"+4"}]},{name:"Blocker",type:"buildings",stats:[{name:"Limit",old:12,new:15,parenthesesVal:"+3"}]},{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Damage",new:"+55"},{name:"Range",new:"+50"},{name:"Attack speed",new:"+15%"}]}]}]},{name:"Armor",hotkey:"S",description:"Useful early game to prevent 1 hit kills from the enemy.",upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/armor.webp",imgR:"/images/elves/upgrades/treeOfTechnology/armorR.webp",gold:40,changes:[{name:"Elven Worker",type:"units",team:"elves",stats:[{name:"Armor",old:0,new:3,parenthesesVal:"+3"}]}]}]},{name:"Tenacity",hotkey:"D",description:"Used for upgrading your &/elves/units/Ent& and &/elves/units/Druid&.",hasRequires:!0,upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity1.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity1R.webp",gold:55,changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:18,new:25,parenthesesVal:"+7"},{name:"Health",old:50,new:67,parenthesesVal:"+17"},{name:"Wrath Damage",old:"50-200",new:"55-219",parenthesesVal:"+5/+19"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:42,new:51,parenthesesVal:"+9"},{name:"Health",old:40,new:46,parenthesesVal:"+6"},{name:"Blizzard Damage",old:400,new:760,parenthesesVal:"+360"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity2.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity2R.webp",gold:65,changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:25,new:32,parenthesesVal:"+7"},{name:"Health",old:67,new:84,parenthesesVal:"+17"},{name:"Wrath Damage",old:"55-219",new:"74-296",parenthesesVal:"+19/+77"},{name:"Armor",old:0,new:2,parenthesesVal:"+2"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:51,new:60,parenthesesVal:"+9"},{name:"Health",old:46,new:52,parenthesesVal:"+6"},{name:"Blizzard Damage",old:760,new:1120,parenthesesVal:"+360"},{name:"Armor",old:0,new:2,parenthesesVal:"+2"},{name:"Max mana",old:50,new:75,parenthesesVal:"+25"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity3.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity3R.webp",gold:75,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *2*",changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:32,new:39,parenthesesVal:"+7"},{name:"Health",old:84,new:101,parenthesesVal:"+17"},{name:"Wrath Damage",old:"74-296",new:"108-431",parenthesesVal:"+34/+135"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:60,new:69,parenthesesVal:"+9"},{name:"Health",old:52,new:58,parenthesesVal:"+6"},{name:"Blizzard Damage",old:1120,new:1480,parenthesesVal:"+360"}]}]},{lvl:4,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity4.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity4R.webp",gold:85,changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:39,new:46,parenthesesVal:"+7"},{name:"Health",old:101,new:118,parenthesesVal:"+17"},{name:"Wrath Damage",old:"108-431",new:"156-624",parenthesesVal:"+48/+193"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:69,new:78,parenthesesVal:"+9"},{name:"Health",old:58,new:64,parenthesesVal:"+6"},{name:"Blizzard Damage",old:1480,new:1840,parenthesesVal:"+360"},{name:"Max mana",old:75,new:100,parenthesesVal:"+25"}]}]},{lvl:5,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity5.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity5R.webp",gold:95,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *3*",changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:46,new:53,parenthesesVal:"+7"},{name:"Health",old:118,new:135,parenthesesVal:"+17"},{name:"Wrath Damage",old:"156-624",new:"219-875",parenthesesVal:"+63/+251"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:78,new:87,parenthesesVal:"+9"},{name:"Health",old:64,new:70,parenthesesVal:"+6"},{name:"Blizzard Damage",old:1840,new:2200,parenthesesVal:"+360"}]}]},{lvl:6,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity6.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity6R.webp",gold:105,changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:53,new:60,parenthesesVal:"+7"},{name:"Health",old:135,new:152,parenthesesVal:"+17"},{name:"Wrath Damage",old:"219-875",new:"295-1181",parenthesesVal:"+76/+306"},{name:"Armor",old:2,new:5,parenthesesVal:"+3"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:87,new:96,parenthesesVal:"+9"},{name:"Health",old:70,new:76,parenthesesVal:"+6"},{name:"Blizzard Damage",old:2200,new:2560,parenthesesVal:"+360"},{name:"Max mana",old:100,new:125,parenthesesVal:"+25"},{name:"Armor",old:2,new:5,parenthesesVal:"+3"}]}]},{lvl:7,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity7.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity7R.webp",gold:115,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *4*",changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:60,new:67,parenthesesVal:"+7"},{name:"Health",old:152,new:169,parenthesesVal:"+17"},{name:"Wrath Damage",old:"295-1181",new:"388-1551",parenthesesVal:"+93/+370"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:96,new:105,parenthesesVal:"+9"},{name:"Health",old:76,new:82,parenthesesVal:"+6"},{name:"Blizzard Damage",old:2560,new:2920,parenthesesVal:"+360"}]}]},{lvl:8,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity8.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity8R.webp",gold:125,changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:67,new:74,parenthesesVal:"+7"},{name:"Health",old:169,new:186,parenthesesVal:"+17"},{name:"Wrath Damage",old:"388-1551",new:"494-1976",parenthesesVal:"+106/+425"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:105,new:114,parenthesesVal:"+9"},{name:"Health",old:82,new:88,parenthesesVal:"+6"},{name:"Blizzard Damage",old:2920,new:3280,parenthesesVal:"+360"},{name:"Max mana",old:125,new:150,parenthesesVal:"+25"}]}]},{lvl:9,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity9.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity9R.webp",gold:135,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *5*",changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:74,new:81,parenthesesVal:"+7"},{name:"Health",old:186,new:203,parenthesesVal:"+17"},{name:"Wrath Damage",old:"494-1976",new:"615-2459",parenthesesVal:"+121/+483"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:114,new:123,parenthesesVal:"+9"},{name:"Health",old:88,new:94,parenthesesVal:"+6"},{name:"Blizzard Damage",old:3280,new:3640,parenthesesVal:"+360"}]}]},{lvl:10,img:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity10.webp",imgR:"/images/elves/upgrades/treeOfTechnology/tenacity/tenacity10R.webp",gold:145,changes:[{name:"Ent",type:"units",team:"elves",stats:[{name:"Damage",old:81,new:88,parenthesesVal:"+7"},{name:"Health",old:203,new:220,parenthesesVal:"+17"},{name:"Wrath Damage",old:"615-2459",new:"750-3000",parenthesesVal:"+135/+541"},{name:"Attack speed",new:"+25%"}]},{name:"Druid",type:"units",team:"elves",stats:[{name:"Damage",old:123,new:132,parenthesesVal:"+9"},{name:"Health",old:94,new:100,parenthesesVal:"+6"},{name:"Blizzard Damage",old:3640,new:4e3,parenthesesVal:"+360"},{name:"Attack speed",new:"+25%"}]}]}]},{name:"Construction",hotkey:"F",description:"Upgrades for your towers.",hasRequires:!0,upgrades:[{lvl:1,img:"/images/elves/buildings/magicTower.webp",imgR:"/images/elves/buildings/magicTowerR.webp",gold:55,changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:14,new:18,parenthesesVal:"+4"},{name:"Health",old:20,new:28,parenthesesVal:"+8"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:12,new:16,parenthesesVal:"+4"},{name:"Health",old:20,new:28,parenthesesVal:"+8"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:14,new:18,parenthesesVal:"+4"},{name:"Health",old:20,new:28,parenthesesVal:"+8"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:32,new:48,parenthesesVal:"+16"},{name:"Health",old:20,new:28,parenthesesVal:"+8"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:65,new:89,parenthesesVal:"+24"},{name:"Health",old:20,new:28,parenthesesVal:"+8"}]}]},{lvl:2,img:"/images/elves/buildings/magicTower.webp",imgR:"/images/elves/buildings/magicTowerR.webp",gold:65,changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:18,new:22,parenthesesVal:"+4"},{name:"Health",old:28,new:36,parenthesesVal:"+8"},{name:"Armor",old:0,new:5,parenthesesVal:"+5"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:16,new:20,parenthesesVal:"+4"},{name:"Health",old:28,new:36,parenthesesVal:"+8"},{name:"Armor",old:0,new:5,parenthesesVal:"+5"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:18,new:22,parenthesesVal:"+4"},{name:"Health",old:28,new:36,parenthesesVal:"+8"},{name:"Armor",old:0,new:5,parenthesesVal:"+5"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:48,new:64,parenthesesVal:"+16"},{name:"Health",old:28,new:36,parenthesesVal:"+8"},{name:"Armor",old:0,new:5,parenthesesVal:"+5"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:89,new:113,parenthesesVal:"+24"},{name:"Health",old:28,new:36,parenthesesVal:"+8"},{name:"Armor",old:0,new:5,parenthesesVal:"+5"}]}]},{lvl:3,img:"/images/elves/buildings/fireTower/fireTower.webp",imgR:"/images/elves/buildings/fireTower/fireTowerR.webp",gold:75,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *2*",changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:22,new:26,parenthesesVal:"+4"},{name:"Health",old:36,new:44,parenthesesVal:"+8"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:20,new:24,parenthesesVal:"+4"},{name:"Health",old:36,new:44,parenthesesVal:"+8"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:22,new:26,parenthesesVal:"+4"},{name:"Health",old:36,new:44,parenthesesVal:"+8"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:64,new:80,parenthesesVal:"+16"},{name:"Health",old:36,new:44,parenthesesVal:"+8"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:113,new:137,parenthesesVal:"+24"},{name:"Health",old:36,new:44,parenthesesVal:"+8"}]}]},{lvl:4,img:"/images/elves/buildings/fireTower/fireTower.webp",imgR:"/images/elves/buildings/fireTower/fireTowerR.webp",gold:85,changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:26,new:30,parenthesesVal:"+4"},{name:"Health",old:44,new:52,parenthesesVal:"+8"},{name:"Mana regen",old:.2,new:.5,parenthesesVal:"+0.3"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:24,new:28,parenthesesVal:"+4"},{name:"Health",old:44,new:52,parenthesesVal:"+8"},{name:"Mana regen",old:.2,new:.5,parenthesesVal:"+0.3"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:26,new:30,parenthesesVal:"+4"},{name:"Health",old:44,new:52,parenthesesVal:"+8"},{name:"Mana regen",old:.2,new:.5,parenthesesVal:"+0.3"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:80,new:96,parenthesesVal:"+16"},{name:"Health",old:44,new:52,parenthesesVal:"+8"},{name:"Mana regen",old:.2,new:.5,parenthesesVal:"+0.3"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:137,new:161,parenthesesVal:"+24"},{name:"Health",old:44,new:52,parenthesesVal:"+8"},{name:"Mana regen",old:.2,new:.5,parenthesesVal:"+0.3"}]}]},{lvl:5,img:"/images/elves/buildings/frostTower/frostTower.webp",imgR:"/images/elves/buildings/frostTower/frostTowerR.webp",gold:95,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *3*",changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:30,new:34,parenthesesVal:"+4"},{name:"Health",old:52,new:60,parenthesesVal:"+8"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:28,new:32,parenthesesVal:"+4"},{name:"Health",old:52,new:60,parenthesesVal:"+8"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:30,new:34,parenthesesVal:"+4"},{name:"Health",old:52,new:60,parenthesesVal:"+8"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:96,new:112,parenthesesVal:"+16"},{name:"Health",old:52,new:60,parenthesesVal:"+8"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:161,new:185,parenthesesVal:"+24"},{name:"Health",old:52,new:60,parenthesesVal:"+8"}]}]},{lvl:6,img:"/images/elves/buildings/frostTower/frostTower.webp",imgR:"/images/elves/buildings/frostTower/frostTowerR.webp",gold:105,changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:34,new:38,parenthesesVal:"+4"},{name:"Health",old:60,new:68,parenthesesVal:"+8"},{name:"Build speed",new:"+66%"},{name:"Upgrade speed",new:"+50%"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:32,new:36,parenthesesVal:"+4"},{name:"Health",old:60,new:68,parenthesesVal:"+8"},{name:"Build speed",new:"+66%"},{name:"Upgrade speed",new:"+50%"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:34,new:38,parenthesesVal:"+4"},{name:"Health",old:60,new:68,parenthesesVal:"+8"},{name:"Build speed",new:"+66%"},{name:"Upgrade speed",new:"+50%"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:112,new:128,parenthesesVal:"+16"},{name:"Health",old:60,new:68,parenthesesVal:"+8"},{name:"Build speed",new:"+66%"},{name:"Upgrade speed",new:"+50%"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:185,new:209,parenthesesVal:"+24"},{name:"Health",old:60,new:68,parenthesesVal:"+8"},{name:"Build speed",new:"+66%"},{name:"Upgrade speed",new:"+50%"}]}]},{lvl:7,img:"/images/elves/buildings/earthTower/earthTower.webp",imgR:"/images/elves/buildings/earthTower/earthTowerR.webp",gold:115,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *4*",changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:38,new:42,parenthesesVal:"+4"},{name:"Health",old:68,new:76,parenthesesVal:"+8"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:36,new:40,parenthesesVal:"+4"},{name:"Health",old:68,new:76,parenthesesVal:"+8"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:38,new:42,parenthesesVal:"+4"},{name:"Health",old:68,new:76,parenthesesVal:"+8"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:128,new:144,parenthesesVal:"+16"},{name:"Health",old:68,new:76,parenthesesVal:"+8"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:209,new:233,parenthesesVal:"+24"},{name:"Health",old:68,new:76,parenthesesVal:"+8"}]}]},{lvl:8,img:"/images/elves/buildings/earthTower/earthTower.webp",imgR:"/images/elves/buildings/earthTower/earthTowerR.webp",gold:125,changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:42,new:46,parenthesesVal:"+4"},{name:"Health",old:76,new:84,parenthesesVal:"+8"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:40,new:44,parenthesesVal:"+4"},{name:"Health",old:76,new:84,parenthesesVal:"+8"},{name:"Max mana",old:50,new:100,parenthesesVal:"+100%"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:42,new:46,parenthesesVal:"+4"},{name:"Health",old:76,new:84,parenthesesVal:"+8"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:144,new:160,parenthesesVal:"+16"},{name:"Health",old:76,new:84,parenthesesVal:"+8"},{name:"Max mana",old:50,new:100,parenthesesVal:"+100%"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:233,new:257,parenthesesVal:"+24"},{name:"Health",old:76,new:84,parenthesesVal:"+8"},{name:"Max mana",old:50,new:100,parenthesesVal:"+100%"}]}]},{lvl:9,img:"/images/elves/buildings/lightningTower/lightningTower.webp",imgR:"/images/elves/buildings/lightningTower/lightningTowerR.webp",gold:135,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *5*",changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:46,new:50,parenthesesVal:"+4"},{name:"Health",old:84,new:92,parenthesesVal:"+8"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:44,new:48,parenthesesVal:"+4"},{name:"Health",old:84,new:92,parenthesesVal:"+8"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:46,new:50,parenthesesVal:"+4"},{name:"Health",old:84,new:92,parenthesesVal:"+8"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:160,new:176,parenthesesVal:"+16"},{name:"Health",old:84,new:92,parenthesesVal:"+8"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:257,new:281,parenthesesVal:"+24"},{name:"Health",old:84,new:92,parenthesesVal:"+8"}]}]},{lvl:10,img:"/images/elves/buildings/lightningTower/lightningTower.webp",imgR:"/images/elves/buildings/lightningTower/lightningTowerR.webp",gold:145,changes:[{name:"Magic Tower",type:"buildings",stats:[{name:"Damage",old:50,new:54,parenthesesVal:"+4"},{name:"Health",old:92,new:100,parenthesesVal:"+8"},{name:"Spell damage taken",new:"-100%"}]},{name:"Fire Tower",type:"buildings",stats:[{name:"Damage",old:48,new:52,parenthesesVal:"+4"},{name:"Health",old:92,new:100,parenthesesVal:"+8"},{name:"Spell damage taken",new:"-100%"}]},{name:"Earth Tower",type:"buildings",stats:[{name:"Damage",old:50,new:54,parenthesesVal:"+4"},{name:"Health",old:92,new:100,parenthesesVal:"+8"},{name:"Spell damage taken",new:"-100%"}]},{name:"Frost Tower",type:"buildings",stats:[{name:"Damage",old:176,new:192,parenthesesVal:"+16"},{name:"Health",old:92,new:100,parenthesesVal:"+8"},{name:"Spell damage taken",new:"-100%"}]},{name:"Lightning Tower",type:"buildings",stats:[{name:"Damage",old:281,new:305,parenthesesVal:"+24"},{name:"Health",old:92,new:100,parenthesesVal:"+8"},{name:"Spell damage taken",new:"-100%"}]}]}]},{name:"Leadership",hotkey:"Z",description:"Upgrades for your attack units.",hasRequires:!0,upgrades:[{lvl:1,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership1.png",gold:55,changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:8,new:12,parenthesesVal:"+4"},{name:"Health",old:20,new:22,parenthesesVal:"+2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:4,new:5,parenthesesVal:"+1"},{name:"Health",old:50,new:63,parenthesesVal:"+13"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:20,new:27,parenthesesVal:"+7"},{name:"Health",old:40,new:46,parenthesesVal:"+6"}]}]},{lvl:2,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership2.png",gold:65,changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:12,new:16,parenthesesVal:"+4"},{name:"Health",old:22,new:24,parenthesesVal:"+2"},{name:"Life regeneration",new:"+0.2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:5,new:6,parenthesesVal:"+1"},{name:"Health",old:63,new:76,parenthesesVal:"+13"},{name:"Life regeneration",new:"+0.2"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:27,new:34,parenthesesVal:"+7"},{name:"Health",old:46,new:52,parenthesesVal:"+6"},{name:"Life regeneration",new:"+0.2"}]}]},{lvl:3,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership3.png",gold:75,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *2*",changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:16,new:20,parenthesesVal:"+4"},{name:"Health",old:24,new:26,parenthesesVal:"+2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:6,new:7,parenthesesVal:"+1"},{name:"Health",old:76,new:89,parenthesesVal:"+13"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:34,new:41,parenthesesVal:"+7"},{name:"Health",old:52,new:58,parenthesesVal:"+6"}]}]},{lvl:4,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership4.png",gold:85,changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:20,new:24,parenthesesVal:"+4"},{name:"Health",old:26,new:28,parenthesesVal:"+2"},{name:"Move speed",old:250,new:275,parenthesesVal:"+10%"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:7,new:8,parenthesesVal:"+1"},{name:"Health",old:89,new:102,parenthesesVal:"+13"},{name:"Move speed",old:300,new:330,parenthesesVal:"+10%"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:41,new:48,parenthesesVal:"+7"},{name:"Health",old:58,new:64,parenthesesVal:"+6"},{name:"Move speed",old:300,new:330,parenthesesVal:"+10%"}]}]},{lvl:5,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership5.png",gold:95,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *3*",changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:24,new:28,parenthesesVal:"+4"},{name:"Health",old:28,new:30,parenthesesVal:"+2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:8,new:9,parenthesesVal:"+1"},{name:"Health",old:102,new:115,parenthesesVal:"+13"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:48,new:55,parenthesesVal:"+7"},{name:"Health",old:64,new:70,parenthesesVal:"+6"}]}]},{lvl:6,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership6.png",gold:105,changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:28,new:32,parenthesesVal:"+4"},{name:"Health",old:30,new:32,parenthesesVal:"+2"},{name:"Armor",old:0,new:2,parenthesesVal:"+2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:9,new:10,parenthesesVal:"+1"},{name:"Health",old:115,new:128,parenthesesVal:"+13"},{name:"Armor",old:0,new:2,parenthesesVal:"+2"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:55,new:62,parenthesesVal:"+7"},{name:"Health",old:70,new:76,parenthesesVal:"+6"},{name:"Armor",old:0,new:2,parenthesesVal:"+2"}]}]},{lvl:7,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership7.png",gold:115,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *4*",changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:32,new:36,parenthesesVal:"+4"},{name:"Health",old:32,new:34,parenthesesVal:"+2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:10,new:11,parenthesesVal:"+1"},{name:"Health",old:128,new:141,parenthesesVal:"+13"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:62,new:69,parenthesesVal:"+7"},{name:"Health",old:76,new:82,parenthesesVal:"+6"}]}]},{lvl:8,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership8.png",gold:125,changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:36,new:40,parenthesesVal:"+4"},{name:"Health",old:34,new:36,parenthesesVal:"+2"},{name:"Move speed",old:275,new:316,parenthesesVal:"+15%"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:11,new:12,parenthesesVal:"+1"},{name:"Health",old:141,new:154,parenthesesVal:"+13"},{name:"Move speed",old:330,new:380,parenthesesVal:"+15%"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:69,new:76,parenthesesVal:"+7"},{name:"Health",old:82,new:88,parenthesesVal:"+6"},{name:"Move speed",old:330,new:380,parenthesesVal:"+15%"}]}]},{lvl:9,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership9.png",gold:135,requires:"&/elves/buildings/treeOfTechnology/#Architecture& *5*",changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:40,new:44,parenthesesVal:"+4"},{name:"Health",old:36,new:38,parenthesesVal:"+2"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:12,new:13,parenthesesVal:"+1"},{name:"Health",old:154,new:167,parenthesesVal:"+13"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:76,new:83,parenthesesVal:"+7"},{name:"Health",old:88,new:94,parenthesesVal:"+6"}]}]},{lvl:10,img:"/images/elves/upgrades/treeOfTechnology/leadership/leadership10.png",gold:145,changes:[{name:"Archer",type:"units",team:"elves",stats:[{name:"Damage",old:44,new:48,parenthesesVal:"+4"},{name:"Health",old:38,new:40,parenthesesVal:"+2"},{name:"Armor",old:2,new:5,parenthesesVal:"+3"}]},{name:"Hippogryph",type:"units",team:"elves",stats:[{name:"Damage",old:13,new:14,parenthesesVal:"+1"},{name:"Health",old:167,new:180,parenthesesVal:"+13"},{name:"Armor",old:2,new:5,parenthesesVal:"+3"}]},{name:"Hippogryph Rider",type:"units",team:"elves",stats:[{name:"Damage",old:83,new:90,parenthesesVal:"+7"},{name:"Health",old:94,new:100,parenthesesVal:"+6"},{name:"Armor",old:2,new:5,parenthesesVal:"+3"}]}]}]}]},{img:"/images/elves/buildings/treeOfLife.webp",imgR:"/images/elves/buildings/treeOfLifeR.webp",name:"Tree Of Life",team:"elves",type:"buildings",description:"A structure that can unlock talents. It's located in the top-left corner of the map.",upgrades:J},{img:"/images/elves/buildings/magicTower.webp",imgR:"/images/elves/buildings/magicTowerR.webp",name:"Magic Tower",team:"elves",type:"buildings",requires:"&/elves/buildings/treeOfTechnology#Architecture& *1*",description:"<p>^Requires &/elves/buildings/TreeOfTechnology#Architecture& *1*.^</p>A balanced tower with moderate damage output, range and attack speed.",gold:20,feed:"8-16",supply:2,stats:{"Attack Damage":14,"Attack Speed":1,"Attack Range":600,Health:20,"Mana regeneration":.2},externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],upgrades:[{img:"/images/elves/upgrades/magicTower/pathOfFire.webp",imgR:"/images/elves/upgrades/magicTower/pathOfFireR.webp",name:"Path of Fire",hotkey:"Z",gold:100,description:"Unlock the &/elves/buildings/Fire Tower&."},{img:"/images/elves/upgrades/magicTower/pathOfEarth.webp",imgR:"/images/elves/upgrades/magicTower/pathOfEarthR.webp",name:"Path of Earth",hotkey:"X",gold:100,description:"Unlock the &/elves/buildings/Earth Tower&."},{img:"/images/elves/upgrades/magicTower/pathOfFrost.webp",imgR:"/images/elves/upgrades/magicTower/pathOfFrostR.webp",name:"Path of Frost",hotkey:"C",gold:100,description:"Unlock the &/elves/buildings/Frost Tower&."},{img:"/images/elves/upgrades/magicTower/pathOfLightning.webp",imgR:"/images/elves/upgrades/magicTower/pathOfLightningR.webp",name:"Path of Lightning",hotkey:"V",gold:300,description:"Unlock the &/elves/buildings/Lightning Tower&."},{img:"/images/elves/buildings/fireTower/fireTower.webp",imgR:"/images/elves/buildings/fireTower/fireTowerR.webp",name:"Fire Tower",hotkey:"Z",gold:30,supply:3,description:"Upgrade to &/elves/buildings/Fire Tower&."},{img:"/images/elves/buildings/earthTower/earthTower.webp",imgR:"/images/elves/buildings/earthTower/earthTowerR.webp",name:"Earth Tower",hotkey:"X",gold:20,supply:2,description:"Upgrade to &/elves/buildings/Earth Tower&."},{img:"/images/elves/buildings/frostTower/frostTower.webp",imgR:"/images/elves/buildings/frostTower/frostTowerR.webp",name:"Frost Tower",hotkey:"C",gold:10,supply:1,description:"Upgrade to &/elves/buildings/Frost Tower&."},{img:"/images/elves/buildings/lightningTower/lightningTower.webp",imgR:"/images/elves/buildings/lightningTower/lightningTowerR.webp",name:"Lightning Tower",hotkey:"V",gold:55,supply:3,description:"Upgrade to &/elves/buildings/Lightning Tower&."}]},{img:"/images/elves/buildings/fireTower/fireTower.webp",imgR:"/images/elves/buildings/fireTower/fireTowerR.webp",name:"Fire Tower",team:"elves",type:"buildings",description:"A short-range tower with high burst damage and fast attack speed. Good positioning is required to utilize this tower to its fullest potential.",gold:30,feed:"20-40",supply:3,stats:{"Attack Damage":12,"Attack Speed":.33,"Attack Range":450,Health:20,"Mana regeneration":.2},externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],abilities:[{img:"/images/elves/buildings/fireTower/abilities/blaze.png",imgR:"/images/elves/buildings/fireTower/abilities/blaze.png",name:"Blaze",hotkey:"E",mana:25,cooldown:5,description:"Increase attack damage by ^50%^ for ^5^ seconds."}]},{img:"/images/elves/buildings/earthTower/earthTower.webp",imgR:"/images/elves/buildings/earthTower/earthTowerR.webp",name:"Earth Tower",team:"elves",type:"buildings",description:"A mid-range tower that can attack up to ^4^ enemies at once. This tower is excellent at defending small bases from multiple attackers, but is very weak against duo and solo attacks.",gold:20,feed:"16-32",supply:2,stats:{"Attack Damage":14,"Attack Speed":1,"Attack Range":600,Health:20,"Mana regeneration":.2},externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}]},{img:"/images/elves/buildings/frostTower/frostTower.webp",imgR:"/images/elves/buildings/frostTower/frostTowerR.webp",name:"Frost Tower",team:"elves",type:"buildings",description:"A mid-range tower with moderate damage output and slow attack rate.",gold:10,feed:"12-24",supply:1,stats:{"Attack Damage":32,"Attack Speed":2,"Attack Range":600,Health:20,"Mana regeneration":.2},externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],abilities:[{img:"/images/elves/buildings/frostTower/abilities/chill.webp",imgR:"/images/elves/buildings/frostTower/abilities/chillR.webp",name:"Chill",hotkey:"E",mana:35,cooldown:12,description:"When active, attacks reduce the target move speed scaling from ^2%^ to ^10%^ over ^6^ seconds. The slow lasts for ^2^ seconds. The total effect duration is ^12^ seconds."}]},{img:"/images/elves/buildings/lightningTower/lightningTower.webp",imgR:"/images/elves/buildings/lightningTower/lightningTowerR.webp",name:"Lightning Tower",team:"elves",type:"buildings",description:"A long-range tower with high damage output and slow attack rate.",gold:55,feed:"30-60",supply:3,stats:{"Attack Damage":65,"Attack Speed":2,"Attack Range":900,Health:20,"Mana regeneration":.2},externalUpgrades:[{name:"Tree of Technology",url:"/elves/buildings/treeOfTechnology"}],abilities:[{img:"/images/elves/buildings/lightningTower/abilities/stormStrike.png",imgR:"/images/elves/buildings/lightningTower/abilities/stormStrike.png",name:"Storm Strike",hotkey:"E",mana:35,cooldown:12,description:"Activate to increase attack range by ^300^ for ^12^ seconds."}]},{img:"/images/elves/buildings/barracks.webp",imgR:"/images/elves/buildings/barracksR.webp",name:"Barracks",team:"elves",type:"buildings",hotkey:"R",gold:30,feed:"12-24",stats:{Health:40},description:"Replaces the &/elves/buildings/Tree Of War&, has *2x2* size and is built ^33%^ faster. Visit the &/elves/buildings/Tree Of War& page for more information."},{img:"/images/elves/buildings/techCenter.webp",imgR:"/images/elves/buildings/techCenterR.webp",name:"Tech Center",team:"elves",type:"buildings",hotkey:"C",description:"Replaces the &/elves/buildings/Tree Of Technology&, has *2x2* size and is built ^33%^ faster. Visit the &/elves/buildings/Tree Of Technology& page for more information.",gold:40,feed:"16-32",stats:{Health:40}}],banner:"/images/elves/banner.png",header:"/images/header-decoration-gold.png"}},X=e=>C`<div class="d-flex flex-wrap justify-content-center gap-4 topRow">${e.map((e=>C`<div class="card text-bg-dark p-2"><a class="text-center" href="/${e.team}/${e.type}/${Y(e.name)}"><img src="${e.imgR}"></a><div class="card-body p-0"><a href="/${e.team}/${e.type}/${Y(e.name)}"><h5 class="card-title text-center">${e.name}</h5></a></div></div>`))}</div>`;function ee(e,t){const n=e.path.replace("/","");var s;document.title=`OaE - ${Z[n].nameCapitalized} `,j(C`<div class="d-flex align-items-center justify-content-center"><img src="${(s=Z[n]).header}"><h1 class="m-0">${s.nameCapitalized} team<img style="transform:rotate(180deg)" src="${s.header}"></h1></div><h2 class="mt-5 text-center text-yellow">Units</h2>${X(s.units)}<hr class="mt-5"><h2 class="mt-5 text-center text-yellow">Buildings</h2>${X(s.buildings)}`,Xa),t()}const te=[{title:"Missing icons, download link",date:"23.10.2023",content:'\n        <h4 class="text-yellow">Whats fixed/added:</h4>\n        <ul>\n            <li>Added *Role Selection*, *Player Score* and *Upgrades* from F1 menu to General info page</li>\n            <li>Added download link and header to home page (only visible on desktop)</li>\n            <li>Added scroll to top button</li>\n            <li>Added *Scryer* icon</li>\n            <li>Added *Blocker* description</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Known issues or wrong info:</h4>\n        <ul>\n            <li>None</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Here\'s whats coming soon:</h4>\n        <ul>\n            <li>General info page: F1 menu explained</li>\n            <li>Analytics</li>\n            <li>Add content table at the top of every unit/building page, where you can click a ability/upgrade and have the website scroll it into view.</li>\n            <li>Elves and orcs: tips for units, buildings, upgrades, etc.</li>\n            <li>Elves units: better description</li>\n            <li>*Tree of Technology*: Description for main upgrades.</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">New things coming for the website:</h4>\n        <ul>\n            <li>Major design overhaul</li>\n            <li>Custom borders for tables</li>\n            <li>Ability for verified members to upload a photo of the scoreboard after a match and have it converted & saved as data that can be used for stats and game history (balance check)</li>\n        </ul>\n        '},{title:"Added missing info",date:"07.10.2023",content:'\n        <h4 class="text-yellow">Whats fixed/added:</h4>\n        <ul>\n            <li>Added General info page: Commands for all types of players</li>\n            <li>Added dividers between different sections for better visibility</li>\n            <li>Wide tables (Tree of Technology and Altar) now have alternating colors for columns, instead of rows</li>\n            <li>Some units names were not showing as links on mobile</li>\n            <li>Tenacity: Added damage increases for the abilities of Ent and Druid</li>\n            <li>Elves buildings: &/elves/buildings/Tech Center&, &/elves/buildings/Barracks&</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Known issues or wrong info:</h4>\n        <ul>\n            <li>Orcs spell *Scryer*: icon missing</li>\n            <li>*Blocker*: description</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Here\'s whats coming soon:</h4>\n        <ul>\n            <li>General info page: F1 menu explained</li>\n            <li>Analytics</li>\n            <li>Add content table at the top of every unit/building page, where you can click a ability/upgrade and have the website scroll it into view.</li>\n            <li>Elves and orcs: tips for units, buildings, upgrades, etc.</li>\n            <li>Elves units: better description</li>\n            <li>*Tree of Technology*: Description for main upgrades.</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">New things coming for the website:</h4>\n        <ul>\n            <li>Major design overhaul</li>\n            <li>Custom borders for tables</li>\n            <li>Ability for verified members to upload a photo of the scoreboard after a match and have it converted & saved as data that can be used for stats and game history (balance check)</li>\n        </ul>\n        '},{title:"Known issues fix",date:"06.10.2023",content:'\n        <h4 class="text-yellow">Whats fixed:</h4>\n        <ul>\n            <li>Owl scout icon</li>\n            <li>Grunt: some stats was wrong, updated it</li>\n            <li>Destruction upgrade: had 2 level 4\'s, fixed to say level 4 and 5</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Known issues or wrong info:</h4>\n        <ul>\n            <li>Orcs spell *Scryer*: icon missing</li>\n            <li>*Blocker*: description</li>\n            <li>*Tenacity* - Check which level increases the damage of *Blizzard* (Druid ability)</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Here\'s whats coming soon:</h4>\n        <ul>\n            <li>Add content table at the top of every unit/building page, where you can click a ability/upgrade and have the website scroll it into view.</li>\n            <li>Elves and orcs: tips for units, buildings, upgrades, etc.</li>\n            <li>Elves units: better description</li>\n            <li>Elves buildings: *Tech Center*, *Barracks*</li>\n            <li>*Tree of Technology*: Description for main upgrades.</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">New things coming for the website:</h4>\n        <ul>\n            <li>Major design overhaul</li>\n            <li>Custom borders for tables</li>\n            <li>Ability for verified members to upload a photo of the scoreboard after a match and have it converted & saved as data that can be used for stats and game history (balance check)</li>\n        </ul>\n        '},{title:"Mobile responsiveness",date:"05.10.2023",content:'\n        <h4 class="text-yellow">New stuff in this website update:</h4>\n        <ul>\n            <li>Mobile responsiveness\n                <ul>\n                    <li>Updated the whole website to be easier to use on mobile</li>\n                    <li>Changed some tables to card-like views (example: Abilities, Upgrades)</li>\n                </ul>\n            </li>\n            <li>Navigation menu\n                <ul>\n                    <li>Increased gap between links in desktop and mobile view</li>\n                    <li>Fixed a bug where if you click a link in the navigation on mobile the menu stays open</li>\n                    <li>Added a discord link</li>\n                    <li>Changed the font of "OaE" title</li>\n                    <li>Color tweaks</li>\n                </ul>\n            </li>\n            <li>Added the &/orcs/units/Grunt&\'s *Ghost* ability icon</li>\n            <li>Added "MP" text after mana value and "sec" after cooldowns in tables to avoid confusion when scrolling down a long table and you stop seeing the header.</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Known issues or wrong info:</h4>\n        <ul>\n            <li>Orcs spell *Scryer*: icon missing</li>\n            <li>*Owl Scout*: check if Reforged icon is correct</li>\n            <li>*Blocker*: description</li>\n            <li>*Tenacity* - Check which level increases the damage of *Blizzard* (Druid ability)</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Here\'s whats coming soon:</h4>\n        <ul>\n            <li>Add content table at the top of every unit/building page, where you can click a ability/upgrade and have the website scroll it into view.</li>\n            <li>Elves and orcs: tips for units, buildings, upgrades, etc.</li>\n            <li>Elves units: better description</li>\n            <li>Elves buildings: *Tech Center*, *Barracks*</li>\n            <li>*Tree of Technology*: Description for main upgrades.</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">New things coming for the website:</h4>\n        <ul>\n            <li>Major design overhaul</li>\n            <li>Custom borders for tables</li>\n            <li>Ability for verified members to upload a photo of the scoreboard after a match and have it converted & saved as data that can be used for stats and game history (balance check)</li>\n        </ul>\n        '},{title:"Website up!",date:"04.10.2023",content:'\n        <h4 class="text-yellow">Here\'s whats been added to our website:</h4>\n        <ul>\n            <li>Orcs - buildings, units, abilities and upgrades</li>\n            <li>Elfs - buildings, units, abilities and upgrades</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Known issues or wrong info:</h4>\n        <ul>\n            <li>Orcs spells: *Scryer* and *Ghost* - abilities icons missing</li>\n            <li>*Owl Scout*: check if Reforged icon is correct</li>\n            <li>*Blocker*: description</li>\n            <li>*Tenacity* - Check which level increases the damage of *Blizzard* (Druid ability)</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">Here\'s whats coming soon:</h4>\n        <ul>\n            <li>Elves and orcs - tips for units, buildings, upgrades, etc.</li>\n            <li>Elves units: better description</li>\n            <li>Elves buildings: *Tech Center*, *Barracks*</li>\n            <li>*Tree of Technology*: Description for main upgrades.</li>\n        </ul>\n\n        <h4 class="text-yellow mt-5">New things coming for the website:</h4>\n        <ul>\n            <li>Major design changes</li>\n            <li>Mobile responsive</li>\n            <li>Custom borders for tables</li>\n            <li>Ability for verified members to upload a photo of the scoreboard after a match and have it converted & saved as data that can be used for stats and game history (balance check)</li>\n        </ul>\n        '}],ne=[{name:"Give gold to a player",command:"-give (Player Number) (Amount)"},{name:"Give all your gold to a player",command:"-ga (Player Number)"},{name:"Give resurrection gold to a player",command:"-r (Player Number)"},{name:"Start a vote to kick a player",command:"-votekick (Player Number)"},{name:"Enable/Disable full shared control to specific player",command:"-fs (Player Number)"},{name:"Enable/Disable full shared control to all allies",command:"-fs"},{name:"Enable/Disable friendly fire (allies can attack your units)",command:"-ff"},{name:"Remove all messages from the screen",command:"-clear OR press ESC"},{name:"Zoom in/out",command:"-zoom (1500-2000)"},{name:"List all players and their feed %",command:"-players"},{name:"Show/Hide spellbook",command:"-sb OR press F2"},{name:"Toggle auto-hide on/off for the spellbook",command:"-sbh"},{name:"Display available skill points",command:"-sp"},{name:"Display gold in bonus pool",command:"-bp"},{name:"Display Gold per minute",command:"-gpm"},{name:"Display gold sent",command:"-gs"}],se=[{name:"Display building placements for bases",command:"-marker"},{name:"List total gold harvested by all allied players",command:"-gm"},{name:"Enable/Disable Blocker cap display",command:"-bc"}],ie=[{name:"List total gold collected by allied players",command:"-pg"},{name:"List total gold earned from different sources",command:"-ag"}],ae=[{name:"Enable/Disable vision over the entire map",command:"-fw"},{name:"View the match from a player's perspective",command:"-pov (Player Number)"},{name:"Make the camera follow a player",command:"-follow (Player Number)"},{name:"Zoom in/out",command:"-zoom (1500-3000)"},{name:"Reset the camera",command:"-cr"}],re=[{name:"Base Builder",description:"The primary owner of a larger settlement with offensive competence and their job is to ^build, maintain, hold on to and expand the base^. The main purpose of a base is to create a safe zone where allied players can seek shelter and advance their technology.<p>As a base builder, your objective is to construct a reliable town that can withstand consistent pressure and survive a siege. To do this ^you must have access to a reliable damage source that can repel or kill the attacker^, which may require the support and cooperation of other players</p>",img:"/images/elves/roles/baseBuilder.webp",imgR:"/images/elves/roles/baseBuilderR.webp"},{name:"Support",description:"Suitable for ^flexible players^ that constantly adapt to the situation. This sometimes results in a low-tech hybrid without any dominating tech specialization, which allows the player to function in (or swap between) many different roles throughout the course of a match.<p>The main objective is to help their team in various ways. Support players often ^produce an army to assist the base builders, resurrect dead players, secure escape routes, setup expansions, re-wall passages to stall for time^ and focus on assisting or saving allies in trouble.</p>",img:"/images/elves/roles/support.webp",imgR:"/images/elves/roles/supportR.webp"},{name:"Trapper",description:"The Trapper is a play maker that risk their own life to support other players by ^setting up kills^ and ^reducing pressure^.Their job is to restrict the mobility of the opposing team while they are within range of a reliable damage source.This will lead to prolonged damage exposure which may kill the attacker.<p>For each kill there is generally a trade-off and as a trapper your goal is to make favorable trades while investing as few resources as possible. Ideally ^you want the opponents revive cost to be larger than the amount of gold you fed them while setting up the kill^. If you can pull this off consistently you will contribute by building a financial lead for your team.</p>",img:"/images/elves/roles/trapper.webp",imgR:"/images/elves/roles/trapperR.webp"},{name:"Roamer",description:"The Roamers are experienced survivors that generally harvest resources far away from the base to attract the attention of the opposing team. The goal is to either ^free-farm^ and quickly progress towards end-game technology that can assist your team, while the enemy are busy pushing the base. Or to ^survive and distract^ the enemy while they are looking for you, in order to buy time for the base builders to recover, progress and expand.<p>As a roamer ^you must carefully observe and evaluate the situation to find the best course of action at any given time^. Choose your technological investments wisely, because they will at least partially determine whether or not you can stay alive and how fast you can contribute to your team with powerful late-game upgrades and/or army compositions.</p>",img:"/images/elves/roles/roamer.png",imgR:"/images/elves/roles/roamerR.png"}],oe=[{name:"Shaman",description:"Mark the &/orcs/units/Shaman& as your primary morph choice.",img:"/images/orcs/units/shaman/shaman.webp",imgR:"/images/orcs/units/shaman/shamanR.webp"},{name:"Tracker",description:"Mark the &/orcs/units/Tracker& as your primary morph choice.",img:"/images/orcs/units/tracker/tracker.webp",imgR:"/images/orcs/units/tracker/trackerR.webp"},{name:"Tauren",description:"Mark the &/orcs/units/Tauren& as your primary morph choice.",img:"/images/orcs/units/tauren/tauren.webp",imgR:"/images/orcs/units/tauren/taurenR.webp"},{name:"Medic",description:"Mark the &/orcs/units/Medic& as your primary morph choice.",img:"/images/orcs/units/medic/medic.webp",imgR:"/images/orcs/units/medic/medicR.webp"},{name:"Inventor",description:"Mark the &/orcs/units/Inventor& as your primary morph choice.",img:"/images/orcs/units/inventor/inventor.webp",imgR:"/images/orcs/units/inventor/inventorR.webp"},{name:"Berserker",description:"Mark the &/orcs/units/Berserker& as your primary morph choice.",img:"/images/orcs/units/berserker/berserker.webp",imgR:"/images/orcs/units/berserker/berserkerR.webp"}],le=e=>C`<table class="table w-auto table-striped table-hover mb-5" data-bs-theme="dark"><thead><tr><th class="text-center">Description</th><th class="text-center">Command</th></tr></thead><tbody>${e.map((e=>C`<tr><td class="text-center">${e.name}</td><td class="text-center">${e.command}</td></tr>`))}</tbody></table>`,ce=e=>C`<table class="table table-striped table-hover w-auto mb-0" data-bs-theme="dark"><thead><tr><th class="text-center">Classic</th><th class="text-center">Reforged</th><th class="text-center">Name</th><th class="text-center">Description</th></tr></thead><tbody>${e.map((e=>C`<tr><td><img class="entityImage" src="${e.img}" title="Classic Image"></td><td><img class="entityImage" src="${e.imgR}" title="Reforged Image"></td><td class="text-center text-yellow">${e.name}</td><td>${z(G(e.description))}</td></tr>`))}</tbody></table>`,he=e=>C`<div class="mb-5">${e.map((e=>C`<div class="text-bg-dark rounded-3 mb-5 p-2"><div class="d-flex justify-content-center gap-3 align-items-center"><img src="${e.img}" class="entityImage"> <img src="${e.imgR}" class="entityImage"></div><div class="mt-2"><h2 class="text-center text-green">${e.name}</h2><p class="mt-2">${z(G(e.description))}</p></div></div>`))}</div>`;n(875);const de=function(e,t){if(!e)throw ue(t)},ue=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},pe=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&s+1<e.length&&56320==(64512&e.charCodeAt(s+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++s)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let t=0;t<e.length;t+=3){const i=e[t],a=t+1<e.length,r=a?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,c=i>>2,h=(3&i)<<4|r>>4;let d=(15&r)<<2|l>>6,u=63&l;o||(u=64,a||(d=64)),s.push(n[c],n[h],n[d],n[u])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[s++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(a>>10)),t[s++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],r=e[n++];t[s++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&r)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const r=t<e.length?n[e.charAt(t)]:64;++t;const o=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==a||null==r||null==o)throw new ge;const l=i<<2|a>>4;if(s.push(l),64!==r){const e=a<<4&240|r>>2;if(s.push(e),64!==o){const e=r<<6&192|o;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(e){const t=pe(e);return me.encodeByteArray(t,!0)},ve=function(e){return fe(e).replace(/\./g,"")},we=function(e){try{return me.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ye(e){return be(void 0,e)}function be(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=be(e[n],t[n]));return e}const _e=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&we(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Te(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}class Re extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?function(e,t){return e.replace(Ee,((e,n)=>{const s=t[n];return null!=s?String(s):`<${n}?>`}))}(i,n):"Error",r=`${this.serviceName}: ${a} (${s}).`;return new Re(s,r,n)}}const Ee=/\{\$([^}]+)}/g;function Se(e){return JSON.parse(e)}function Ae(e){return JSON.stringify(e)}const xe=function(e){let t={},n={},s={},i="";try{const a=e.split(".");t=Se(we(a[0])||""),n=Se(we(a[1])||""),i=a[2],s=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:s,signature:i}};function Ie(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function De(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Oe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Le(e,t,n){const s={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=t.call(n,e[i],i,e));return s}function Me(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const n=e[i],a=t[i];if(Ne(n)&&Ne(a)){if(!Me(n,a))return!1}else if(n!==a)return!1}for(const e of s)if(!n.includes(e))return!1;return!0}function Ne(e){return null!==e&&"object"==typeof e}class Pe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let s=0;s<16;s++)n[s]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let s=0;s<16;s++)n[s]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let s,i,a=this.chain_[0],r=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(s=l^r&(o^l),i=1518500249):(s=r^o^l,i=1859775393):e<60?(s=r&o|l&(r|o),i=2400959708):(s=r^o^l,i=3395469782);const t=(a<<5|a>>>27)+s+c+i+n[e]&4294967295;c=l,l=o,o=4294967295&(r<<30|r>>>2),r=a,a=t}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let s=0;const i=this.buf_;let a=this.inbuf_;for(;s<t;){if(0===a)for(;s<=n;)this.compress_(e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(i[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}else for(;s<t;)if(i[a]=e[s],++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let s=24;s>=0;s-=8)e[n]=this.chain_[t]>>s&255,++n;return e}}const Ve=function(e){let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,n++):t+=3}return t};class $e{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const He="[DEFAULT]";class Fe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ke;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),s=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(s)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:He})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=He){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=He){return this.instances.has(e)}getOptions(e=He){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(s);return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===He?void 0:s),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var s;return n||null}normalizeInstanceIdentifier(e=He){return this.component?this.component.multipleInstances?e:He:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Be{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const We=[];var je;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(je||(je={}));const qe={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},Ue=je.INFO,ze={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},Ge=(e,t,...n)=>{if(t<e.logLevel)return;const s=(new Date).toISOString(),i=ze[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${s}]  ${e.name}:`,...n)};class Ye{constructor(e){this.name=e,this._logLevel=Ue,this._logHandler=Ge,this._userLogHandler=null,We.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?qe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const Ke=(e,t)=>t.some((t=>e instanceof t));let Qe,Je;const Ze=new WeakMap,Xe=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap;let st={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||et.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return at(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function it(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Je||(Je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(rt(this),e),at(Ze.get(this))}:function(...e){return at(t.apply(rt(this),e))}:function(e,...n){const s=t.call(rt(this),e,...n);return et.set(s,e.sort?e.sort():[e]),at(s)}:(e instanceof IDBTransaction&&function(e){if(Xe.has(e))return;const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Xe.set(e,t)}(e),Ke(e,Qe||(Qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,st):e);var t}function at(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(at(e.result)),s()},a=()=>{n(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Ze.set(t,e)})).catch((()=>{})),nt.set(t,e),t}(e);if(tt.has(e))return tt.get(e);const t=it(e);return t!==e&&(tt.set(e,t),nt.set(t,e)),t}const rt=e=>nt.get(e),ot=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],ct=new Map;function ht(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ct.get(t))return ct.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=lt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!i&&!ot.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let r=a.store;return s&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),i&&a.done]))[0]};return ct.set(t,a),a}var dt;dt=st,st={...dt,get:(e,t,n)=>ht(e,t)||dt.get(e,t,n),has:(e,t)=>!!ht(e,t)||dt.has(e,t)};class ut{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const pt="@firebase/app",mt="0.9.19",gt=new Ye("@firebase/app"),ft={[pt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,wt=new Map;function yt(e,t){try{e.container.addComponent(t)}catch(n){gt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function bt(e){const t=e.name;if(wt.has(t))return gt.debug(`There were multiple attempts to register component ${t}.`),!1;wt.set(t,e);for(const t of vt.values())yt(t,e);return!0}const _t=new Ce("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _t.create("app-deleted",{appName:this._name})}}function Tt(e,t,n){var s;let i=null!==(s=ft[e])&&void 0!==s?s:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),r=t.match(/\s|\//);if(a||r){const e=[`Unable to register library "${i}" with version "${t}":`];return a&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&r&&e.push("and"),r&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void gt.warn(e.join(" "))}bt(new $e(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Rt="firebase-heartbeat-database",Ct=1,Et="firebase-heartbeat-store";let St=null;function At(){return St||(St=function(e,t,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const r=indexedDB.open(e,t),o=at(r);return s&&r.addEventListener("upgradeneeded",(e=>{s(at(r.result),e.oldVersion,e.newVersion,at(r.transaction),e)})),n&&r.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(Rt,Ct,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Et)}}).catch((e=>{throw _t.create("idb-open",{originalErrorMessage:e.message})}))),St}async function xt(e,t){try{const n=(await At()).transaction(Et,"readwrite"),s=n.objectStore(Et);await s.put(t,It(e)),await n.done}catch(e){if(e instanceof Re)gt.warn(e.message);else{const t=_t.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});gt.warn(t.message)}}}function It(e){return`${e.name}!${e.options.appId}`}class Dt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Lt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Ot();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ot(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let s=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Mt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Mt(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),s=ve(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ot(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await At();return await t.transaction(Et).objectStore(Et).get(It(e))}catch(e){if(e instanceof Re)gt.warn(e.message);else{const t=_t.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});gt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Mt(e){return ve(JSON.stringify({version:2,heartbeats:e})).length}bt(new $e("platform-logger",(e=>new ut(e)),"PRIVATE")),bt(new $e("heartbeat",(e=>new Dt(e)),"PRIVATE")),Tt(pt,mt,""),Tt(pt,mt,"esm2017"),Tt("fire-js",""),Tt("firebase","10.4.0","app"),function(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const s=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=s.name;if("string"!=typeof i||!i)throw _t.create("bad-app-name",{appName:String(i)});if(n||(n=null===(a=_e())||void 0===a?void 0:a.config),!n)throw _t.create("no-options");var a;const r=vt.get(i);if(r){if(Me(n,r.options)&&Me(s,r.config))return r;throw _t.create("duplicate-app",{appName:i})}const o=new Be(i);for(const e of wt.values())o.addComponent(e);const l=new kt(n,s,o);vt.set(i,l)}({apiKey:"AIzaSyBmQu5eXdhLf_4nEWILclPpuHKkHtQ6Q40",authDomain:"orcsandelves-3fb4d.firebaseapp.com",databaseURL:"https://orcsandelves-3fb4d-default-rtdb.europe-west1.firebasedatabase.app",projectId:"orcsandelves-3fb4d",storageBucket:"orcsandelves-3fb4d.appspot.com",messagingSenderId:"899562905668",appId:"1:899562905668:web:e91f81d16a4b19f8109c11"});const Nt="@firebase/database",Pt="1.0.1";let Vt="";class $t{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ae(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Se(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ht{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ie(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ft=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new $t(t)}}catch(e){}return new Ht},Bt=Ft("localStorage"),Wt=Ft("sessionStorage"),jt=new Ye("@firebase/database"),qt=function(){let e=1;return function(){return e++}}(),Ut=function(e){const t=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);if(i>=55296&&i<=56319){const t=i-55296;s++,de(s<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(s)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Pe;n.update(t);const s=n.digest();return me.encodeByteArray(s)},zt=function(...e){let t="";for(let n=0;n<e.length;n++){const s=e[n];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?t+=zt.apply(null,s):t+="object"==typeof s?Ae(s):s,t+=" "}return t};let Gt=null,Yt=!0;const Kt=function(...e){if(!0===Yt&&(Yt=!1,null===Gt&&!0===Wt.get("logging_enabled")&&(t=!0,de(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(jt.logLevel=je.VERBOSE,Gt=jt.log.bind(jt),n&&Wt.set("logging_enabled",!0)):"function"==typeof t?Gt=t:(Gt=null,Wt.remove("logging_enabled")))),Gt){const t=zt.apply(null,e);Gt(t)}var t,n},Qt=function(e){return function(...t){Kt(e,...t)}},Jt=function(...e){const t="FIREBASE INTERNAL ERROR: "+zt(...e);jt.error(t)},Zt=function(...e){const t=`FIREBASE FATAL ERROR: ${zt(...e)}`;throw jt.error(t),new Error(t)},Xt=function(...e){const t="FIREBASE WARNING: "+zt(...e);jt.warn(t)},en=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},tn="[MIN_NAME]",nn="[MAX_NAME]",sn=function(e,t){if(e===t)return 0;if(e===tn||t===nn)return-1;if(t===tn||e===nn)return 1;{const n=un(e),s=un(t);return null!==n?null!==s?n-s==0?e.length-t.length:n-s:-1:null!==s?1:e<t?-1:1}},an=function(e,t){return e===t?0:e<t?-1:1},rn=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ae(t))},on=function(e){if("object"!=typeof e||null===e)return Ae(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let s=0;s<t.length;s++)0!==s&&(n+=","),n+=Ae(t[s]),n+=":",n+=on(e[t[s]]);return n+="}",n},ln=function(e,t){const n=e.length;if(n<=t)return[e];const s=[];for(let i=0;i<n;i+=t)i+t>n?s.push(e.substring(i,n)):s.push(e.substring(i,i+t));return s};function cn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const hn=function(e){de(!en(e),"Invalid JSON number");let t,n,s,i,a;0===e?(n=0,s=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,s=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,s=Math.round(e/Math.pow(2,-1074))));const r=[];for(a=52;a;a-=1)r.push(s%2?1:0),s=Math.floor(s/2);for(a=11;a;a-=1)r.push(n%2?1:0),n=Math.floor(n/2);r.push(t?1:0),r.reverse();const o=r.join("");let l="";for(a=0;a<64;a+=8){let e=parseInt(o.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},dn=new RegExp("^-?(0*)\\d{1,10}$"),un=function(e){if(dn.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},pn=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Xt("Exception was thrown by user callback.",t),e}),Math.floor(0))}},mn=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class gn{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Xt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fn{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xt(e)}}class vn{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vn.OWNER="owner";const wn="5",yn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bn="ac",_n="websocket",kn="long_polling";class Tn{constructor(e,t,n,s,i=!1,a="",r=!1,o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=r,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bt.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Rn(e,t,n){let s;if(de("string"==typeof t,"typeof type must == string"),de("object"==typeof n,"typeof params must == object"),t===_n)s=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==kn)throw new Error("Unknown connection type: "+t);s=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return cn(n,((e,t)=>{i.push(e+"="+t)})),s+i.join("&")}class Cn{constructor(){this.counters_={}}incrementCounter(e,t=1){Ie(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ye(this.counters_)}}const En={},Sn={};function An(e){const t=e.toString();return En[t]||(En[t]=new Cn),En[t]}class xn{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&pn((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const In="start";class Dn{constructor(e,t,n,s,i,a,r){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.transportSessionId=a,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qt(e),this.stats_=An(t),this.urlFn=e=>(this.appCheckToken&&(e[bn]=this.appCheckToken),Rn(t,kn,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new On(((...e)=>{const[t,n,s,i,a]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===In)this.id=n,this.password=s;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[In]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=wn,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[bn]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&yn.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dn.forceAllow_=!0}static forceDisallow(){Dn.forceDisallow_=!0}static isAvailable(){return!(!Dn.forceAllow_&&(Dn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=fe(t),s=ln(n,1840);for(let e=0;e<s.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ae(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class On{constructor(e,t,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=On.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(e){Kt("frame writing exception"),e.stack&&Kt(e.stack),Kt(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Kt("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+s+"="+e.seg+"&ts"+s+"="+e.ts+"&d"+s+"="+e.d,s++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(s),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let Ln=null;"undefined"!=typeof MozWebSocket?Ln=MozWebSocket:"undefined"!=typeof WebSocket&&(Ln=WebSocket);class Mn{constructor(e,t,n,s,i,a,r){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qt(this.connId),this.stats_=An(t),this.connURL=Mn.connectionURL_(t,a,r,s,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,s,i){const a={};return a.v=wn,"undefined"!=typeof location&&location.hostname&&yn.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),s&&(a[bn]=s),i&&(a.p=i),Rn(e,_n,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bt.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new Ln(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Mn.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ln&&!Mn.forceDisallow_}static previouslyFailed(){return Bt.isInMemoryStorage||!0===Bt.get("previous_websocket_failure")}markConnectionHealthy(){Bt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Se(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(de(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=ln(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Mn.responsesRequiredToBeHealthy=2,Mn.healthyTimeout=3e4;class Nn{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Dn,Mn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Mn&&Mn.isAvailable();let n=t&&!Mn.previouslyFailed();if(e.webSocketOnly&&(t||Xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Mn];else{const e=this.transports_=[];for(const t of Nn.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Nn.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Nn.globalTransportInitialized_=!1;class Pn{constructor(e,t,n,s,i,a,r,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=a,this.onReady_=r,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qt("c:"+this.id+":"),this.transportManager_=new Nn(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=mn((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rn("t",e),n=rn("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rn("t",e),n=rn("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rn("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Jt("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jt("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),wn!==n&&Xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),mn((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mn((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Vn{put(e,t,n,s){}merge(e,t,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class $n{constructor(e){this.allowedEvents_=e,this.listeners_={},de(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const s=this.getInitialEvent(e);s&&t.apply(n,s)}off(e,t,n){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let e=0;e<s.length;e++)if(s[e].callback===t&&(!n||n===s[e].context))return void s.splice(e,1)}validateEventType_(e){de(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Hn extends $n{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Te()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Hn}getInitialEvent(e){return de("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Fn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bn(){return new Fn("")}function Wn(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function jn(e){return e.pieces_.length-e.pieceNum_}function qn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Fn(e.pieces_,t)}function Un(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function zn(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Gn(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Fn(t,0)}function Yn(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof Fn)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Fn(n,0)}function Kn(e){return e.pieceNum_>=e.pieces_.length}function Qn(e,t){const n=Wn(e),s=Wn(t);if(null===n)return t;if(n===s)return Qn(qn(e),qn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Jn(e,t){if(jn(e)!==jn(t))return!1;for(let n=e.pieceNum_,s=t.pieceNum_;n<=e.pieces_.length;n++,s++)if(e.pieces_[n]!==t.pieces_[s])return!1;return!0}function Zn(e,t){let n=e.pieceNum_,s=t.pieceNum_;if(jn(e)>jn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[s])return!1;++n,++s}return!0}class Xn{constructor(e,t){this.errorPrefix_=t,this.parts_=zn(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=Ve(this.parts_[e]);es(this)}}function es(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ts(e))}function ts(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class ns extends $n{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new ns}getInitialEvent(e){return de("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ss=1e3;class is extends Vn{constructor(e,t,n,s,i,a,r,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=r,this.authOverride_=o,this.id=is.nextPersistentConnectionId_++,this.log_=Qt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ss,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ns.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Hn.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const s=++this.requestNumber_,i={r:s,a:e,b:t};this.log_(Ae(i)),de(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const t=new ke,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,n,s){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),de(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const r={onComplete:s,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,r),this.connected_&&this.sendListen_(r)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+n+" for "+s);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const a=i.d,r=i.s;is.warnOnListenWarnings_(a,t),(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",i),"ok"!==r&&this.removeListen_(n,s),e.onComplete&&e.onComplete(r,a))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&Ie(e,"w")){const n=De(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=xe(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=xe(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,s=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,s))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,t)}sendUnlisten_(e,t,n,s){this.log_("Unlisten on "+e+" for "+t);const i={p:e};s&&(i.q=n,i.t=s),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,s){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{s&&setTimeout((()=>{s(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,s){this.putInternal("p",e,t,n,s)}merge(e,t,n,s){this.putInternal("m",e,t,n,s)}putInternal(e,t,n,s,i){this.initConnection_();const a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;const r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ae(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Jt("Unrecognized action received from server: "+Ae(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){de(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ss),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+is.nextConnectionId_++,i=this.lastSessionId;let a=!1,r=null;const o=function(){r?r.close():(a=!0,n())},l=function(e){de(r,"sendRequest call when we're not connected not allowed."),r.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);a?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,r=new Pn(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Xt(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(e){this.log_("Failed to get token: "+e),a||(this.repoInfo_.nodeAdmin&&Xt(e),o())}}}interrupt(e){Kt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Kt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Oe(this.interruptReasons_)&&(this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>on(e))).join("$"):"default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const n=new Fn(e).toString();let s;if(this.listens.has(n)){const e=this.listens.get(n);s=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,t){Kt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Kt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Vt.replace(/\./g,"-")]=1,Te()?e["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Hn.getInstance().currentlyOnline();return Oe(this.interruptReasons_)&&e}}is.nextPersistentConnectionId_=0,is.nextConnectionId_=0;class as{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new as(e,t)}}class rs{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new as(tn,e),s=new as(tn,t);return 0!==this.compare(n,s)}minPost(){return as.MIN}}let os;class ls extends rs{static get __EMPTY_NODE(){return os}static set __EMPTY_NODE(e){os=e}compare(e,t){return sn(e.name,t.name)}isDefinedOn(e){throw ue("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return as.MIN}maxPost(){return new as(nn,os)}makePost(e,t){return de("string"==typeof e,"KeyIndex indexValue must always be a string."),new as(e,os)}toString(){return".key"}}const cs=new ls;class hs{constructor(e,t,n,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,s&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ds{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=null!=n?n:ds.RED,this.left=null!=s?s:us.EMPTY_NODE,this.right=null!=i?i:us.EMPTY_NODE}copy(e,t,n,s,i){return new ds(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===i?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return us.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,s;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return us.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ds.RED=!0,ds.BLACK=!1;class us{constructor(e,t=us.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new us(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ds.BLACK,null,null))}remove(e){return new us(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ds.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,s=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(s=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new hs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new hs(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new hs(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new hs(this.root_,null,this.comparator_,!0,e)}}function ps(e,t){return sn(e.name,t.name)}function ms(e,t){return sn(e,t)}let gs;us.EMPTY_NODE=new class{copy(e,t,n,s,i){return this}insert(e,t,n){return new ds(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fs=function(e){return"number"==typeof e?"number:"+hn(e):"string:"+e},vs=function(e){if(e.isLeafNode()){const t=e.val();de("string"==typeof t||"number"==typeof t||"object"==typeof t&&Ie(t,".sv"),"Priority must be a string or number.")}else de(e===gs||e.isEmpty(),"priority of unexpected type.");de(e===gs||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ws,ys,bs;class _s{constructor(e,t=_s.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,de(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),vs(this.priorityNode_)}static set __childrenNodeConstructor(e){ws=e}static get __childrenNodeConstructor(){return ws}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new _s(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:_s.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Kn(e)?this:".priority"===Wn(e)?this.priorityNode_:_s.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:_s.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Wn(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(de(".priority"!==n||1===jn(e),".priority must be the last token in a path"),this.updateImmediateChild(n,_s.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fs(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?hn(this.value_):this.value_,this.lazyHash_=Ut(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===_s.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof _s.__childrenNodeConstructor?-1:(de(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,s=_s.VALUE_TYPE_ORDER.indexOf(t),i=_s.VALUE_TYPE_ORDER.indexOf(n);return de(s>=0,"Unknown leaf type: "+t),de(i>=0,"Unknown leaf type: "+n),s===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}_s.VALUE_TYPE_ORDER=["object","boolean","number","string"];const ks=new class extends rs{compare(e,t){const n=e.node.getPriority(),s=t.node.getPriority(),i=n.compareTo(s);return 0===i?sn(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return as.MIN}maxPost(){return new as(nn,new _s("[PRIORITY-POST]",bs))}makePost(e,t){const n=ys(e);return new as(t,new _s("[PRIORITY-POST]",n))}toString(){return".priority"}},Ts=Math.log(2);class Rs{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ts,10)),this.current_=this.count-1;const n=(s=this.count,parseInt(Array(s+1).join("1"),2));var s;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cs=function(e,t,n,s){e.sort(t);const i=function(t,s){const a=s-t;let r,o;if(0===a)return null;if(1===a)return r=e[t],o=n?n(r):r,new ds(o,r.node,ds.BLACK,null,null);{const l=parseInt(a/2,10)+t,c=i(t,l),h=i(l+1,s);return r=e[l],o=n?n(r):r,new ds(o,r.node,ds.BLACK,c,h)}},a=function(t){let s=null,a=null,r=e.length;const o=function(t,s){const a=r-t,o=r;r-=t;const c=i(a+1,o),h=e[a],d=n?n(h):h;l(new ds(d,h.node,s,null,c))},l=function(e){s?(s.left=e,s=e):(a=e,s=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),s=Math.pow(2,t.count-(e+1));n?o(s,ds.BLACK):(o(s,ds.BLACK),o(s,ds.RED))}return a}(new Rs(e.length));return new us(s||t,a)};let Es;const Ss={};class As{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return de(Ss&&ks,"ChildrenNode.ts has not been loaded"),Es=Es||new As({".priority":Ss},{".priority":ks}),Es}get(e){const t=De(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof us?t:null}hasIndex(e){return Ie(this.indexSet_,e.toString())}addIndex(e,t){de(e!==cs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const i=t.getIterator(as.Wrap);let a,r=i.getNext();for(;r;)s=s||e.isDefinedOn(r.node),n.push(r),r=i.getNext();a=s?Cs(n,e.getCompare()):Ss;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=a,new As(c,l)}addToIndexes(e,t){const n=Le(this.indexes_,((n,s)=>{const i=De(this.indexSet_,s);if(de(i,"Missing index implementation for "+s),n===Ss){if(i.isDefinedOn(e.node)){const n=[],s=t.getIterator(as.Wrap);let a=s.getNext();for(;a;)a.name!==e.name&&n.push(a),a=s.getNext();return n.push(e),Cs(n,i.getCompare())}return Ss}{const s=t.get(e.name);let i=n;return s&&(i=i.remove(new as(e.name,s))),i.insert(e,e.node)}}));return new As(n,this.indexSet_)}removeFromIndexes(e,t){const n=Le(this.indexes_,(n=>{if(n===Ss)return n;{const s=t.get(e.name);return s?n.remove(new as(e.name,s)):n}}));return new As(n,this.indexSet_)}}let xs;class Is{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&vs(this.priorityNode_),this.children_.isEmpty()&&de(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xs||(xs=new Is(new us(ms),null,As.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xs}updatePriority(e){return this.children_.isEmpty()?this:new Is(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?xs:t}}getChild(e){const t=Wn(e);return null===t?this:this.getImmediateChild(t).getChild(qn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(de(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new as(e,t);let s,i;t.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const a=s.isEmpty()?xs:this.priorityNode_;return new Is(s,a,i)}}updateChild(e,t){const n=Wn(e);if(null===n)return t;{de(".priority"!==Wn(e)||1===jn(e),".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(qn(e),t);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,s=0,i=!0;if(this.forEachChild(ks,((a,r)=>{t[a]=r.val(e),n++,i&&Is.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):i=!1})),!e&&i&&s<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+fs(this.getPriority().val())+":"),this.forEachChild(ks,((t,n)=>{const s=n.hash();""!==s&&(e+=":"+t+":"+s)})),this.lazyHash_=""===e?"":Ut(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const s=this.resolveIndex_(n);if(s){const n=s.getPredecessorKey(new as(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new as(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new as(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,as.Wrap);let s=n.peek();for(;null!=s&&t.compare(s,e)<0;)n.getNext(),s=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,as.Wrap);let s=n.peek();for(;null!=s&&t.compare(s,e)>0;)n.getNext(),s=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ds?-1:0}withIndex(e){if(e===cs||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Is(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===cs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(ks),n=t.getIterator(ks);let s=e.getNext(),i=n.getNext();for(;s&&i;){if(s.name!==i.name||!s.node.equals(i.node))return!1;s=e.getNext(),i=n.getNext()}return null===s&&null===i}return!1}return!1}}resolveIndex_(e){return e===cs?null:this.indexMap_.get(e.toString())}}Is.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Ds=new class extends Is{constructor(){super(new us(ms),Is.EMPTY_NODE,As.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Is.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(as,{MIN:{value:new as(tn,Is.EMPTY_NODE)},MAX:{value:new as(nn,Ds)}}),ls.__EMPTY_NODE=Is.EMPTY_NODE,_s.__childrenNodeConstructor=Is,gs=Ds,bs=Ds;const Os=!0;function Ls(e,t=null){if(null===e)return Is.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),de(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new _s(e,Ls(t));if(e instanceof Array||!Os){let n=Is.EMPTY_NODE;return cn(e,((t,s)=>{if(Ie(e,t)&&"."!==t.substring(0,1)){const e=Ls(s);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Ls(t))}{const n=[];let s=!1;if(cn(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Ls(t);i.isEmpty()||(s=s||!i.getPriority().isEmpty(),n.push(new as(e,i)))}})),0===n.length)return Is.EMPTY_NODE;const i=Cs(n,ps,(e=>e.name),ms);if(s){const e=Cs(n,ks.getCompare());return new Is(i,Ls(t),new As({".priority":e},{".priority":ks}))}return new Is(i,Ls(t),As.Default)}}!function(e){ys=e}(Ls);class Ms extends rs{constructor(e){super(),this.indexPath_=e,de(!Kn(e)&&".priority"!==Wn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),s=this.extractChild(t.node),i=n.compareTo(s);return 0===i?sn(e.name,t.name):i}makePost(e,t){const n=Ls(e),s=Is.EMPTY_NODE.updateChild(this.indexPath_,n);return new as(t,s)}maxPost(){const e=Is.EMPTY_NODE.updateChild(this.indexPath_,Ds);return new as(nn,e)}toString(){return zn(this.indexPath_,0).join("/")}}const Ns=new class extends rs{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?sn(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return as.MIN}maxPost(){return as.MAX}makePost(e,t){const n=Ls(e);return new as(t,n)}toString(){return".value"}};function Ps(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Vs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ks}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return de(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return de(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tn}hasEnd(){return this.endSet_}getIndexEndValue(){return de(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return de(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return de(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ks}copy(){const e=new Vs;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $s(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ks?n="$priority":e.index_===Ns?n="$value":e.index_===cs?n="$key":(de(e.index_ instanceof Ms,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ae(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ae(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ae(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ae(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ae(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Hs(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ks&&(t.i=e.index_.toString()),t}class Fs extends Vn{constructor(e,t,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Qt("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(de(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=Fs.getListenId_(e,n),r={};this.listens_[a]=r;const o=$s(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),De(this.listens_,a)===r){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",s(t,null)}}))}unlisten(e,t){const n=Fs.getListenId_(e,t);delete this.listens_[n]}get(e){const t=$s(e._queryParams),n=e._path.toString(),s=new ke;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),s.resolve(i)):s.reject(new Error(i))})),s.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([s,i])=>{s&&s.accessToken&&(t.auth=s.accessToken),i&&i.token&&(t.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+a);const r=new XMLHttpRequest;r.onreadystatechange=()=>{if(n&&4===r.readyState){this.log_("REST Response for "+a+" received. status:",r.status,"response:",r.responseText);let e=null;if(r.status>=200&&r.status<300){try{e=Se(r.responseText)}catch(e){Xt("Failed to parse JSON response for "+a+": "+r.responseText)}n(null,e)}else 401!==r.status&&404!==r.status&&Xt("Got unsuccessful REST response for "+a+" Status: "+r.status),n(r.status);n=null}},r.open("GET",a,!0),r.send()}))}}class Bs{constructor(){this.rootNode_=Is.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ws(){return{value:null,children:new Map}}function js(e,t,n){if(Kn(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const s=Wn(t);e.children.has(s)||e.children.set(s,Ws()),js(e.children.get(s),t=qn(t),n)}}function qs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,s)=>{qs(s,new Fn(t.toString()+"/"+e),n)}))}class Us{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&cn(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class zs{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Us(e);const n=1e4+2e4*Math.random();mn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;cn(e,((e,s)=>{s>0&&Ie(this.statsToReport_,e)&&(t[e]=s,n=!0)})),n&&this.server_.reportStats(t),mn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gs;function Ys(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gs||(Gs={}));class Ks{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Gs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kn(this.path)){if(null!=this.affectedTree.value)return de(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Fn(e));return new Ks(Bn(),t,this.revert)}}return de(Wn(this.path)===e,"operationForChild called for unrelated child."),new Ks(qn(this.path),this.affectedTree,this.revert)}}class Qs{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Gs.OVERWRITE}operationForChild(e){return Kn(this.path)?new Qs(this.source,Bn(),this.snap.getImmediateChild(e)):new Qs(this.source,qn(this.path),this.snap)}}class Js{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Gs.MERGE}operationForChild(e){if(Kn(this.path)){const t=this.children.subtree(new Fn(e));return t.isEmpty()?null:t.value?new Qs(this.source,Bn(),t.value):new Js(this.source,Bn(),t)}return de(Wn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Js(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Zs{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Xs(e,t,n,s,i,a){const r=s.filter((e=>e.type===n));r.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ue("Should only compare child_ events.");const s=new as(t.childName,t.snapshotNode),i=new as(n.childName,n.snapshotNode);return e.index_.compare(s,i)}(e,t,n))),r.forEach((n=>{const s=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(s,e.query_))}))}))}function ei(e,t){return{eventCache:e,serverCache:t}}function ti(e,t,n,s){return ei(new Zs(t,n,s),e.serverCache)}function ni(e,t,n,s){return ei(e.eventCache,new Zs(t,n,s))}function si(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ii(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let ai;class ri{constructor(e,t=(()=>(ai||(ai=new us(an)),ai))()){this.value=e,this.children=t}static fromObject(e){let t=new ri(null);return cn(e,((e,n)=>{t=t.set(new Fn(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bn(),value:this.value};if(Kn(e))return null;{const n=Wn(e),s=this.children.get(n);if(null!==s){const i=s.findRootMostMatchingPathAndValue(qn(e),t);return null!=i?{path:Yn(new Fn(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Kn(e))return this;{const t=Wn(e),n=this.children.get(t);return null!==n?n.subtree(qn(e)):new ri(null)}}set(e,t){if(Kn(e))return new ri(t,this.children);{const n=Wn(e),s=(this.children.get(n)||new ri(null)).set(qn(e),t),i=this.children.insert(n,s);return new ri(this.value,i)}}remove(e){if(Kn(e))return this.children.isEmpty()?new ri(null):new ri(null,this.children);{const t=Wn(e),n=this.children.get(t);if(n){const s=n.remove(qn(e));let i;return i=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&i.isEmpty()?new ri(null):new ri(this.value,i)}return this}}get(e){if(Kn(e))return this.value;{const t=Wn(e),n=this.children.get(t);return n?n.get(qn(e)):null}}setTree(e,t){if(Kn(e))return t;{const n=Wn(e),s=(this.children.get(n)||new ri(null)).setTree(qn(e),t);let i;return i=s.isEmpty()?this.children.remove(n):this.children.insert(n,s),new ri(this.value,i)}}fold(e){return this.fold_(Bn(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((s,i)=>{n[s]=i.fold_(Yn(e,s),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Bn(),t)}findOnPath_(e,t,n){const s=!!this.value&&n(t,this.value);if(s)return s;if(Kn(e))return null;{const s=Wn(e),i=this.children.get(s);return i?i.findOnPath_(qn(e),Yn(t,s),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bn(),t)}foreachOnPath_(e,t,n){if(Kn(e))return this;{this.value&&n(t,this.value);const s=Wn(e),i=this.children.get(s);return i?i.foreachOnPath_(qn(e),Yn(t,s),n):new ri(null)}}foreach(e){this.foreach_(Bn(),e)}foreach_(e,t){this.children.inorderTraversal(((n,s)=>{s.foreach_(Yn(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class oi{constructor(e){this.writeTree_=e}static empty(){return new oi(new ri(null))}}function li(e,t,n){if(Kn(t))return new oi(new ri(n));{const s=e.writeTree_.findRootMostValueAndPath(t);if(null!=s){const i=s.path;let a=s.value;const r=Qn(i,t);return a=a.updateChild(r,n),new oi(e.writeTree_.set(i,a))}{const s=new ri(n),i=e.writeTree_.setTree(t,s);return new oi(i)}}}function ci(e,t,n){let s=e;return cn(n,((e,n)=>{s=li(s,Yn(t,e),n)})),s}function hi(e,t){if(Kn(t))return oi.empty();{const n=e.writeTree_.setTree(t,new ri(null));return new oi(n)}}function di(e,t){return null!=ui(e,t)}function ui(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Qn(n.path,t)):null}function pi(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ks,((e,n)=>{t.push(new as(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new as(e,n.value))})),t}function mi(e,t){if(Kn(t))return e;{const n=ui(e,t);return new oi(null!=n?new ri(n):e.writeTree_.subtree(t))}}function gi(e){return e.writeTree_.isEmpty()}function fi(e,t){return vi(Bn(),e.writeTree_,t)}function vi(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let s=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(de(null!==i.value,"Priority writes must always be leaf nodes"),s=i.value):n=vi(Yn(e,t),i,n)})),n.getChild(e).isEmpty()||null===s||(n=n.updateChild(Yn(e,".priority"),s)),n}}function wi(e,t){return xi(t,e)}function yi(e,t){if(e.snap)return Zn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Zn(Yn(e.path,n),t))return!0;return!1}function bi(e){return e.visible}function _i(e,t,n){let s=oi.empty();for(let i=0;i<e.length;++i){const a=e[i];if(t(a)){const e=a.path;let t;if(a.snap)Zn(n,e)?(t=Qn(n,e),s=li(s,t,a.snap)):Zn(e,n)&&(t=Qn(e,n),s=li(s,Bn(),a.snap.getChild(t)));else{if(!a.children)throw ue("WriteRecord should have .snap or .children");if(Zn(n,e))t=Qn(n,e),s=ci(s,t,a.children);else if(Zn(e,n))if(t=Qn(e,n),Kn(t))s=ci(s,Bn(),a.children);else{const e=De(a.children,Wn(t));if(e){const n=e.getChild(qn(t));s=li(s,Bn(),n)}}}}}return s}function ki(e,t,n,s,i){if(s||i){const a=mi(e.visibleWrites,t);if(!i&&gi(a))return n;if(i||null!=n||di(a,Bn())){const a=function(e){return(e.visible||i)&&(!s||!~s.indexOf(e.writeId))&&(Zn(e.path,t)||Zn(t,e.path))};return fi(_i(e.allWrites,a,t),n||Is.EMPTY_NODE)}return null}{const s=ui(e.visibleWrites,t);if(null!=s)return s;{const s=mi(e.visibleWrites,t);return gi(s)?n:null!=n||di(s,Bn())?fi(s,n||Is.EMPTY_NODE):null}}}function Ti(e,t,n,s){return ki(e.writeTree,e.treePath,t,n,s)}function Ri(e,t){return function(e,t,n){let s=Is.EMPTY_NODE;const i=ui(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ks,((e,t)=>{s=s.updateImmediateChild(e,t)})),s;if(n){const i=mi(e.visibleWrites,t);return n.forEachChild(ks,((e,t)=>{const n=fi(mi(i,new Fn(e)),t);s=s.updateImmediateChild(e,n)})),pi(i).forEach((e=>{s=s.updateImmediateChild(e.name,e.node)})),s}return pi(mi(e.visibleWrites,t)).forEach((e=>{s=s.updateImmediateChild(e.name,e.node)})),s}(e.writeTree,e.treePath,t)}function Ci(e,t,n,s){return function(e,t,n,s,i){de(s||i,"Either existingEventSnap or existingServerSnap must exist");const a=Yn(t,n);if(di(e.visibleWrites,a))return null;{const t=mi(e.visibleWrites,a);return gi(t)?i.getChild(n):fi(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,s)}function Ei(e,t){return function(e,t){return ui(e.visibleWrites,t)}(e.writeTree,Yn(e.treePath,t))}function Si(e,t,n){return function(e,t,n,s){const i=Yn(t,n),a=ui(e.visibleWrites,i);return null!=a?a:s.isCompleteForChild(n)?fi(mi(e.visibleWrites,i),s.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ai(e,t){return xi(Yn(e.treePath,t),e.writeTree)}function xi(e,t){return{treePath:e,writeTree:t}}class Ii{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;de("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),de(".priority"!==n,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const a=s.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(n,Ps(n,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(n,(i=n,{type:"child_removed",snapshotNode:s.oldSnap,childName:i}));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(n,function(e,t){return{type:"child_added",snapshotNode:t,childName:e}}(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw ue("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(n,Ps(n,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(n,e);var i}getChanges(){return Array.from(this.changeMap.values())}}const Di=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Oi{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Zs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Si(this.writes_,e,t)}}getChildAfterChild(e,t,n){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ii(this.viewCache_),i=function(e,t,n,s,i,a){return function(e,t,n,s,i,a,r){let o;const l=mi(e.visibleWrites,t),c=ui(l,Bn());if(null!=c)o=c;else{if(null==n)return[];o=fi(l,n)}if(o=o.withIndex(r),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=r.getCompare(),n=a?o.getReverseIteratorFrom(s,r):o.getIteratorFrom(s,r);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,s)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,s,i,a)}(this.writes_,s,t,1,n,e);return 0===i.length?null:i[0]}}function Li(e,t,n,s,i,a){const r=t.eventCache;if(null!=Ei(s,n))return t;{let o,l;if(Kn(n))if(de(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ii(t),i=Ri(s,n instanceof Is?n:Is.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,a)}else{const n=Ti(s,ii(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{const c=Wn(n);if(".priority"===c){de(1===jn(n),"Can't have a priority with additional path components");const i=r.getNode();l=t.serverCache.getNode();const a=Ci(s,n,i,l);o=null!=a?e.filter.updatePriority(i,a):r.getNode()}else{const h=qn(n);let d;if(r.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Ci(s,n,r.getNode(),l);d=null!=e?r.getNode().getImmediateChild(c).updateChild(h,e):r.getNode().getImmediateChild(c)}else d=Si(s,c,t.serverCache);o=null!=d?e.filter.updateChild(r.getNode(),c,d,h,i,a):r.getNode()}}return ti(t,o,r.isFullyInitialized()||Kn(n),e.filter.filtersNodes())}}function Mi(e,t,n,s,i,a,r,o){const l=t.serverCache;let c;const h=r?e.filter:e.filter.getIndexedFilter();if(Kn(n))c=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,s);c=h.updateFullNode(l.getNode(),e,null)}else{const e=Wn(n);if(!l.isCompleteForPath(n)&&jn(n)>1)return t;const i=qn(n),a=l.getNode().getImmediateChild(e).updateChild(i,s);c=".priority"===e?h.updatePriority(l.getNode(),a):h.updateChild(l.getNode(),e,a,i,Di,null)}const d=ni(t,c,l.isFullyInitialized()||Kn(n),h.filtersNodes());return Li(e,d,n,i,new Oi(i,d,a),o)}function Ni(e,t,n,s,i,a,r){const o=t.eventCache;let l,c;const h=new Oi(i,t,a);if(Kn(n))c=e.filter.updateFullNode(t.eventCache.getNode(),s,r),l=ti(t,c,!0,e.filter.filtersNodes());else{const i=Wn(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),s),l=ti(t,c,o.isFullyInitialized(),o.isFiltered());else{const a=qn(n),c=o.getNode().getImmediateChild(i);let d;if(Kn(a))d=s;else{const e=h.getCompleteChild(i);d=null!=e?".priority"===Un(a)&&e.getChild(Gn(a)).isEmpty()?e:e.updateChild(a,s):Is.EMPTY_NODE}l=c.equals(d)?t:ti(t,e.filter.updateChild(o.getNode(),i,d,a,h,r),o.isFullyInitialized(),e.filter.filtersNodes())}}return l}function Pi(e,t){return e.eventCache.isCompleteForChild(t)}function Vi(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function $i(e,t,n,s,i,a,r,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Kn(n)?s:new ri(null).setTree(n,s);const h=t.serverCache.getNode();return l.children.inorderTraversal(((n,s)=>{if(h.hasChild(n)){const l=Vi(0,t.serverCache.getNode().getImmediateChild(n),s);c=Mi(e,c,new Fn(n),l,i,a,r,o)}})),l.children.inorderTraversal(((n,s)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===s.value;if(!h.hasChild(n)&&!l){const l=Vi(0,t.serverCache.getNode().getImmediateChild(n),s);c=Mi(e,c,new Fn(n),l,i,a,r,o)}})),c}function Hi(e,t){const n=ii(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Kn(t)&&!n.getImmediateChild(Wn(t)).isEmpty())?n.getChild(t):null}function Fi(e,t,n,s){t.type===Gs.MERGE&&null!==t.source.queryId&&(de(ii(e.viewCache_),"We should always have a full cache before handling merges"),de(si(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,a=function(e,t,n,s,i){const a=new Ii;let r,o;if(n.type===Gs.OVERWRITE){const l=n;l.source.fromUser?r=Ni(e,t,l.path,l.snap,s,i,a):(de(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!Kn(l.path),r=Mi(e,t,l.path,l.snap,s,i,o,a))}else if(n.type===Gs.MERGE){const l=n;l.source.fromUser?r=function(e,t,n,s,i,a,r){let o=t;return s.foreach(((s,l)=>{const c=Yn(n,s);Pi(t,Wn(c))&&(o=Ni(e,o,c,l,i,a,r))})),s.foreach(((s,l)=>{const c=Yn(n,s);Pi(t,Wn(c))||(o=Ni(e,o,c,l,i,a,r))})),o}(e,t,l.path,l.children,s,i,a):(de(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),r=$i(e,t,l.path,l.children,s,i,o,a))}else if(n.type===Gs.ACK_USER_WRITE){const o=n;r=o.revert?function(e,t,n,s,i,a){let r;if(null!=Ei(s,n))return t;{const o=new Oi(s,t,i),l=t.eventCache.getNode();let c;if(Kn(n)||".priority"===Wn(n)){let n;if(t.serverCache.isFullyInitialized())n=Ti(s,ii(t));else{const e=t.serverCache.getNode();de(e instanceof Is,"serverChildren would be complete if leaf node"),n=Ri(s,e)}c=e.filter.updateFullNode(l,n,a)}else{const i=Wn(n);let h=Si(s,i,t.serverCache);null==h&&t.serverCache.isCompleteForChild(i)&&(h=l.getImmediateChild(i)),c=null!=h?e.filter.updateChild(l,i,h,qn(n),o,a):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Is.EMPTY_NODE,qn(n),o,a):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(r=Ti(s,ii(t)),r.isLeafNode()&&(c=e.filter.updateFullNode(c,r,a)))}return r=t.serverCache.isFullyInitialized()||null!=Ei(s,Bn()),ti(t,c,r,e.filter.filtersNodes())}}(e,t,o.path,s,i,a):function(e,t,n,s,i,a,r){if(null!=Ei(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=s.value){if(Kn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Mi(e,t,n,l.getNode().getChild(n),i,a,o,r);if(Kn(n)){let s=new ri(null);return l.getNode().forEachChild(cs,((e,t)=>{s=s.set(new Fn(e),t)})),$i(e,t,n,s,i,a,o,r)}return t}{let c=new ri(null);return s.foreach(((e,t)=>{const s=Yn(n,e);l.isCompleteForPath(s)&&(c=c.set(e,l.getNode().getChild(s)))})),$i(e,t,n,c,i,a,o,r)}}(e,t,o.path,o.affectedTree,s,i,a)}else{if(n.type!==Gs.LISTEN_COMPLETE)throw ue("Unknown operation type: "+n.type);r=function(e,t,n,s,i){const a=t.serverCache;return Li(e,ni(t,a.getNode(),a.isFullyInitialized()||Kn(n),a.isFiltered()),n,s,Di,i)}(e,t,n.path,s,a)}const l=a.getChanges();return function(e,t,n){const s=t.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=si(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push({type:"value",snapshotNode:si(t)})}}(t,r,l),{viewCache:r,changes:l}}(e.processor_,i,t,n,s);var r,o;return r=e.processor_,o=a.viewCache,de(o.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),de(o.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),de(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,function(e,t,n,s){const i=s?[s]:e.eventRegistrations_;return function(e,t,n,s){const i=[],a=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Xs(e,i,"child_removed",t,s,n),Xs(e,i,"child_added",t,s,n),Xs(e,i,"child_moved",a,s,n),Xs(e,i,"child_changed",t,s,n),Xs(e,i,"value",t,s,n),i}(e.eventGenerator_,t,n,i)}(e,a.changes,a.viewCache.eventCache.getNode(),null)}let Bi,Wi;function ji(e,t,n,s){const i=t.source.queryId;if(null!==i){const a=e.views.get(i);return de(null!=a,"SyncTree gave us an op for an invalid query."),Fi(a,t,n,s)}{let i=[];for(const a of e.views.values())i=i.concat(Fi(a,t,n,s));return i}}function qi(e,t){let n=null;for(const s of e.views.values())n=n||Hi(s,t);return n}class Ui{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ri(null),this.pendingWriteTree_={visibleWrites:oi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zi(e,t,n,s,i){return function(e,t,n,s,i){de(s>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:s,visible:i}),i&&(e.visibleWrites=li(e.visibleWrites,t,n)),e.lastWriteId=s}(e.pendingWriteTree_,t,n,s,i),i?Qi(e,new Qs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Gi(e,t,n=!1){const s=function(e,t){for(let n=0;n<e.allWrites.length;n++){const s=e.allWrites[n];if(s.writeId===t)return s}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));de(n>=0,"removeWrite called with nonexistent writeId.");const s=e.allWrites[n];e.allWrites.splice(n,1);let i=s.visible,a=!1,r=e.allWrites.length-1;for(;i&&r>=0;){const t=e.allWrites[r];t.visible&&(r>=n&&yi(t,s.path)?i=!1:Zn(s.path,t.path)&&(a=!0)),r--}return!!i&&(a?(function(e){e.visibleWrites=_i(e.allWrites,bi,Bn()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(s.snap?e.visibleWrites=hi(e.visibleWrites,s.path):cn(s.children,(t=>{e.visibleWrites=hi(e.visibleWrites,Yn(s.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new ri(null);return null!=s.snap?t=t.set(Bn(),!0):cn(s.children,(e=>{t=t.set(new Fn(e),!0)})),Qi(e,new Ks(s.path,t,n))}return[]}function Yi(e,t,n){return Qi(e,new Qs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ki(e,t,n){const s=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const s=qi(n,Qn(e,t));if(s)return s}));return ki(s,t,i,n,!0)}function Qi(e,t){return Ji(t,e.syncPointTree_,null,wi(e.pendingWriteTree_,Bn()))}function Ji(e,t,n,s){if(Kn(e.path))return Zi(e,t,n,s);{const i=t.get(Bn());null==n&&null!=i&&(n=qi(i,Bn()));let a=[];const r=Wn(e.path),o=e.operationForChild(r),l=t.children.get(r);if(l&&o){const e=n?n.getImmediateChild(r):null,t=Ai(s,r);a=a.concat(Ji(o,l,e,t))}return i&&(a=a.concat(ji(i,e,s,n))),a}}function Zi(e,t,n,s){const i=t.get(Bn());null==n&&null!=i&&(n=qi(i,Bn()));let a=[];return t.children.inorderTraversal(((t,i)=>{const r=n?n.getImmediateChild(t):null,o=Ai(s,t),l=e.operationForChild(t);l&&(a=a.concat(Zi(l,i,r,o)))})),i&&(a=a.concat(ji(i,e,s,n))),a}function Xi(e,t){return e.tagToQueryMap.get(t)}function ea(e){const t=e.indexOf("$");return de(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Fn(e.substr(0,t))}}function ta(e,t,n){const s=e.syncPointTree_.get(t);return de(s,"Missing sync point for query tag that we're tracking"),ji(s,n,wi(e.pendingWriteTree_,t),null)}class na{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new na(t)}node(){return this.node_}}class sa{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Yn(this.path_,e);return new sa(this.syncTree_,t)}node(){return Ki(this.syncTree_,this.path_)}}const ia=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},aa=function(e,t,n){return e&&"object"==typeof e?(de(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ra(e[".sv"],t,n):"object"==typeof e[".sv"]?oa(e[".sv"],t):void de(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ra=function(e,t,n){if("timestamp"===e)return n.timestamp;de(!1,"Unexpected server value: "+e)},oa=function(e,t,n){e.hasOwnProperty("increment")||de(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const s=e.increment;"number"!=typeof s&&de(!1,"Unexpected increment value: "+s);const i=t.node();if(de(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const a=i.getValue();return"number"!=typeof a?s:a+s},la=function(e,t,n,s){return ha(t,new sa(n,e),s)},ca=function(e,t,n){return ha(e,new na(t),n)};function ha(e,t,n){const s=e.getPriority().val(),i=aa(s,t.getImmediateChild(".priority"),n);let a;if(e.isLeafNode()){const s=e,a=aa(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new _s(a,Ls(i)):e}{const s=e;return a=s,i!==s.getPriority().val()&&(a=a.updatePriority(new _s(i))),s.forEachChild(ks,((e,s)=>{const i=ha(s,t.getImmediateChild(e),n);i!==s&&(a=a.updateImmediateChild(e,i))})),a}}class da{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function ua(e,t){let n=t instanceof Fn?t:new Fn(t),s=e,i=Wn(n);for(;null!==i;){const e=De(s.node.children,i)||{children:{},childCount:0};s=new da(i,s,e),n=qn(n),i=Wn(n)}return s}function pa(e){return e.node.value}function ma(e,t){e.node.value=t,ya(e)}function ga(e){return e.node.childCount>0}function fa(e,t){cn(e.node.children,((n,s)=>{t(new da(n,e,s))}))}function va(e,t,n,s){n&&!s&&t(e),fa(e,(e=>{va(e,t,!0,s)})),n&&s&&t(e)}function wa(e){return new Fn(null===e.parent?e.name:wa(e.parent)+"/"+e.name)}function ya(e){null!==e.parent&&function(e,t,n){const s=function(e){return void 0===pa(e)&&!ga(e)}(n),i=Ie(e.node.children,t);s&&i?(delete e.node.children[t],e.node.childCount--,ya(e)):s||i||(e.node.children[t]=n.node,e.node.childCount++,ya(e))}(e.parent,e.name,e)}const ba=/[\[\].#$\/\u0000-\u001F\u007F]/,_a=/[\[\].#$\u0000-\u001F\u007F]/,ka=10485760,Ta=function(e){return"string"==typeof e&&0!==e.length&&!ba.test(e)},Ra=function(e,t,n){const s=n instanceof Fn?new Xn(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+ts(s));if("function"==typeof t)throw new Error(e+"contains a function "+ts(s)+" with contents = "+t.toString());if(en(t))throw new Error(e+"contains "+t.toString()+" "+ts(s));if("string"==typeof t&&t.length>ka/3&&Ve(t)>ka)throw new Error(e+"contains a string greater than "+ka+" utf8 bytes "+ts(s)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(cn(t,((t,a)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Ta(t)))throw new Error(e+" contains an invalid key ("+t+") "+ts(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var r,o;o=t,(r=s).parts_.length>0&&(r.byteLength_+=1),r.parts_.push(o),r.byteLength_+=Ve(o),es(r),Ra(e,a,s),function(e){const t=e.parts_.pop();e.byteLength_-=Ve(t),e.parts_.length>0&&(e.byteLength_-=1)}(s)})),n&&i)throw new Error(e+' contains ".value" child '+ts(s)+" in addition to actual children.")}},Ca=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ta(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),function(e){return"string"==typeof e&&0!==e.length&&!_a.test(e)}(e)}(n))throw new Error(function(e,t){return`${e} failed: ${t} argument `}(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ea{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sa(e,t,n){(function(e,t){let n=null;for(let s=0;s<t.length;s++){const i=t[s],a=i.getPath();null===n||Jn(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)})(e,n),function(e,t){e.recursionDepth_++;let n=!0;for(let s=0;s<e.eventLists_.length;s++){const i=e.eventLists_[s];i&&(t(i.path)?(Aa(e.eventLists_[s]),e.eventLists_[s]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}(e,(e=>Zn(e,t)||Zn(t,e)))}function Aa(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const s=n.getEventRunner();Gt&&Kt("event: "+n.toString()),pn(s)}}}const xa=25;class Ia{constructor(e,t,n,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ea,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ws(),this.transactionQueueTree_=new da,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Da(e,t,n){if(e.stats_=An(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Fs(e.repoInfo_,((t,n,s,i)=>{Ma(e,t,n,s,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Na(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ae(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new is(e.repoInfo_,t,((t,n,s,i)=>{Ma(e,t,n,s,i)}),(t=>{Na(e,t)}),(t=>{!function(e,t){cn(t,((t,n)=>{Pa(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const s=t.toString();return Sn[s]||(Sn[s]=new zs(e.stats_,e.server_)),Sn[s]}(e.repoInfo_),e.infoData_=new Bs,e.infoSyncTree_=new Ui({startListening:(t,n,s,i)=>{let a=[];const r=e.infoData_.getNode(t._path);return r.isEmpty()||(a=Yi(e.infoSyncTree_,t._path,r),setTimeout((()=>{i("ok")}),0)),a},stopListening:()=>{}}),Pa(e,"connected",!1),e.serverSyncTree_=new Ui({startListening:(t,n,s,i)=>(e.server_.listen(t,s,n,((n,s)=>{const a=i(n,s);Sa(e.eventQueue_,t._path,a)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Oa(e){const t=e.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function La(e){return ia({timestamp:Oa(e)})}function Ma(e,t,n,s,i){e.dataUpdateCount++;const a=new Fn(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let r=[];if(i)if(s){const t=Le(n,(e=>Ls(e)));r=function(e,t,n,s){const i=Xi(e,s);if(i){const s=ea(i),a=s.path,r=s.queryId,o=Qn(a,t),l=ri.fromObject(n);return ta(e,a,new Js(Ys(r),o,l))}return[]}(e.serverSyncTree_,a,t,i)}else{const t=Ls(n);r=function(e,t,n,s){const i=Xi(e,s);if(null!=i){const s=ea(i),a=s.path,r=s.queryId,o=Qn(a,t);return ta(e,a,new Qs(Ys(r),o,n))}return[]}(e.serverSyncTree_,a,t,i)}else if(s){const t=Le(n,(e=>Ls(e)));r=function(e,t,n){const s=ri.fromObject(n);return Qi(e,new Js({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,s))}(e.serverSyncTree_,a,t)}else{const t=Ls(n);r=Yi(e.serverSyncTree_,a,t)}let o=a;r.length>0&&(o=Ba(e,a)),Sa(e.eventQueue_,o,r)}function Na(e,t){Pa(e,"connected",t),!1===t&&function(e){$a(e,"onDisconnectEvents");const t=La(e),n=Ws();qs(e.onDisconnect_,Bn(),((s,i)=>{const a=la(s,i,e.serverSyncTree_,t);js(n,s,a)}));let s=[];qs(n,Bn(),((t,n)=>{s=s.concat(Yi(e.serverSyncTree_,t,n));const i=function(e,t){const n=wa(Wa(e,t)),s=ua(e.transactionQueueTree_,t);return function(e,t,n){let s=void 0?e:e.parent;for(;null!==s;){if(t(s))return!0;s=s.parent}}(s,(t=>{za(e,t)})),za(e,s),va(s,(t=>{za(e,t)})),n}(e,t);Ba(e,i)})),e.onDisconnect_=Ws(),Sa(e.eventQueue_,Bn(),s)}(e)}function Pa(e,t,n){const s=new Fn("/.info/"+t),i=Ls(n);e.infoData_.updateSnapshot(s,i);const a=Yi(e.infoSyncTree_,s,i);Sa(e.eventQueue_,s,a)}function Va(e){return e.nextWriteId_++}function $a(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Kt(n,...t)}function Ha(e,t,n){return Ki(e.serverSyncTree_,t,n)||Is.EMPTY_NODE}function Fa(e,t=e.transactionQueueTree_){if(t||Ua(e,t),pa(t)){const n=ja(e,t);de(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const s=n.map((e=>e.currentWriteId)),i=Ha(e,t,s);let a=i;const r=i.hash();for(let e=0;e<n.length;e++){const s=n[e];de(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;const i=Qn(t,s.path);a=a.updateChild(i,s.currentOutputSnapshotRaw)}const o=a.val(!0),l=t;e.server_.put(l.toString(),o,(s=>{$a(e,"transaction put response",{path:l.toString(),status:s});let i=[];if("ok"===s){const s=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Gi(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&s.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Ua(e,ua(e.transactionQueueTree_,t)),Fa(e,e.transactionQueueTree_),Sa(e.eventQueue_,t,i);for(let e=0;e<s.length;e++)pn(s[e])}else{if("datastale"===s)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Xt("transaction at "+l.toString()+" failed: "+s);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=s}Ba(e,t)}}),r)}(e,wa(t),n)}else ga(t)&&fa(t,(t=>{Fa(e,t)}))}function Ba(e,t){const n=Wa(e,t),s=wa(n);return function(e,t,n){if(0===t.length)return;const s=[];let i=[];const a=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let o=0;o<t.length;o++){const l=t[o],c=Qn(n,l.path);let h,d=!1;if(de(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,h=l.abortReason,i=i.concat(Gi(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=xa)d=!0,h="maxretry",i=i.concat(Gi(e.serverSyncTree_,l.currentWriteId,!0));else{const n=Ha(e,l.path,a);l.currentInputSnapshot=n;const s=t[o].update(n.val());if(void 0!==s){Ra("transaction failed: Data returned ",s,l.path);let t=Ls(s);"object"==typeof s&&null!=s&&Ie(s,".priority")||(t=t.updatePriority(n.getPriority()));const r=l.currentWriteId,o=La(e),c=ca(t,n,o);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=c,l.currentWriteId=Va(e),a.splice(a.indexOf(r),1),i=i.concat(zi(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),i=i.concat(Gi(e.serverSyncTree_,r,!0))}else d=!0,h="nodata",i=i.concat(Gi(e.serverSyncTree_,l.currentWriteId,!0))}Sa(e.eventQueue_,n,i),i=[],d&&(t[o].status=2,r=t[o].unwatcher,setTimeout(r,Math.floor(0)),t[o].onComplete&&("nodata"===h?s.push((()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot))):s.push((()=>t[o].onComplete(new Error(h),!1,null)))))}var r;Ua(e,e.transactionQueueTree_);for(let e=0;e<s.length;e++)pn(s[e]);Fa(e,e.transactionQueueTree_)}(e,ja(e,n),s),s}function Wa(e,t){let n,s=e.transactionQueueTree_;for(n=Wn(t);null!==n&&void 0===pa(s);)s=ua(s,n),n=Wn(t=qn(t));return s}function ja(e,t){const n=[];return qa(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function qa(e,t,n){const s=pa(t);if(s)for(let e=0;e<s.length;e++)n.push(s[e]);fa(t,(t=>{qa(e,t,n)}))}function Ua(e,t){const n=pa(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ma(t,n.length>0?n:void 0)}fa(t,(t=>{Ua(e,t)}))}function za(e,t){const n=pa(t);if(n){const s=[];let i=[],a=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(de(a===t-1,"All SENT items should be at beginning of queue."),a=t,n[t].status=3,n[t].abortReason="set"):(de(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Gi(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&s.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ma(t,void 0):n.length=a+1,Sa(e.eventQueue_,wa(t),i);for(let e=0;e<s.length;e++)pn(s[e])}}const Ga=function(e,t){const n=Ya(e),s=n.namespace;"firebase.com"===n.domain&&Zt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),s&&"undefined"!==s||"localhost"===n.domain||Zt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Tn(n.host,n.secure,s,i,t,"",s!==n.subdomain),path:new Fn(n.pathString)}},Ya=function(e){let t="",n="",s="",i="",a="",r=!0,o="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let h=e.indexOf("/");-1===h&&(h=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(h,d)),h<d&&(i=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let s=n[e];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch(e){}t+="/"+s}return t}(e.substring(h,d)));const u=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const s=n.split("=");2===s.length?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Xt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(r="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");s=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=s}"ns"in u&&(a=u.ns)}return{host:t,port:l,domain:n,subdomain:s,secure:r,scheme:o,pathString:i,namespace:a}};class Ka{constructor(e,t,n,s){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=s}get key(){return Kn(this._path)?null:Un(this._path)}get ref(){return new Qa(this._repo,this._path)}get _queryIdentifier(){const e=Hs(this._queryParams),t=on(e);return"{}"===t?"default":t}get _queryObject(){return Hs(this._queryParams)}isEqual(e){var t;if(!((e=(t=e)&&t._delegate?t._delegate:t)instanceof Ka))return!1;const n=this._repo===e._repo,s=Jn(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Qa extends Ka{constructor(e,t){super(e,t,new Vs,!1)}get parent(){const e=Gn(this._path);return null===e?null:new Qa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){de(!Bi,"__referenceConstructor has already been defined"),Bi=e}(Qa),function(e){de(!Wi,"__referenceConstructor has already been defined"),Wi=e}(Qa);const Ja={};class Za{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Da(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qa(this._repo,Bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=Ja[t];n&&n[e.key]===e||Zt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Zt("Cannot call "+e+" on a deleted database.")}}is.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},is.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Vt="10.4.0",bt(new $e("database",((e,{instanceIdentifier:t})=>function(e,t,n,s,i){let a=s||e.options.databaseURL;void 0===a&&(e.options.projectId||Zt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let r,o,l=Ga(a,i),c=l.repoInfo;"undefined"!=typeof process&&process.env&&(o=process.env.FIREBASE_DATABASE_EMULATOR_HOST),o?(r=!0,a=`http://${o}?ns=${c.namespace}`,l=Ga(a,i),c=l.repoInfo):r=!l.repoInfo.secure;const h=i&&r?new vn(vn.OWNER):new fn(e.name,e.options,t);Ca("Invalid Firebase Database URL",l),Kn(l.path)||Zt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,s){let i=Ja[t.name];i||(i={},Ja[t.name]=i);let a=i[e.toURLString()];return a&&Zt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Ia(e,!1,n,s),i[e.toURLString()]=a,a}(c,e,h,new gn(e.name,n));return new Za(d,e)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),Tt(Nt,Pt,void 0),Tt(Nt,Pt,"esm2017");const Xa=document.getElementById("container"),er=window.innerWidth<768;function tr(){window.scrollTo({top:0,left:0,behavior:"instant"}),setTimeout((()=>{const e=window.location.hash;if(!e)return;const t=document.getElementById(e.replace("#",""));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}),1e3)}j(C`<a class="navbar-brand lifecraft fs-1 text-blue" href="/">O&E</a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent"><ul class="navbar-nav align-items-center gap-3"><li class="nav-item" data-toggle="${er?"collapse":""}" data-target="#navbarSupportedContent"><a class="nav-link" href="/">Home</a></li><li class="nav-item" data-toggle="${er?"collapse":""}" data-target="#navbarSupportedContent"><a class="nav-link" href="/general">General info</a></li><li class="nav-item" data-toggle="${er?"collapse":""}" data-target="#navbarSupportedContent"><a class="nav-link" href="/elves">Elves</a></li><li class="nav-item" data-toggle="${er?"collapse":""}" data-target="#navbarSupportedContent"><a class="nav-link" href="/orcs">Orcs</a></li><li class="nav-item" data-toggle="${er?"collapse":""}" data-target="#navbarSupportedContent"><a class="nav-link discord-btn" href="https://discord.gg/UdSwB3Pk"><i class="bi bi-discord"></i> Discord</a></li></ul></div>`,document.querySelector("nav")),i()("/",(function(e,t){document.title="OaE - Home";const n=C`<div class="d-flex gap-5 flex-column justify-content-center align-items-center mb-3" id="downloadContainer"><div class="text-center"><h1 class="lifecraft text-yellow mb-0">Orcs & Elves</h1><h3>Created by <span class="text-yellow">Infernium</span></h3><h3 class="d-none d-md-block">Latest version: <span class="text-yellow">1.7.4</span></h3></div><a download class="fs-2 btn btn-primary d-none d-md-block" href="../../resources/Orcs and Elves IE (Patch 1.7.4p) Winter.w3x">Download <i class="bi bi-download"></i></a></div>${(e=>C`<div class="card border-primary text-bg-dark mb-5"><h3 class="card-header border-primary">Latest news: ${e.title} [${e.date}]</h3><div class="card-body"><div class="card-text">${z(G(e.content))}</div></div></div>`)(te[0])}`;j(n,Xa),t()}),tr),i()("/general",(function(e,t){j(C`${C`<h2 class="text-blue mb-3">Role selection <span class="hotkey">(F1)</span></h2><p>Show your teammates what your preferred role is by changing your icon in the scoreboard top-right of screen.</p><h4 class="text-yellow">Elves</h4>${er?he(re):ce(re)}<h4 class="text-yellow">Orcs</h4>${er?he(oe):ce(oe)}<hr>`} ${C`<h2 class="text-blue mb-3">Upgrades<span class="hotkey">(F1)</span></h2><p>View what upgrades your teammates unlocked. Example images below.</p><div class="d-flex flex-column flex-md-row justify-content-evenly"><div><h4 class="text-yellow text-center">Elves</h4><img style="max-width:100%" class="mb-4" src="/images/elves/upgradesExample.png"></div><div><h4 class="text-yellow text-center">Orcs</h4><img style="max-width:100%" class="mb-4" src="/images/orcs/upgradesExample.png"></div></div><hr>`} ${C`<h2 class="text-blue mb-3">Player Score<span class="hotkey">(F1)</span></h2><p>View your teammates score, such as kills, gold mined, etc. Example images below.</p><div class="d-flex flex-column flex-md-row justify-content-evenly"><div><h4 class="text-yellow text-center">Elves</h4><img style="max-width:100%" class="mb-4" src="/images/elves/playerScoreExample.png"></div><div><h4 class="text-yellow text-center">Orcs</h4><img style="max-width:100%" class="mb-4" src="/images/orcs/playerScoreExample.png"></div></div><hr>`} ${C`<h2 class="text-blue mb-3">Commands</h2><h4 class="text-yellow">Elves commands</h4>${le(se)}<h4 class="text-yellow">Orcs commands</h4>${le(ie)}<h4 class="text-yellow">Global commands</h4>${le(ne)}<h4 class="text-yellow">Observers commands</h4>${le(ae)}<hr>`}`,Xa),t()}),tr),i()("/teams",(function(e,t){document.title="OaE - Teams",j(C`<h1 class="text-center">Pick your team</h1><div class="d-flex justify-content-center"><div class="text-center"><img src="/images/header-decoration-gold.png"><h2 class="d-inline">Elves</h2><img style="transform:rotate(180deg)" src="/images/header-decoration-gold.png"> <a class="teamFlags" href="/elves"><img class="d-block m-auto w-50" src="/images/elves/banner.png"></a></div><div class="text-center"><img src="/images/header-decoration.png"><h2 class="d-inline">Orcs</h2><img style="transform:rotate(180deg)" src="/images/header-decoration.png"> <a class="teamFlags" href="/orcs"><img class="d-block m-auto w-50" src="/images/orcs/banner.png"></a></div></div>`,Xa),t()}),tr),i()("/orcs",ee,tr),i()("/elves",ee,tr),i()("/:team/:type/:name",(function(e,t){const n=e.params.name,s=Z[e.params.team],i=e.params.type;let a;"units"===i?a=s.units.find((e=>Y(e.name.toLowerCase())===n.toLowerCase())):"buildings"===i?a=s.buildings.find((e=>Y(e.name.toLowerCase())===n.toLowerCase())):window.location.replace("/"),document.title=`OaE - ${a.name}`;const r=e=>C`<div class="mb-5"><div class="tableWrapper"><table class="table w-auto table-striped table-hover" data-bs-theme="dark"><thead><tr><th class="text-center">Classic</th><th class="text-center">Reforged</th><th class="text-center">Name</th>${e.some((e=>e.hotkey))?C`<th class="text-center">Hotkey</th>`:""} ${e.some((e=>e.mana))?C`<th class="text-center">Mana</th>`:""} ${e.some((e=>e.cooldown||e.hasOwnProperty("passive")))?C`<th class="text-center">Cooldown</th>`:""} ${e.some((e=>e.range))?C`<th class="text-center">Range</th>`:""} ${e.some((e=>e.gold))?C`<th class="text-center">Gold cost</th>`:""} ${e.some((e=>e.supply))?C`<th class="text-center">Supply cost</th>`:""}<th class="descriptionColumn">Description</th></tr></thead><tbody>${e.map((t=>C`<tr id="${Y(t.name)}"><td class="text-center"><img src="${t.img}" class="entityImage"></td><td class="text-center"><img src="${t.imgR}" class="entityImage"></td><td class="name text-center">${z(G(t.name))}</td>${e.some((e=>e.hotkey))?t.hotkey?C`<td class="text-center">(${t.hotkey})</td>`:!0===t.passive?C`<td><span class="text-purple text-center">Passive</span></td>`:C`<td></td>`:""} ${e.some((e=>e.mana))?t.mana?C`<td class="text-blue ws-nowrap text-center">${t.mana} MP</td>`:C`<td></td>`:""} ${e.some((e=>e.cooldown))?t.cooldown?C`<td class="ws-nowrap text-center">${t.cooldown} sec</td>`:C`<td></td>`:""} ${e.some((e=>e.gold))?t.gold?C`<td class="text-center"><span class="text-yellow">${t.gold}g</span></td>`:C`<td></td>`:""} ${e.some((e=>e.supply))?t.supply?C`<td class="text-green text-center">${t.supply}</td>`:C`<td></td>`:""} ${e.some((e=>e.range))?t.range?C`<td class="text-center">${t.range}</td>`:C`<td></td>`:""}<td class="description">${z(G(t.description))}</td></tr>`))}</tbody></table></div></div>`,o=e=>C`<div class="mb-5">${e.map((e=>C`<div class="text-bg-dark rounded-3 mb-5 p-2"><div class="d-flex justify-content-center gap-3 align-items-center"><img src="${e.img}" class="entityImage"> <img src="${e.imgR}" class="entityImage"></div><div class="mt-2"><h2 class="text-center text-green">${z(G(e.name))} ${e.hotkey?C`<span class="hotkey">(${e.hotkey})</span>`:!0===e.passive?C`<span class="text-purple">(Passive)</span>`:""}</h2>${e.mana?C`<p class="text-blue mb-0">Mana: ${e.mana}</p>`:""} ${e.cooldown?C`<p class="mb-0">Cooldown: ${e.cooldown}</p>`:""} ${e.gold?C`<p class="text-yellow mb-0">Gold cost: ${e.gold}g</p>`:""} ${e.supply?C`<p class="mb-0">Supply cost: ${e.gold}</p>`:""} ${e.range?C`<p class="mb-0">Range: ${e.range}</p>`:""}<p class="mt-2">${z(G(e.description))}</p></div></div>`))}</div>`;var l,c;j(C`<a href="/${(l=a).team}" class="btn btn-secondary d-none d-md-inline fs-4"><i class="bi bi-arrow-left"></i> Return</a> ${er?C`<div class="d-flex flex-column align-items-center gap-3 mb-3 justify-content-center"><div class="d-flex align-items-center gap-5 justify-content-center"><img class="mainImg" src="${l.img}" class="unitImage" title="Classic Image"> <img class="mainImg" src="${l.imgR}" class="unitImage" title="Reforged Image"></div><h1 class="text-blue">${l.name} ${l.hotkey?C`<span class="text-purple">(${l.hotkey})</span>`:""}</h1></div>`:C`<div class="d-flex align-items-center gap-3 mb-3 justify-content-center"><img src="${s.header}"> <img class="mainImg" src="${l.img}" class="unitImage" title="Classic Image"> <img class="mainImg" src="${l.imgR}" class="unitImage" title="Reforged Image"><h1 class="text-blue">${l.name} ${l.hotkey?C`<span class="text-purple">(${l.hotkey})</span>`:""}</h1><img style="transform:rotate(180deg)" src="${s.header}"></div>`}<div class="d-flex flex-column flex-md-row align-items-start gap-5 mb-5">${l.stats?(e=>C`<div class="statsContainer wideTable border border-warning"><h4 class="text-yellow text-center">Base stats</h4><div class="tableWrapper"><table class="table table-striped table-hover w-auto mb-0" data-bs-theme="dark"><tbody>${e.gold?C`<tr><th>Gold cost</th><td class="text-center"><span class="text-yellow">${e.gold+"g"}</span></td></tr>`:""} ${e.supply?C`<tr><th>Supply cost</th><td class="text-center">${e.supply}</td></tr>`:""} ${e.feed?C`<tr><th>Feed</th><td class="text-center"><span class="text-danger">${e.feed}</span></td></tr>`:""} ${e.stats?Object.entries(e.stats).map((([e,t]=entry)=>C`<tr><th>${e}</th><td class="text-center">${t}</td></tr>`)):""}</tbody></table></div></div>`)(l):""}<div><div class="description mb-3"><h4 class="text-yellow">Description</h4>${z(G(l.description))}</div>${l.transformsTo?C`<div class="mt-3"><h4 class="text-yellow">Can transform to</h4><ul>${l.transformsTo.map((e=>C`<li><a href="${`/units/${Y(e)}`}">${e}</a></li>`))}</ul></div>`:""}</div></div>${l.abilities?C`<hr class="mt-5 mb-5"><h2 class="text-yellow">Abilities</h2>${"orcs"===s.name&&"units"===l.type?C`<p class="fs-3 text-red">All orc abilities below will display cooldown and stats like this: <span class="text-yellow">X/Y</span>, where <span class="text-yellow">X is Morph Level 1</span> and <span class="text-yellow">Y is Morph Level 2</span>!</p><p class="text-yellow">Example: Cooldown 90/60 means: Shaman cooldown: 90. Far Seer cooldown: 60</p>`:""} ${er?o(l.abilities):r(l.abilities)}`:""} ${l.upgrades?C`<hr class="mt-5 mb-5"><h2 class="text-yellow mt-3">Upgrades</h2>${er?o(l.upgrades):r(l.upgrades)}`:""} ${l.upgradesFromBuilding?.map((e=>C`<hr class="mt-5 mb-5"><h2 class="text-yellow mt-3">Upgrades from <a href="${e.url}">${e.name}</a></h2>${er?o(e.upgrades):r(e.upgrades)}`))} ${l.upgradesSeparated?(c=l.upgradesSeparated,C`<h4 class="text-yellow mt-3">Upgrades</h4><div>${c.map((e=>C`<div id="${Y(e.name)}" class="mb-5"><h4 class="mt-3">${e.name} ${e.hotkey?C`(<span class="text-purple">${e.hotkey}</span>)`:""}</h4>${e.description?C`<p>${z(G(e.description))}</p>`:""}<div class="tableWrapper wideTable"><table class="table table-striped-columns mb-0 w-auto" data-bs-theme="dark"><tr><th class="text-center">Level</th>${e.upgrades.map((t=>C`<td id="${Y(e.name)+t.lvl}" class="text-center">${t.lvl}</td>`))}</tr><tr><th class="text-center">Icons</th>${e.upgrades.map((e=>C`<td class="text-center"><img src="${e.img}" class="upgradeImage"> ${e.imgR?C`<img src="${e.imgR}" class="upgradeImage">`:""}</td>`))}</tr><tr><th class="text-center">Gold</th>${e.upgrades.map((e=>C`<td class="text-center text-yellow">${e.gold}g</td>`))}</tr>${e.hasRequires?C`<tr><th class="text-center">Requires</th>${e.upgrades.map((e=>C`${e.requires?C`<td class="text-center">${z(G(e.requires))}</td>`:C`<td></td>`}`))}</tr>`:""}<tr><th>Description</th>${e.upgrades.map((e=>C`<td>${e.changes.map((e=>C`${e.team||e.type?C`<a href="${`/${e.team}/${e.type?e.type+"/":""}${Y(e.name)}`}">${e.name}</a>`:C`<span class="text-blue">${e.name}</span>`}<ul>${e.stats.map((e=>C`<li>${e.name}: ${e.hasOwnProperty("old")?`${e.old} -> `:""}<span class="text-yellow">${e.new}</span> ${e.parenthesesVal?C`(<span class="text-yellow">${e.parenthesesVal}</span>)`:""} ${e.description?z(G(e.description)):""}</li>`))}</ul>`))}</td>`))}</tr></table></div></div><hr class="mt-5 mb-5">`))}</div>`):""} ${l.externalUpgrades?.map((e=>C`<hr class="mt-5 mb-5"><p class="fw-bold text-green fs-5 mt-5">This ${"units"===l.type?"unit":"building"} can get additional upgrades for health, armor, etc. from the <a href="${e.url}">${e.name}</a>!</p>`))}`,Xa),t()}),tr),i()("*",(()=>i()("/"))),i()()})()})();